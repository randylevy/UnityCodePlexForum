

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" class="" prefix="og: http://ogp.me/ns# profile: http://ogp.me/ns/profile#">
    
    
    
    

    
    <head>
        <meta id="CompatabilityMode" http-equiv="X-UA-Compatible" content="IE=edge" />
	    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link href="../assets/StyleSheet.css" id="MasterCss" rel="stylesheet" type="text/css" />
        <link rel="SHORTCUT ICON" href="../assets/favicon.ico" />
        <title>patterns &#38; practices - Unity - Urgent&#58; How important is resolving non-public objects&#63;</title>
        
       
                    <script src="../assets/mscc-0.3.6.min.js"></script>
        
                    <link rel="stylesheet" type="text/css" href="../assets/mscc-0.3.6.min.css" />
        
            <script type="text/javascript">
                var msccHadCookieBannerAtPageStart = true;
            </script>
        

        <!--
        Third party scripts and code linked to or referenced from this website are licensed to you by the parties that own such code,
        not by Microsoft.  See ASP.NET Ajax CDN Terms of Use â€“ http://www.asp.net/ajaxlibrary/CDN.ashx.
        -->
        <script src="https://ajax.aspnetcdn.com/ajax/jquery/jquery-1.4.4.min.js" type="text/javascript"></script>
        
        <script type="text/javascript">
            if (typeof jQuery === 'undefined') {
                document.write(unescape("%3Cscript src='https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js' type='text/javascript'%3E%3C/script%3E"));
            }
        </script>

        <script src="https://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.6/jquery-ui.min.js" type="text/javascript"></script>
        
        <script type="text/javascript">
            if (typeof jQuery.ui === 'undefined') {
                document.write(unescape("%3Cscript src='https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.6/jquery-ui.min.js' type='text/javascript'%3E%3C/script%3E"));
            }
        </script>

        
    <style type="text/css">.SideBar, .SideBarPadding{display:none;}.MainContent{width:auto;}.SiteContentTable{width:100%;}</style>
    <style id="ProjectStyles" type="text/css">
        .SiteHeader, .SiteHeaderLeft {
            height:45px !important;
            overflow:hidden;
        }
        .SiteContent 
        {
            padding: 0 0 1em 0;
            margin-top:0;
            min-height:225px;
            border-right: 1px solid lightgrey;
            border-left: 1px solid lightgrey;
            border-bottom: 1px solid lightgrey;
        }
        .IE table.MinWidthContent
        {
	        table-layout: auto !important;	
        }
    </style>
    
    
    <meta name="ROBOTS" content="NOINDEX, NOFOLLOW">

    
    
    <meta id="WTProjectName" name="WT.pi" content="unity"/>
    

    <link rel="EditURI" type="application/rsd+xml" title="RSD" href='http://unity.codeplex.com/rsd' />
    <link rel="wlwmanifest" type="application/wlwmanifest+xml" title="WLWManifest" href='/wlwmanifest.xml' />
    
    
        <link rel="alternate" type="application/rss+xml" title="patterns&#32;&#38;&#32;practices&#32;-&#32;Unity" url="http://unity.codeplex.com/project/feeds/rss"/>
    
        
        <link rel="alternate" type="application/rss+xml" title="patterns&#32;&#38;&#32;practices&#32;-&#32;Unity&#32;-&#32;Discussions" url="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fforum%2funity"/>
        
        <link rel="alternate" type="application/rss+xml" title="patterns&#32;&#38;&#32;practices&#32;-&#32;Unity&#32;-&#32;Issues" url="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fworkitem%2funity"/>
        
        <link rel="alternate" type="application/rss+xml" title="patterns&#32;&#38;&#32;practices&#32;-&#32;Unity&#32;-&#32;Downloads" url="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2frelease%2funity"/>
        <link rel="alternate" type="application/rss+xml" title="patterns&#32;&#38;&#32;practices&#32;-&#32;Unity&#32;-&#32;Reviews" url="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2freview%2funity"/>
        
    
        <link rel="alternate" type="application/rss+xml" title="patterns&#32;&#38;&#32;practices&#32;-&#32;Unity&#32;-&#32;Source&#32;code" url="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fsourcecontrol%2funity"/>
        <link rel="alternate" type="application/rss+xml" title="patterns&#32;&#38;&#32;practices&#32;-&#32;Unity&#32;-&#32;Wiki" url="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fwiki%2funity"/>
    
        
    
        <meta content="summary" name="twitter:card" /><meta content="@CodePlex" name="twitter:site" /><meta content="http://unity.codeplex.com/discussions/25123?ProjectName=unity" name="twitter:url" /><meta content="patterns &amp;#38; practices - Unity" name="twitter:title" /><meta content="The Unity Application Block &amp;#40;Unity&amp;#41; is officially under new ownership.&amp;#13;&amp;#10;https&amp;#58;&amp;#47;&amp;#47;github.com&amp;#47;unitycontainer&amp;#47;unity" name="twitter:description" /><meta content="http://www.codeplex.com/Images/codeplex.png" name="twitter:image" /><meta content="CodePlex" property="og:site_name" /><meta content="http://unity.codeplex.com/discussions/25123?ProjectName=unity" property="og:url" /><meta content="object" property="og:type" /><meta content="patterns &amp;#38; practices - Unity" property="og:title" /><meta content="The Unity Application Block &amp;#40;Unity&amp;#41; is officially under new ownership.&amp;#13;&amp;#10;https&amp;#58;&amp;#47;&amp;#47;github.com&amp;#47;unitycontainer&amp;#47;unity" property="og:description" /><meta content="http://www.codeplex.com/Images/codeplex.png" property="og:image" />
        

    </head>
    
    <body>
         
            
        <script src="../assets/ScriptLoader.js" type="text/javascript"></script>
        <form id="aspnetForm" autocomplete="off" method="POST" enctype="multipart/form-data">
            <input name="__RequestVerificationToken" type="hidden" value="6kgOe6Mt4eDsot_xyZl6NHP9F-G8Yt0jcE0KK-EFhBK1f6h9-tV51lnNavcr0mNO4ptc3LdjUAIyJRf86fvY-3m__eFKPEjhk6g0zsC4RN5s0yzW4XvIvPNquEk8QMzSFo8xXA2" /><input name="__RequestVerificationToken2" type="hidden" value="__RequestVerificationToken27e4ace93-e8c9-4f78-8546-154ee9ad5dd0" />
            
            <div id="UpdateProgressPanel" class="loading_animation" style="display:none;">
                <div class="row">
                    <h2 class="anim_h2">
                        <span id="UpdateProgressText">Updating...</span>
                        <span id="animatedLoadingIconContainer">
                            <img id="animatedLoadingIcon" src="../assets/loading_animation.gif" class="anim_img"/>
                        </span>
                    </h2>
                </div>
            </div>
            
            <div style="display:none;">
                
                <img id="BlankImage" style="width:0;height:0;" src="../assets/blank.png" onload="self.logoImageLoaded=true;"/>

                <script language="javascript" type="text/javascript">
                    var date = new Date();
                    var timezoneOffset = date.getTimezoneOffset() / 60 * -1;
                    var timezoneOffsetCookie = getCookie("TimezoneOffset");
                    var firstTimeSetTimezoneCookie = false;

                    if (timezoneOffsetCookie == null || timezoneOffsetCookie != timezoneOffset) {
                        firstTimeSetTimezoneCookie = true;
                        document.cookie = "TimezoneOffset=" + timezoneOffset + '; domain=.codeplex.com;expires=Wed, 10 Oct 2018 05:28:55 UTC';
                    }
                </script>
            </div>
            
            
            <div id="banner">
                <div id="message"><strong>This is an archived copy of the original CodePlex Unity Discussion Forum</strong><br />Unity is now on <a href="https://github.com/unitycontainer/">GitHub</a>
                    
                </div>
            </div>
            

            <div id="header">
                <div id="header_wrap" class="row">
                    <p id="logo"><a href="http://www.codeplex.com">Code<span class="semi">Plex</span></a><span id="tagline">Project Hosting for Open Source Software</span></p>
                    

<ul id="nav">

    <li><a href="/site/register/new" id="registerLink" class="ZoomFix">Register</a></li>
    <li ><a class="SignInLink" href="https://www.codeplex.com/site/login?RedirectUrl=http%3a%2f%2funity.codeplex.com%2fdiscussions%2f25123" id="signInLink">Sign In</a></li>
  
    <li class="last"><a class="rss_site_icon" href="http://www.codeplex.com/site/feeds/rss" type="application/rss+xml" rel="Alternate" title="CodePlex Site Activity"></a></li>
</ul>
                    <input id="searchsite" name="searchsite" maxlength="500" type="text" value="" /><span id="search_mag"><a id="submitSearch" name="submitSearch" class="magnify" title="Search" href="#"></a></span>
                    <script>
	$(document).ready(function() {
    var searchButton = $('#submitSearch'),
        searchBar = $('#searchsite');

    // Register our own handler for the search event while we wait for the SearchBox script to load.
    searchButton.bind('click.backupSearchBox', doProjectSearch);
    searchBar.bind('keypress.backupSearchBox', function(e) { if ($keyCode(e) === 13) { doProjectSearch(); return false; } });

    function cleanupSearchEvents() {
        // If the SearchBox was loaded, unregister our handlers.
        if (epx_loaded) {
            searchButton.unbind('.backupSearchBox');
            searchBar.unbind('.backupSearchBox');
        }
    }

    $loadScript('https://i4.services.social.microsoft.com/search/Widgets/SearchBox.jss?appid=1000&scopeid=1&boxId=searchsite&btnId=submitSearch&watermark=Search%20all%20projects&overrideWatermark=true&searchLocation=https%3A%2F%2Fwww.codeplex.com%2Fsite%2Fsearch&allowEmptySearch=true&focusOnInit=False&minimumTermLength=3', cleanupSearchEvents);
})
function doProjectSearch() {
    
    var url = 'https://www.codeplex.com/site/search';

    //If search term is not same as watermark
    if($('#searchsite').val() != 'Search all projects')    
    {        
        url = url + '?query=' + encodeURIComponent($('#searchsite').val());
    }

    
    var callback = '';
    if (callback.length > 0 && eval('typeof ' + callback) != 'undefined')
        url += eval(callback + '()');

    window.location.href = url;
    return false;
}
</script>
                </div>
            </div>
            
            <div id="wrap">
                
    <div id="sub_heading" class="row">
        
        <div id="ProjectHeader">
            <div id="project_title_row" class="row">
                <div id="project_logo">
                    
<a id="AffiliateLink" href="http://msdn.microsoft.com/practices">
    <img id="AffiliateImage" src="../assets/pnp_logo.png" title="patterns&#32;&#38;&#32;practices" />
</a>

    
    <h1 class="text_only"><a href="http://unity.codeplex.com/" id="ProjectTitle1"><div>patterns &#38; practices - Unity</div></a></h1>

                </div>
            </div>
        </div>
        
        <div id="ProjectDetailsDiv">
            
        </div>
		<div class="clear"></div>
        

<ul id="page_box_links">
	<li id="homeTabCell" style="width: 63px;"><a id="homeTab" href="http://unity.codeplex.com/" class="box_home">home</a><div></div></li>
    
	<li id="sourceTabCell" style="width:113px;"><a id="sourceTab" href="http://unity.codeplex.com/SourceControl/latest" class="box_source">source code</a><div></div></li>
    
	<li id="releasesTabCell" style="width:105px;"><a id="releasesTab" href="http://unity.codeplex.com/releases" class="box_downloads">downloads</a><div></div></li>
    
    <li id="documentationTabCell" style="width:143px;"><a id="documentationTab" href="http://unity.codeplex.com/documentation" class="box_documentation">documentation</a><div></div></li>
    
	<li id="discussionTabCell" style="width:112px;"><a id="discussionTab" href="../index.html" class="discussions_active">discussions</a><div></div></li>
    
	<li id="workItemsTabCell" style="width:70px;"><a id="workItemsTab" href="http://unity.codeplex.com/workitem/list/basic" class="box_issue">issues</a><div></div></li>
    
	<li id="peopleTabCell" style="width:70px;"><a id="peopleTab" href="http://unity.codeplex.com/team/view" class="box_people">people</a><div></div></li>
	<li id="licenseTabCell" style="width:70px;"><a id="licenseTab" href="http://unity.codeplex.com/license" class="box_license">license</a><div></div></li>
    
    <span class="stretch"></span>
</ul>

<script type="text/javascript">
    $(document).ready(function () {
        $('#page_box_links').applyLastClassToList();
    });
</script>
		    <div class="clear"></div>
            
     <td>
       

<div>
    
    <div id="actionBar" class="action_bar">
        <ul id="actionBar_ul" class="actionBar_sublinks subtab_right" style="vertical-align: middle;">

            

                <li id="li_actionbar_creatediscussion" data-action-id="actionbar_creatediscussion" data-action-type="Navigate" class="actionBar_sublinks" data-options-id="ec7844b1-7296-4219-bf2a-5be10309446a">
                
                    <script class="options" defer="defer" id="ec7844b1-7296-4219-bf2a-5be10309446a" type="application/json">{"navigate-url":"http://unity.codeplex.com/discussions/create"}</script> 
                    
                    <div class="actionBar_custom_content"></div>

                    <a href="#" id="actionbar_creatediscussion" title="Start a New Thread" class="action_bar_item_link">
                        <img id="img_actionbar_creatediscussion" class="action_bar_item_image" src="../assets/actionbar_newitem.png" style="vertical-align: middle" />
                        New Thread
                    </a>

                </li>

            

                <li id="li_actionbar_subscribe" data-action-id="actionbar_subscribe" data-action-type="PopUp" class="actionBar_sublinks" data-options-id="0c2898fd-fa60-478a-85d5-e9e9190889f7">
                
                    <script class="options" defer="defer" id="0c2898fd-fa60-478a-85d5-e9e9190889f7" type="application/json">{}</script> 
                    
                    <div class="actionBar_custom_content">

<div id="rssHoverDiv" class="HoverPanel LeftHoverWidth" style="display: none">
        <ul id="3_FeedsPanel" class="RssFeedsPanel">
            <li>
                <a id="ProjectRssLink" href="http://unity.codeplex.com/project/feeds/rss" class="ArrowSmall NoUnderline">All Project Updates</a>
            </li>
            
            <li>
                <a id="DiscussionRssLink" href="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fforum%2funity" class="ArrowSmall NoUnderline">Discussions</a>
            </li>
            
            <li>
                <a id="IssueTrackerRssLink" href="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fworkitem%2funity" class="ArrowSmall NoUnderline">Issue Tracker</a>
            </li>
            
            <li>
                <a id="ReleasesRssLink" href="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2frelease%2funity" class="ArrowSmall NoUnderline">Downloads</a>
            </li>
            <li>
                <a id="ReviewsRssLink" href="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2freview%2funity" class="ArrowSmall NoUnderline">Reviews</a>
            </li>
            
            <li>
                <a id="SourceControlRssLink" href="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fsourcecontrol%2funity" class="ArrowSmall NoUnderline">Source Code</a>
            </li>
            <li>
                <a id="WikiRssLink" href="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fwiki%2funity" class="ArrowSmall NoUnderline">Wiki &amp; Documentation</a>
            </li>
        </ul>
</div></div>

                    <a href="#" id="actionbar_subscribe" title="Subscribe to project updates in RSS feeds." class="action_bar_item_link">
                        <img id="img_actionbar_subscribe" class="action_bar_item_image" src="../assets/actionbar_subscribe.png" style="vertical-align: middle" />
                        Subscribe
                    </a>

                </li>

            
        </ul>
    </div>
</div>
     </td>

        

    </div>
    
    
<div class="Threads">
    <div class="ViewThread">
        
        
        
            <h1 class="page_title WordWrapBreakWord">
                Urgent&#58; How important is resolving non-public objects&#63;
            </h1>

            <!-- Private Discussion header -->
            

            <!-- Posts List Header: Topics and Wiki Link -->
            <table class="PostsListHeader">
                <tr>
                    <td>
                     
                    </td>
                    <td>
                        <div class="WikiLink">
                            <span title="Paste this into a wiki page to link to this discussion">
                                Wiki Link: [discussion:25123]
                            </span>
                        </div>
                    </td>
                </tr>
            </table>

            <!-- The list of posts -->
            

<div id="discussionsPostList" data-options-id="14f69aba-551d-432b-8dbe-6841ec6a72e3">
    <script class="options" defer="defer" id="14f69aba-551d-432b-8dbe-6841ec6a72e3" type="application/json">{"threadUrl":"http://unity.codeplex.com/discussions/25123","showEditor":false,"checkImageUrl":"../assets/check_answer.png"}</script>

    <div class="Posts" style="margin-top: 10px;">
    

<table cellpadding="0" cellspacing="0" style="width: 100%; margin-bottom: 0px; table-layout:fixed">
    

<tr id="PostPanel" class="Post" d:forid="84261">
    <td id="PostDetailsCell_84261" style="vertical-align: top; border: solid #BBB 1px; border-bottom: none; border-left: none; border-top: none; width: 114px" class="Post">
        <div class="Details">
            <a name="post84261"></a>
            <div class="UserName" style="white-space: pre-wrap; word-wrap: break-word;"><a class="UserProfileLink" href="http://www.codeplex.com/site/users/view/ctavares">ctavares</a></div>
            <div class="UserRole"></div>
            <div style="white-space: normal" class="SubText"><span class="smartDate" title="4/1/2008 6:19:12 PM" LocalTimeTicks="1207099152">Apr 1, 2008 at 6:19 PM</span></div>
            
        </div>
    </td>
    <td id="PostContent_84261" style="width: 100%; vertical-align: top;" 
        class=" discussionPost discussionListContent WordWrapBreakWord Post " 
        data-markdown="&#32;We&#39;re&#32;running&#32;into&#32;issue&#32;with&#32;partial&#32;trust&#32;and&#32;IL&#32;generation,&#32;and&#32;we&#32;have&#32;a&#32;bunch&#32;of&#32;tradeoffs&#32;to&#32;make,&#32;none&#32;of&#32;which&#32;are&#32;satisfying.&#32;I&#32;would&#32;like&#32;some&#32;input&#32;from&#32;the&#32;community&#32;on&#32;where&#32;you&#32;think&#32;the&#32;tradeoffs&#32;should&#32;lean.Right&#32;now,&#32;in&#32;order&#32;to&#32;support&#32;injecting&#32;non-public&#32;types,&#32;we&#32;attach&#32;the&#32;generated&#32;dynamic&#32;method&#32;to&#32;the&#32;type&#32;that&#32;we&#39;re&#32;resolving,&#32;or&#32;to&#32;the&#32;module&#32;it&#32;lives&#32;in&#32;if&#32;it&#39;s&#32;an&#32;interface.&#32;You&#32;cannot&#32;do&#32;this&#32;in&#32;partial&#32;trust.We&#32;could&#32;attach&#32;the&#32;dynamic&#32;method&#32;to&#32;one&#32;of&#32;the&#32;Unity&#32;modules&#32;instead,&#32;but&#32;then&#32;we&#32;cannot&#32;do&#32;anything&#32;with&#32;non-public&#32;types&#32;&#40;like&#32;call&#32;the&#32;constructor&#41;.We&#32;have&#32;a&#32;couple&#32;of&#32;options&#32;I&#32;can&#32;see.1&#41;&#32;Require&#32;only&#32;public&#32;types&#32;for&#32;injection.2&#41;&#32;Remove&#32;the&#32;IL,&#32;and&#32;do&#32;reflection&#32;based&#32;invocation&#32;instead&#32;&#40;no&#32;dynamic&#32;code,&#32;no&#32;issue&#41;.&#32;This&#32;costs&#32;us&#32;at&#32;least&#32;an&#32;order&#32;of&#32;magnitude&#32;in&#32;performance&#32;and&#32;penalizes&#32;the&#32;full&#32;trust&#32;case3&#41;&#32;Require&#32;public&#32;types&#32;when&#32;running&#32;in&#32;partial&#32;trust,&#32;can&#32;inject&#32;internal&#32;or&#32;private&#32;types&#32;in&#32;full&#32;trust.&#32;I&#32;don&#39;t&#32;like&#32;this&#32;one&#32;because&#32;it&#39;ll&#32;result&#32;in&#32;some&#32;nasty&#32;breakage&#32;as&#32;permissions&#32;change.4&#41;&#32;Use&#32;IL&#32;in&#32;full&#32;trust,&#32;reflection&#32;in&#32;partial&#32;trust.&#32;This&#32;doesn&#39;t&#32;penalize&#32;the&#32;full&#32;trust&#32;case,&#32;but&#32;makes&#32;extensions&#32;much&#32;harder,&#32;since&#32;there&#39;s&#32;now&#32;two&#32;paths&#32;to&#32;create&#32;the&#32;build&#32;plan.So,&#32;I&#39;d&#32;like&#32;to&#32;ask&#32;you&#32;guys&#32;-&#32;where&#32;are&#32;your&#32;priorities&#63;&#32;We&#32;need&#32;to&#32;support&#32;the&#32;partial&#32;trust&#32;case&#32;for&#32;Entlib&#32;if&#32;nothing&#32;else.&#32;Do&#32;you&#32;see&#32;&#34;only&#32;public&#32;types&#34;&#32;as&#32;a&#32;serious&#32;limitation&#32;or&#32;something&#32;you&#32;can&#32;live&#32;with&#63;&#32;&#40;I&#32;don&#39;t,&#32;but&#32;I&#39;m&#32;willing&#32;to&#32;be&#32;convinced&#41;.-Chris">
        We're running into issue with partial trust and IL generation, and we have a bunch of tradeoffs to make, none of which are satisfying. I would like some input from the community on where you think the tradeoffs should lean.<br>
<br>
Right now, in order to support injecting non-public types, we attach the generated dynamic method to the type that we're resolving, or to the module it lives in if it's an interface. You cannot do this in partial trust.<br>
<br>
We could attach the dynamic method to one of the Unity modules instead, but then we cannot do anything with non-public types (like call the constructor).<br>
<br>
We have a couple of options I can see.<br>
<br>
1) Require only public types for injection.<br>
2) Remove the IL, and do reflection based invocation instead (no dynamic code, no issue). This costs us at least an order of magnitude in performance and penalizes the full trust case<br>
3) Require public types when running in partial trust, can inject internal or private types in full trust. I don't like this one because it'll result in some nasty breakage as permissions change.<br>
4) Use IL in full trust, reflection in partial trust. This doesn't penalize the full trust case, but makes extensions much harder, since there's now two paths to create the build plan.<br>
<br>
So, I'd like to ask you guys - where are your priorities? We need to support the partial trust case for Entlib if nothing else. Do you see &quot;only public types&quot; as a serious limitation or something you can live with? (I don't, but I'm willing to be convinced).<br>
<br>
-Chris<br>

        
    </td>
    <td style="vertical-align: top; width: 134px;" class="Post ">
        
        <div id="Options_84261" class="Options" >
            
        </div>
        
    </td>
</tr>

        <tr><td colspan="3"><div class="PostSeparator"></div></td></tr>
        

<tr id="PostPanel" class="Post" d:forid="84283">
    <td id="PostDetailsCell_84283" style="vertical-align: top; border: solid #BBB 1px; border-bottom: none; border-left: none; border-top: none; width: 114px" class="Post">
        <div class="Details">
            <a name="post84283"></a>
            <div class="UserName" style="white-space: pre-wrap; word-wrap: break-word;"><a class="UserProfileLink" href="http://www.codeplex.com/site/users/view/BillKrat">BillKrat</a></div>
            <div class="UserRole"></div>
            <div style="white-space: normal" class="SubText"><span class="smartDate" title="4/1/2008 7:27:53 PM" LocalTimeTicks="1207103273">Apr 1, 2008 at 7:27 PM</span></div>
            
            <div style="white-space: normal" class="SubText" id="UpdatedDiv">Edited <span class="smartDate" title="4/1/2008 7:28:55 PM" LocalTimeTicks="1207103335">Apr 1, 2008 at 7:28 PM</span></div>
            
        </div>
    </td>
    <td id="PostContent_84283" style="width: 100%; vertical-align: top;" 
        class=" discussionPost discussionListContent WordWrapBreakWord Post " 
        data-markdown="ctavares&#32;wrote&#58;1&#41;&#32;Require&#32;only&#32;public&#32;types&#32;for&#32;injection.Definately&#32;would&#32;make&#32;it&#32;harder&#32;to&#32;violate&#32;encapsulation&#32;and&#32;OOP&#32;principals...&#32;I&#32;was&#32;once&#32;worked&#32;on&#32;a&#32;team&#32;that&#32;had&#32;an&#32;uphill&#32;battle&#32;because&#32;we&#32;had&#32;a&#32;project&#32;where&#32;a&#32;&#40;very&#32;bright&#41;&#32;C&#32;team&#32;wrote&#32;the&#32;infrastructure&#32;for&#32;a&#32;C&#35;&#32;application&#32;-&#32;all&#32;of&#32;the&#32;UI&#32;controls&#32;were&#32;made&#32;public&#32;and,&#32;via&#32;UI&#32;references,&#32;exposed&#32;to&#32;all&#32;layers.&#32;Throw&#32;in&#32;a&#32;misunderstood&#47;misused&#32;event&#32;pattern&#32;and&#32;we&#32;had&#32;a&#32;very&#32;hard&#32;to&#32;debug&#47;maintain&#32;application.&#32;In&#32;the&#32;ObjectBuilder&#47;2&#32;arena&#32;I&#32;am&#32;a&#32;newbie&#32;so&#32;I&#32;trust&#32;I&#32;don&#39;t&#32;understand&#32;the&#32;benefit&#32;of&#32;being&#32;able&#32;to&#32;inject&#32;non-public&#32;types&#32;but&#32;I&#32;suspect&#32;that&#32;the&#32;vast&#32;majority&#32;of&#32;developers&#32;fall&#32;into&#32;my&#32;category&#32;and&#32;we&#32;should&#32;be&#32;protected&#32;from&#32;ourselves&#32;&#59;&#41;Food&#32;for&#32;thought&#32;----&#32;download&#32;the&#32;Prism&#32;project&#32;and&#32;see&#32;how&#32;long&#32;it&#32;takes&#32;you&#32;&#40;the&#32;community&#32;-&#32;not&#32;ctavares&#59;&#41;&#32;to&#32;figure&#32;out&#32;how&#32;the&#32;Presenter&#32;gets&#32;injected&#32;with&#32;the&#32;view&#32;&#40;without&#32;reading&#32;my&#32;Voodoo&#32;message&#32;in&#32;the&#32;discussion&#32;area&#59;&#41;.&#32;A&#32;misunderstood&#47;misused&#32;Unity&#32;project&#32;could&#32;be&#32;costly&#32;to&#32;client&#32;projects&#32;and&#32;development&#32;teams&#32;that&#32;are&#32;spending&#32;more&#32;time&#32;debugging&#32;than&#32;coding.My&#32;2&#32;cents&#32;-&#32;now&#32;I&#39;m&#32;broke&#32;&#58;&#41;">
        <br>
<div style="border:dotted .1em #aaa; border-left:none; border-right:none; font-style:italic; margin:1em 0em 2.5em 3em; padding:.2em">
<br>
ctavares wrote:<br>
<br>
1) Require only public types for injection.<br>
<br>
<br>
</div>
<br>
Definately would make it harder to violate encapsulation and OOP principals... I was once worked on a team that had an uphill battle because we had a project where a (very bright) C team wrote the infrastructure for a C# application - all of the UI controls
 were made public and, via UI references, exposed to all layers. Throw in a misunderstood/misused event pattern and we had a very hard to debug/maintain application.
<br>
<br>
In the ObjectBuilder/2 arena I am a newbie so I trust I don't understand the benefit of being able to inject non-public types but I suspect that the vast majority of developers fall into my category and we should be protected from ourselves ;)<br>
<br>
Food for thought ---- download the Prism project and see how long it takes you (the community - not ctavares;) to figure out how the Presenter gets injected with the view (without reading my Voodoo message in the discussion area;). A misunderstood/misused Unity
 project could be costly to client projects and development teams that are spending more time debugging than coding.<br>
<br>
My 2 cents - now I'm broke :)<br>
<br>
<br>
<br>

        
    </td>
    <td style="vertical-align: top; width: 134px;" class="Post ">
        
        <div id="Options_84283" class="Options" >
            
        </div>
        
    </td>
</tr>

        <tr><td colspan="3"><div class="PostSeparator"></div></td></tr>
        

<tr id="PostPanel" class="Post" d:forid="84289">
    <td id="PostDetailsCell_84289" style="vertical-align: top; border: solid #BBB 1px; border-bottom: none; border-left: none; border-top: none; width: 114px" class="Post">
        <div class="Details">
            <a name="post84289"></a>
            <div class="UserName" style="white-space: pre-wrap; word-wrap: break-word;"><a class="UserProfileLink" href="http://www.codeplex.com/site/users/view/francois_tanguay">francois_tanguay</a></div>
            <div class="UserRole"></div>
            <div style="white-space: normal" class="SubText"><span class="smartDate" title="4/1/2008 7:50:13 PM" LocalTimeTicks="1207104613">Apr 1, 2008 at 7:50 PM</span></div>
            
        </div>
    </td>
    <td id="PostContent_84289" style="width: 100%; vertical-align: top;" 
        class=" discussionPost discussionListContent WordWrapBreakWord Post " 
        data-markdown="&#32;&#64;Chris&#58;&#32;From&#32;what&#32;I&#32;can&#32;see,&#32;the&#32;problematic&#32;case&#32;is&#32;injecting&#32;PartialTrust&#43;NonPublic&#32;Type.&#32;Can&#39;t&#32;we&#32;write&#32;an&#32;extension&#32;that&#32;when&#32;a&#32;non-public&#32;type&#32;is&#32;registered,&#32;it&#32;automatically&#32;registers&#32;a&#32;Reflection-Based&#32;IBuildPlanPolicy&#32;to&#32;override&#32;the&#32;dynamic&#32;build&#32;plan&#32;policy&#63;Do&#32;you&#32;see&#32;any&#32;complexity&#32;in&#32;developing&#32;such&#32;a&#32;build&#32;plan&#32;policy&#63;&#32;Would&#32;there&#32;be&#32;too&#32;much&#32;code&#32;duplication&#63;&#32;Or&#32;is&#32;complexity&#32;somewhere&#32;else&#63;If&#32;I&#32;had&#32;to&#32;vote,&#32;I&#39;d&#32;say&#32;I&#32;don&#39;t&#32;really&#32;care&#32;about&#32;non-public&#32;types&#32;as&#32;they&#32;aren&#39;t&#32;easily&#32;testable&#32;per-se&#32;so&#32;I&#39;d&#32;go&#32;with&#32;1&#41;&#32;as&#32;I&#32;believe&#32;we&#32;can&#32;build&#32;the&#32;new&#32;Reflection-based&#32;BuildPlan&#32;later&#32;on.&#64;Bill&#58;&#32;Prism&#32;creation&#32;is&#32;pretty&#32;straight-forward.&#32;The&#32;module&#32;registers&#32;the&#32;mapping&#32;IPositionSummaryView&#47;PositionSummaryView,&#32;it&#32;then&#32;creates&#32;the&#32;PositionSummaryPresenter&#32;which&#32;has&#32;a&#32;ctor&#32;dependency&#32;on&#32;IPositionSummaryView,&#32;Unity&#32;does&#32;the&#32;rest.">
        @Chris: From what I can see, the problematic case is injecting PartialTrust&#43;NonPublic Type. Can't we write an extension that when a non-public type is registered, it automatically registers a Reflection-Based IBuildPlanPolicy to override the dynamic build
 plan policy?<br>
<br>
Do you see any complexity in developing such a build plan policy? Would there be too much code duplication? Or is complexity somewhere else?<br>
<br>
If I had to vote, I'd say I don't really care about non-public types as they aren't easily testable per-se so I'd go with 1) as I believe we can build the new Reflection-based BuildPlan later on.<br>
<br>
@Bill: Prism creation is pretty straight-forward. The module registers the mapping IPositionSummaryView/PositionSummaryView, it then creates the PositionSummaryPresenter which has a ctor dependency on IPositionSummaryView, Unity does the rest.<br>

        
    </td>
    <td style="vertical-align: top; width: 134px;" class="Post ">
        
        <div id="Options_84289" class="Options" >
            
        </div>
        
    </td>
</tr>

        <tr><td colspan="3"><div class="PostSeparator"></div></td></tr>
        

<tr id="PostPanel" class="Post" d:forid="84295">
    <td id="PostDetailsCell_84295" style="vertical-align: top; border: solid #BBB 1px; border-bottom: none; border-left: none; border-top: none; width: 114px" class="Post">
        <div class="Details">
            <a name="post84295"></a>
            <div class="UserName" style="white-space: pre-wrap; word-wrap: break-word;"><a class="UserProfileLink" href="http://www.codeplex.com/site/users/view/ctavares">ctavares</a></div>
            <div class="UserRole"></div>
            <div style="white-space: normal" class="SubText"><span class="smartDate" title="4/1/2008 8:05:08 PM" LocalTimeTicks="1207105508">Apr 1, 2008 at 8:05 PM</span></div>
            
        </div>
    </td>
    <td id="PostContent_84295" style="width: 100%; vertical-align: top;" 
        class=" discussionPost discussionListContent WordWrapBreakWord Post " 
        data-markdown="&#32;&#64;Francois&#58;&#32;I&#32;wrote&#32;a&#32;reflection-based&#32;build&#32;plan&#32;implementation&#32;in&#32;about&#32;20&#32;minutes.&#32;I&#32;suspect&#32;others&#32;would&#32;take&#32;a&#32;little&#32;longer,&#32;though.&#32;The&#32;complexity&#32;concern&#32;is&#32;more&#32;for&#32;people&#32;developing&#32;extensions,&#32;since&#32;there&#32;would&#32;need&#32;to&#32;be&#32;TWO&#32;build&#32;plan&#32;strategy&#32;chains&#58;&#32;one&#32;for&#32;partial&#32;trust,&#32;one&#32;for&#32;full&#32;trust.&#32;And&#32;as&#32;such,&#32;assuming&#32;you&#39;re&#32;trying&#32;to&#32;customize&#32;the&#32;The&#32;main&#32;reason&#32;I&#32;think&#32;non-public&#32;types&#32;are&#32;important&#32;is&#32;this&#58;container.RegisterType&#38;lt&#59;ILogger,&#32;MyInternalLoggerImplementation&#38;gt&#59;&#40;&#41;&#59;But&#32;if&#32;you&#39;re&#32;not&#32;concerned&#32;that&#32;MyInternalLoggerImplementation&#32;needs&#32;to&#32;be&#32;public,&#32;I&#39;ll&#32;stop&#32;worrying.&#64;Bill&#58;&#32;Hate&#32;to&#32;tell&#32;you,&#32;but&#32;the&#32;prism&#32;stuff&#32;is&#32;par-for-the-course&#32;with&#32;DI&#32;containers.&#32;The&#32;same&#32;process&#32;would&#32;be&#32;used&#32;if&#32;you&#39;re&#32;using&#32;Unity,&#32;Windsor,&#32;StructureMap,&#32;Spring,&#32;or&#32;any&#32;other&#32;DI&#32;container.You&#32;just&#32;have&#32;to&#32;get&#32;used&#32;to&#32;it.">
        @Francois: I wrote a reflection-based build plan implementation in about 20 minutes. I suspect others would take a little longer, though. The complexity concern is more for people developing extensions, since there would need to be TWO build plan strategy
 chains: one for partial trust, one for full trust. And as such, assuming you're trying to customize the
<br>
<br>
The main reason I think non-public types are important is this:<br>
<br>
container.RegisterType&lt;ILogger, MyInternalLoggerImplementation&gt;();<br>
<br>
But if you're not concerned that MyInternalLoggerImplementation needs to be public, I'll stop worrying.<br>
<br>
@Bill: Hate to tell you, but the prism stuff is par-for-the-course with DI containers. The same process would be used if you're using Unity, Windsor, StructureMap, Spring, or any other DI container.<br>
You just have to get used to it.<br>

        
    </td>
    <td style="vertical-align: top; width: 134px;" class="Post ">
        
        <div id="Options_84295" class="Options" >
            
        </div>
        
    </td>
</tr>

        <tr><td colspan="3"><div class="PostSeparator"></div></td></tr>
        

<tr id="PostPanel" class="Post" d:forid="84299">
    <td id="PostDetailsCell_84299" style="vertical-align: top; border: solid #BBB 1px; border-bottom: none; border-left: none; border-top: none; width: 114px" class="Post">
        <div class="Details">
            <a name="post84299"></a>
            <div class="UserName" style="white-space: pre-wrap; word-wrap: break-word;"><a class="UserProfileLink" href="http://www.codeplex.com/site/users/view/BillKrat">BillKrat</a></div>
            <div class="UserRole"></div>
            <div style="white-space: normal" class="SubText"><span class="smartDate" title="4/1/2008 8:24:36 PM" LocalTimeTicks="1207106676">Apr 1, 2008 at 8:24 PM</span></div>
            
        </div>
    </td>
    <td id="PostContent_84299" style="width: 100%; vertical-align: top;" 
        class=" discussionPost discussionListContent WordWrapBreakWord Post " 
        data-markdown="&#64;Bill&#58;&#32;Prism&#32;creation&#32;is&#32;pretty&#32;straight-forward.&#32;The&#32;module&#32;registers&#32;the&#32;mapping&#32;IPositionSummaryView&#47;PositionSummaryView,&#32;it&#32;then&#32;creates&#32;the&#32;PositionSummaryPresenter&#32;which&#32;has&#32;a&#32;ctor&#32;dependency&#32;on&#32;IPositionSummaryView,&#32;Unity&#32;does&#32;the&#32;rest.&#64;Bill&#58;&#32;Hate&#32;to&#32;tell&#32;you,&#32;but&#32;the&#32;prism&#32;stuff&#32;is&#32;par-for-the-course&#32;with&#32;DI&#32;containers.&#32;The&#32;same&#32;process&#32;would&#32;be&#32;used&#32;if&#32;you&#39;re&#32;using&#32;Unity,&#32;Windsor,&#32;StructureMap,&#32;Spring,&#32;or&#32;any&#32;other&#32;DI&#32;container.Ahhh,&#32;but&#32;you&#32;guys&#32;are&#32;gurus...&#32;I&#39;m&#32;a&#32;newbie&#32;and&#32;learning&#32;-&#32;I&#32;trust&#32;there&#32;will&#32;be&#32;those&#32;like&#32;me&#32;that&#32;will&#32;stumble&#32;upon&#32;my&#32;ignorant&#32;questions&#32;and&#32;learn&#32;from&#32;you&#32;guys&#32;as&#32;I&#32;am&#32;learning&#32;&#59;&#41;&#32;">
        <br>
<div style="border:dotted .1em #aaa; border-left:none; border-right:none; font-style:italic; margin:1em 0em 2.5em 3em; padding:.2em">
<br>
@Bill: Prism creation is pretty straight-forward. The module registers the mapping IPositionSummaryView/PositionSummaryView, it then creates the PositionSummaryPresenter which has a ctor dependency on IPositionSummaryView, Unity does the rest.<br>
<br>
@Bill: Hate to tell you, but the prism stuff is par-for-the-course with DI containers. The same process would be used if you're using Unity, Windsor, StructureMap, Spring, or any other DI container.<br>
<br>
</div>
<br>
Ahhh, but you guys are gurus... I'm a newbie and learning - I trust there will be those like me that will stumble upon my ignorant questions and learn from you guys as I am learning ;)
<br>
<br>
<br>
<br>

        
    </td>
    <td style="vertical-align: top; width: 134px;" class="Post ">
        
        <div id="Options_84299" class="Options" >
            
        </div>
        
    </td>
</tr>

        <tr><td colspan="3"><div class="PostSeparator"></div></td></tr>
        

<tr id="PostPanel" class="Post" d:forid="84313">
    <td id="PostDetailsCell_84313" style="vertical-align: top; border: solid #BBB 1px; border-bottom: none; border-left: none; border-top: none; width: 114px" class="Post">
        <div class="Details">
            <a name="post84313"></a>
            <div class="UserName" style="white-space: pre-wrap; word-wrap: break-word;"><a class="UserProfileLink" href="http://www.codeplex.com/site/users/view/francois_tanguay">francois_tanguay</a></div>
            <div class="UserRole"></div>
            <div style="white-space: normal" class="SubText"><span class="smartDate" title="4/1/2008 9:31:44 PM" LocalTimeTicks="1207110704">Apr 1, 2008 at 9:31 PM</span></div>
            
        </div>
    </td>
    <td id="PostContent_84313" style="width: 100%; vertical-align: top;" 
        class=" discussionPost discussionListContent WordWrapBreakWord Post " 
        data-markdown="&#32;&#64;Chris&#58;&#32;Well,&#32;by&#32;now&#32;I&#32;think&#32;I&#32;showed&#32;the&#32;hard&#32;way&#32;my&#32;position&#32;on&#32;public&#47;internal&#32;&#58;&#40;&#32;I&#32;didn&#39;t&#32;realize&#32;that&#32;2&#32;BuildPlanStrategies&#32;chains&#32;would&#32;be&#32;needed&#59;&#32;but&#32;now&#32;that&#32;I&#39;ve&#32;looked&#32;at&#32;it,&#32;of&#32;course.&#32;Maybe&#32;the&#32;BuildPlanStrategies&#32;should&#32;be&#32;part&#32;of&#32;the&#32;extension&#32;configuration.">
        @Chris: Well, by now I think I showed the hard way my position on public/internal :(
<br>
<br>
I didn't realize that 2 BuildPlanStrategies chains would be needed; but now that I've looked at it, of course. Maybe the BuildPlanStrategies should be part of the extension configuration.<br>

        
    </td>
    <td style="vertical-align: top; width: 134px;" class="Post ">
        
        <div id="Options_84313" class="Options" >
            
        </div>
        
    </td>
</tr>

        <tr><td colspan="3"><div class="PostSeparator"></div></td></tr>
        

<tr id="PostPanel" class="Post" d:forid="84315">
    <td id="PostDetailsCell_84315" style="vertical-align: top; border: solid #BBB 1px; border-bottom: none; border-left: none; border-top: none; width: 114px" class="Post">
        <div class="Details">
            <a name="post84315"></a>
            <div class="UserName" style="white-space: pre-wrap; word-wrap: break-word;"><a class="UserProfileLink" href="http://www.codeplex.com/site/users/view/ctavares">ctavares</a></div>
            <div class="UserRole"></div>
            <div style="white-space: normal" class="SubText"><span class="smartDate" title="4/1/2008 9:47:41 PM" LocalTimeTicks="1207111661">Apr 1, 2008 at 9:47 PM</span></div>
            
        </div>
    </td>
    <td id="PostContent_84315" style="width: 100%; vertical-align: top;" 
        class=" discussionPost discussionListContent WordWrapBreakWord Post " 
        data-markdown="&#32;Right&#32;now,&#32;we&#39;re&#32;going&#32;with&#32;the&#32;existing&#32;behavior&#32;for&#32;Full&#32;trust,&#32;and&#32;public&#32;types&#32;only&#32;for&#32;partial&#32;trust.&#32;It&#32;seems&#32;to&#32;be&#32;working&#32;and&#32;doesn&#39;t&#32;require&#32;major&#32;backflips&#32;in&#32;the&#32;code.&#32;It&#32;turned&#32;out&#32;that&#32;dealing&#32;with&#32;non-public&#32;types&#32;with&#32;reflection&#32;required&#32;elevated&#32;permissions&#32;anyway,&#32;so&#32;it&#32;didn&#39;t&#32;really&#32;buy&#32;us&#32;anything.-Chris">
        Right now, we're going with the existing behavior for Full trust, and public types only for partial trust. It seems to be working and doesn't require major backflips in the code. It turned out that dealing with non-public types with reflection required
 elevated permissions anyway, so it didn't really buy us anything.<br>
<br>
-Chris<br>

        
    </td>
    <td style="vertical-align: top; width: 134px;" class="Post ">
        
        <div id="Options_84315" class="Options" >
            
        </div>
        
    </td>
</tr>

        <tr><td colspan="3"><div class="PostSeparator"></div></td></tr>
        

<tr id="PostPanel" class="Post" d:forid="103765">
    <td id="PostDetailsCell_103765" style="vertical-align: top; border: solid #BBB 1px; border-bottom: none; border-left: none; border-top: none; width: 114px" class="Post">
        <div class="Details">
            <a name="post103765"></a>
            <div class="UserName" style="white-space: pre-wrap; word-wrap: break-word;"><a class="UserProfileLink" href="http://www.codeplex.com/site/users/view/jnicholson">jnicholson</a></div>
            <div class="UserRole"></div>
            <div style="white-space: normal" class="SubText"><span class="smartDate" title="7/10/2008 3:55:10 AM" LocalTimeTicks="1215687310">Jul 10, 2008 at 3:55 AM</span></div>
            
        </div>
    </td>
    <td id="PostContent_103765" style="width: 100%; vertical-align: top;" 
        class=" discussionPost discussionListContent WordWrapBreakWord Post " 
        data-markdown="Let&#32;me&#32;start&#32;by&#32;apologizing&#32;for&#32;opening&#32;work&#32;item&#32;&#35;2422&#32;as&#32;it&#32;appears&#32;to&#32;be&#32;a&#32;duplicate&#32;of&#32;the&#32;discussion&#32;here&#32;&#40;somewhat&#41;.&#32;That&#32;being&#32;said,&#32;I&#32;would&#32;like&#32;to&#32;voice&#32;my&#32;support&#32;for&#32;Unity&#32;working&#32;with&#32;non-public&#32;types&#32;&#40;internal&#32;ones,&#32;specifically&#41;.&#32;Where&#32;this&#32;really&#32;becomes&#32;helpful&#32;is&#32;when&#32;doing&#32;interface-based&#32;design&#32;where&#32;the&#32;author&#32;wants&#32;&#40;needs&#63;&#41;&#32;to&#32;intentionally&#32;prevent&#32;callers&#32;from&#32;instantiating&#32;concrete&#32;types.&#32;My&#32;organization&#32;is&#32;particularly&#32;enamored&#32;with&#32;this&#32;style&#32;of&#32;programming,&#32;but&#32;is&#32;also&#32;very&#32;fond&#32;of&#32;Unity.&#32;We&#32;are&#32;reduced&#32;to&#32;either&#32;creating&#32;complex&#32;FxCop&#32;rules&#32;that&#32;catch&#32;newbies&#32;trying&#32;to&#32;new&#32;up&#32;a&#32;concrete&#32;type&#32;or&#32;finding&#32;these&#32;during&#32;code&#32;reviews.&#32;Neither&#32;case&#32;is&#32;ideal&#32;&#40;too&#32;many&#32;false&#32;positives&#32;in&#32;FxCop,&#32;too&#32;many&#32;mistakes&#32;in&#32;code&#32;reviews&#41;.&#32;&#32;That&#32;being&#32;said,&#32;the&#32;most&#32;compelling&#32;cases&#32;for&#32;our&#32;use&#32;are&#32;1&#41;&#32;instantiating&#32;public&#32;classes&#32;with&#32;internal&#32;instance&#32;constructors,&#32;and&#32;2&#41;&#32;instantiating&#32;internal&#32;classes&#32;with&#32;internal&#32;instance&#32;constructors.&#32;In&#32;both&#32;cases,&#32;the&#32;classes&#32;implement&#32;a&#32;public&#32;interface,&#32;which&#32;is&#32;the&#32;type&#32;that&#32;is&#32;used&#32;to&#32;resolve&#32;against&#32;the&#32;container&#32;at&#32;runtime.&#32;Additionally,&#32;I&#32;have&#32;to&#32;differ&#32;with&#32;Francois&#32;about&#32;the&#32;testability&#32;of&#32;non-public&#32;types&#32;insofar&#32;as&#32;internal&#32;types&#32;are&#32;concerned,&#32;as&#32;the&#32;InternalsVisibleToAttribute&#32;allows&#32;for&#32;this&#32;functionality&#32;already.&#32;Moreover,&#32;MSTest&#32;is&#32;capable&#32;of&#32;introducing&#32;private&#32;accessors&#32;that&#32;give&#32;you&#32;full&#32;access&#32;to&#32;all&#32;members,&#32;although&#32;this&#32;is&#32;a&#32;more&#32;specialized&#32;case--one&#32;that&#32;Unity&#32;likely&#32;need&#32;not&#32;support.&#32;&#32;At&#32;this&#32;point&#32;I&#32;don&#39;t&#32;have&#32;any&#32;suggestions&#32;as&#32;to&#32;how&#32;this&#32;would&#32;be&#32;implemented.&#32;Indeed,&#32;I&#32;am&#32;remarkably&#32;less&#32;qualified&#32;than&#32;you&#32;gentlemen&#32;to&#32;make&#32;such&#32;suggestions,&#32;anyhow.&#32;I&#32;only&#32;wanted&#32;to&#32;chime&#32;in&#32;that&#32;this&#32;is&#32;a&#32;feature&#32;that&#32;would&#32;be&#32;appreciated&#32;by&#32;myself&#32;and&#32;&#40;I&#39;m&#32;sure&#41;&#32;others&#32;who&#32;prescribe&#32;to&#32;strict&#32;interface-based&#32;design.&#32;">
        Let me start by apologizing for opening work item #2422 as it appears to be a duplicate of the discussion here (somewhat). That being said, I would like to voice my support for Unity working with non-public types (internal ones, specifically). Where this
 really becomes helpful is when doing interface-based design where the author wants (needs?) to intentionally prevent callers from instantiating concrete types. My organization is particularly enamored with this style of programming, but is also very fond of
 Unity. We are reduced to either creating complex FxCop rules that catch newbies trying to new up a concrete type or finding these during code reviews. Neither case is ideal (too many false positives in FxCop, too many mistakes in code reviews).<br>
<br>
That being said, the most compelling cases for our use are 1) instantiating public classes with internal instance constructors, and 2) instantiating internal classes with internal instance constructors. In both cases, the classes implement a public interface,
 which is the type that is used to resolve against the container at runtime. Additionally, I have to differ with Francois about the testability of non-public types insofar as internal types are concerned, as the InternalsVisibleToAttribute allows for this functionality
 already. Moreover, MSTest is capable of introducing private accessors that give you full access to all members, although this is a more specialized case--one that Unity likely need not support.<br>
<br>
At this point I don't have any suggestions as to how this would be implemented. Indeed, I am remarkably less qualified than you gentlemen to make such suggestions, anyhow. I only wanted to chime in that this is a feature that would be appreciated by myself
 and (I'm sure) others who prescribe to strict interface-based design. 
        
    </td>
    <td style="vertical-align: top; width: 134px;" class="Post ">
        
        <div id="Options_103765" class="Options" >
            
        </div>
        
    </td>
</tr>

        <tr><td colspan="3"><div class="PostSeparator"></div></td></tr>
        

<tr id="PostPanel" class="Post" d:forid="103772">
    <td id="PostDetailsCell_103772" style="vertical-align: top; border: solid #BBB 1px; border-bottom: none; border-left: none; border-top: none; width: 114px" class="Post">
        <div class="Details">
            <a name="post103772"></a>
            <div class="UserName" style="white-space: pre-wrap; word-wrap: break-word;"><a class="UserProfileLink" href="http://www.codeplex.com/site/users/view/ctavares">ctavares</a></div>
            <div class="UserRole"></div>
            <div style="white-space: normal" class="SubText"><span class="smartDate" title="7/10/2008 5:54:25 AM" LocalTimeTicks="1215694465">Jul 10, 2008 at 5:54 AM</span></div>
            
        </div>
    </td>
    <td id="PostContent_103772" style="width: 100%; vertical-align: top;" 
        class=" discussionPost discussionListContent WordWrapBreakWord Post " 
        data-markdown="At&#32;this&#32;point,&#32;in&#32;full&#32;trust&#32;you&#32;can&#32;inject&#32;instances&#32;of&#32;internal&#32;types.&#32;I&#32;had&#32;to&#32;make&#32;a&#32;change&#32;due&#32;to&#32;a&#32;codegen&#32;bug&#32;in&#32;the&#32;.NET&#32;framework&#32;which&#32;means&#32;you&#32;can&#32;no&#32;longer&#32;inject&#32;private&#32;types,&#32;but&#32;we&#32;didn&#39;t&#32;see&#32;that&#32;as&#32;that&#32;big&#32;a&#32;deal.&#32;So&#32;I&#32;think&#32;your&#32;scenarios&#32;are&#32;covered.&#32;If&#32;not,&#32;let&#32;me&#32;know.&#32;&#32;In&#32;partial&#32;trust&#32;scenarios,&#32;you&#39;re&#32;limited&#32;to&#32;public&#32;types&#32;only.&#32;No&#32;easy&#32;way&#32;around&#32;this&#32;one&#32;unfortunately,&#32;as&#32;it&#39;s&#32;a&#32;specific&#32;security&#32;limitation&#32;in&#32;the&#32;.NET&#32;framework.&#32;&#32;">
        At this point, in full trust you can inject instances of internal types. I had to make a change due to a codegen bug in the .NET framework which means you can no longer inject private types, but we didn't see that as that big a deal. So I think your scenarios
 are covered. If not, let me know.<br>
<br>
In partial trust scenarios, you're limited to public types only. No easy way around this one unfortunately, as it's a specific security limitation in the .NET framework.<br>
<br>

        
    </td>
    <td style="vertical-align: top; width: 134px;" class="Post ">
        
        <div id="Options_103772" class="Options" >
            
        </div>
        
    </td>
</tr>

</table>
    </div>

    
        <div class="StandardMarginTop">
            <a id="SignInToAddCommentLink" href="https://www.codeplex.com/site/login?RedirectUrl=http%3a%2f%2funity.codeplex.com%2fdiscussions%2f25123">
                Sign in to post message or set email notifications
            </a>
        </div>
    


    <div id="PostEditorContainer">
        <a name="editor"></a>
        <div id="Editor" style="display: none;">
            

<div class="MarkdownEditor" data-options-id="4df1dd74-cb3f-4bf0-a062-7a4be4e4a851">
    <script class="options" defer="defer" id="4df1dd74-cb3f-4bf0-a062-7a4be4e4a851" type="application/json">{"maxLength":10000,"styleSheetLocation":""}</script>

    <div class="MarkdownEditorControls">
        <a href="#" tabindex="-1" class="control md_help" title="Markdown Syntax Guide"></a>
        <div class="control md_divider"></div>
        <a href="#" tabindex="-1" class="control md_header" title="Insert Header (CTRL + H)"></a>
        <a href="#" tabindex="-1" class="control md_code" title="Insert Code (CTRL + K)"></a>
        <a href="#" tabindex="-1" class="control md_quote" title="Insert Quote (CTRL + Q)"></a>
        <a href="#" tabindex="-1" class="control md_img" title="Insert Img (CTRL + G)"></a>
        <a href="#" tabindex="-1" class="control md_link" title="Insert Link (CTRL + L)"></a>
        <a href="#" tabindex="-1" class="control md_ulist" title="Unordered List (CTRL + U)"></a>
        <a href="#" tabindex="-1" class="control md_olist" title="Ordered List (CTRL + O)"></a>
        <a href="#" tabindex="-1" class="control md_italics" title="Italic Text (CTRL + I)"></a>
        <a href="#" tabindex="-1" class="control md_bold" title="Bold Text (CTRL + B)"></a>
    </div>

    

<div class="tab_control">
    <!-- Generate the basic HTML for the tabs. -->
    
        <div id="Compose"
              class="tab selected"
              data-custom-header-id=""
              data-tab-contents-id="compose_contents_f1462201-0ec7-4f3d-9d7d-feb8a4fce592">
            Compose
        </div>
    
        <div id="Preview"
              class="tab "
              data-custom-header-id=""
              data-tab-contents-id="preview_contents_53563a1e-6dbb-4942-9827-8e9dde87edfb">
            Preview
        </div>
    
    <div class="clear"></div>
</div>


    <div id="compose_contents_f1462201-0ec7-4f3d-9d7d-feb8a4fce592" class="compose_tab_content">
        <textarea class=" MarkdownEditorDimensions" cols="20" id="MarkdownEditor" name="content" rows="2">
</textarea>
        <div class="ClearBoth"></div>

        <div class="markdownGuide" style="display: none">
            <table>
                <tr>
                    <td class="markdownGuideColumn">
                        <h1>Text Formatting</h1>
                        <div># Header 1</div>
                        <div>## Header 2</div>
                        <br />
                        <div>*italics* (or _italics_)</div>
                        <div>**bold** (or __bold__)</div>
                    </td>
                    <td class="markdownGuideColumn">
                        <h1>Lists</h1>
                        <div>* Unordered List</div>
                        <div>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp * SubItem</div>
                        <br />
                        <div>1. Ordered List</div>
                        <div>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp 1. SubItem</div>
                    </td>
                    <td class="markdownGuideColumn">
                        <h1>Quotes</h1>
                        <div>> Lorem ipsum</div>
                        <div>dolor sitamet </div>
                        <div>non. Lectus at</div>
                        <div>nam nunc...</div>
                    </td>
                    <td class="markdownGuideColumn">
                        <h1>Code</h1>
                        <div>`Inline Code`</div>
                        <br />
                        <div>``` C#</div>
                        <div>if (foo==bar)</div>
                        <div>&nbsp&nbsp&nbsp&nbsp&nbsp&nbspbar++</div>
                        <div>```</div>
                    </td>
                    <td class="markdownGuideColumn">
                        <h1>References</h1>
                        <div>[Link Text](URL)</div>
                        <br />
                        <div>![Image](URL)</div>
                        <br />
                        <a class="Reference" target="_blank" href="http://codeplex.codeplex.com/wikipage?title=Markdown&referringTitle=Documentation">Markdown Reference</a>
                    </td>
                </tr>
            </table>
        </div>
    </div>
    <div id="preview_contents_53563a1e-6dbb-4942-9827-8e9dde87edfb" class="preview_tab_content markDownOutput">
        
            <div></div>
        
    </div>
    <div class="clear"></div>
</div>

            
            <div class="row" id="recaptcha_row">
                
<script type="text/javascript">
    $(document).ready(function () {
        $('#recaptcha_reload').attr('src', '../assets/recaptcha_refresh.png');
        $('#recaptcha_switch_audio').attr('src', '../assets/recaptcha_audio.png');
        $('#recaptcha_switch_img').attr('src', '../assets/recaptcha_text.png');
        $('#recaptcha_whatsthis').attr('src', '../assets/recaptcha_help.png');
        $('#recaptcha_area tr:first').attr('height', '35');
    });
</script>

                <div class="clear"></div>
                <span id="ReCaptchaError"></span>
            </div>
            <div style="padding-top: 6px;">
                <input type="button" id="SaveButton" value="Save" class="ok" />
                <input type="button" id="CancelButton" value="Cancel" class="cancel" />
                <div class="clear"></div>
            </div>
        </div>
    </div>
</div>

<div id="DeletePostPanel" class="modal" style="display:none">
    <div class="row">
        <h2>Delete Post <a href="javascript:return false;" class="close">X</a></h2>
    </div>
    <div class="modal_info">
        <p>Are you sure you want to delete this post? You will not be able to recover it later.</p>
        <p class="modal_buttons">
            <input type="button" id="ClosePostCancel" value="Cancel" class="cancel" />
            <input type="button" id="ClosePostOk" value="Delete" class="ok" />
        </p>
        <div class="ClearBoth"></div>
    </div>
</div>
        
            <!-- Email notification / Subscription details -->
            
    </div>
</div>
    
<div id="DeleteThreadPanel" class="modal" style="display:none">
    <div class="row">
        <h2>Delete Thread <a href="javascript:return false;" class="close">X</a></h2>
    </div>
    <div class="modal_info">
        <p>Are you sure you want to delete this thread? You will not be able to recover it later.</p>
        <p class="modal_buttons">
            <input type="button" id="CloseThreadCancel" value="Cancel" class="cancel" />
            <input type="button" id="CloseThreadOk" value="Delete" class="ok" />
        </p>
        <div class="ClearBoth"></div>
    </div>
</div>

<script type="text/javascript" language="javascript">
    $(function () {

        $('#recaptcha_response_field')
            .bind('keypress', function (event) { return $submitKeyPressElement(this, event); });


        if ($('#DeleteThreadLink')) {
            $('#DeleteThreadLink').click(function () {
                OpenDialog('#DeleteThreadPanel', true, '41em');
            });
        }
        
        $('#DeleteThreadPanel #CloseThreadOk').click(function () {
            var url = 'http://unity.codeplex.com/discussions/25123';
            $.ajax({
                url: url,
                type: 'DELETE',
                success: function (x) {
                    location.href = x.RedirectUrl;
                }
            });
        });
    });

    workItemMention = new codeplex.ui.WorkItemMention();
    workItemMention.addLinks(".discussionPost");
</script>


        
        
                
                <div class="clear"></div>
                
                <div id="footer">
                    <div class="row">
                        <hr />
                        <ul>
                            <li>Â© 2006-2017 Microsoft</li>
                            <li><a href="http://www.codeplex.com/site/help">Get Help</a></li>
                            <li><a href="/site/legal/privacy">Privacy Statement</a></li>
                            <li><a href="http://www.codeplex.com/site/legal/terms">Terms of Use</a></li>
                            <li><a href="http://www.codeplex.com/site/legal/conduct">Code of Conduct</a></li>
                            <li><a href="http://developermedia.com/" target="_blank">Advertise With Us</a></li>
                            <li>Version 2017.10.3.21062</li>
                        </ul>
                    </div>
                </div>
            </div>
        </form>
    </body>

</html>