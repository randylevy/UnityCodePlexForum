

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" class="" prefix="og: http://ogp.me/ns# profile: http://ogp.me/ns/profile#">
    
    
    
    

    
    <head>
        <meta id="CompatabilityMode" http-equiv="X-UA-Compatible" content="IE=edge" />
	    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link href="../assets/StyleSheet.css" id="MasterCss" rel="stylesheet" type="text/css" />
        <link rel="SHORTCUT ICON" href="../assets/favicon.ico" />
        <title>patterns &#38; practices - Unity - Three entries per call using LogCallHandler on WCF service &#91;solved&#93;</title>
        
       
                    <script src="../assets/mscc-0.3.6.min.js"></script>
        
                    <link rel="stylesheet" type="text/css" href="../assets/mscc-0.3.6.min.css" />
        
            <script type="text/javascript">
                var msccHadCookieBannerAtPageStart = true;
            </script>
        

        <!--
        Third party scripts and code linked to or referenced from this website are licensed to you by the parties that own such code,
        not by Microsoft.  See ASP.NET Ajax CDN Terms of Use â€“ http://www.asp.net/ajaxlibrary/CDN.ashx.
        -->
        <script src="https://ajax.aspnetcdn.com/ajax/jquery/jquery-1.4.4.min.js" type="text/javascript"></script>
        
        <script type="text/javascript">
            if (typeof jQuery === 'undefined') {
                document.write(unescape("%3Cscript src='https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js' type='text/javascript'%3E%3C/script%3E"));
            }
        </script>

        <script src="https://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.6/jquery-ui.min.js" type="text/javascript"></script>
        
        <script type="text/javascript">
            if (typeof jQuery.ui === 'undefined') {
                document.write(unescape("%3Cscript src='https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.6/jquery-ui.min.js' type='text/javascript'%3E%3C/script%3E"));
            }
        </script>

        
    <style type="text/css">.SideBar, .SideBarPadding{display:none;}.MainContent{width:auto;}.SiteContentTable{width:100%;}</style>
    <style id="ProjectStyles" type="text/css">
        .SiteHeader, .SiteHeaderLeft {
            height:45px !important;
            overflow:hidden;
        }
        .SiteContent 
        {
            padding: 0 0 1em 0;
            margin-top:0;
            min-height:225px;
            border-right: 1px solid lightgrey;
            border-left: 1px solid lightgrey;
            border-bottom: 1px solid lightgrey;
        }
        .IE table.MinWidthContent
        {
	        table-layout: auto !important;	
        }
    </style>
    
    
    <meta name="ROBOTS" content="NOINDEX, NOFOLLOW">

    
    
    <meta id="WTProjectName" name="WT.pi" content="unity"/>
    

    <link rel="EditURI" type="application/rsd+xml" title="RSD" href='http://unity.codeplex.com/rsd' />
    <link rel="wlwmanifest" type="application/wlwmanifest+xml" title="WLWManifest" href='/wlwmanifest.xml' />
    
    
        <link rel="alternate" type="application/rss+xml" title="patterns&#32;&#38;&#32;practices&#32;-&#32;Unity" url="http://unity.codeplex.com/project/feeds/rss"/>
    
        
        <link rel="alternate" type="application/rss+xml" title="patterns&#32;&#38;&#32;practices&#32;-&#32;Unity&#32;-&#32;Discussions" url="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fforum%2funity"/>
        
        <link rel="alternate" type="application/rss+xml" title="patterns&#32;&#38;&#32;practices&#32;-&#32;Unity&#32;-&#32;Issues" url="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fworkitem%2funity"/>
        
        <link rel="alternate" type="application/rss+xml" title="patterns&#32;&#38;&#32;practices&#32;-&#32;Unity&#32;-&#32;Downloads" url="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2frelease%2funity"/>
        <link rel="alternate" type="application/rss+xml" title="patterns&#32;&#38;&#32;practices&#32;-&#32;Unity&#32;-&#32;Reviews" url="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2freview%2funity"/>
        
    
        <link rel="alternate" type="application/rss+xml" title="patterns&#32;&#38;&#32;practices&#32;-&#32;Unity&#32;-&#32;Source&#32;code" url="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fsourcecontrol%2funity"/>
        <link rel="alternate" type="application/rss+xml" title="patterns&#32;&#38;&#32;practices&#32;-&#32;Unity&#32;-&#32;Wiki" url="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fwiki%2funity"/>
    
        
    
        <meta content="summary" name="twitter:card" /><meta content="@CodePlex" name="twitter:site" /><meta content="http://unity.codeplex.com/discussions/232504?ProjectName=unity" name="twitter:url" /><meta content="patterns &amp;#38; practices - Unity" name="twitter:title" /><meta content="The Unity Application Block &amp;#40;Unity&amp;#41; is officially under new ownership.&amp;#13;&amp;#10;https&amp;#58;&amp;#47;&amp;#47;github.com&amp;#47;unitycontainer&amp;#47;unity" name="twitter:description" /><meta content="http://www.codeplex.com/Images/codeplex.png" name="twitter:image" /><meta content="CodePlex" property="og:site_name" /><meta content="http://unity.codeplex.com/discussions/232504?ProjectName=unity" property="og:url" /><meta content="object" property="og:type" /><meta content="patterns &amp;#38; practices - Unity" property="og:title" /><meta content="The Unity Application Block &amp;#40;Unity&amp;#41; is officially under new ownership.&amp;#13;&amp;#10;https&amp;#58;&amp;#47;&amp;#47;github.com&amp;#47;unitycontainer&amp;#47;unity" property="og:description" /><meta content="http://www.codeplex.com/Images/codeplex.png" property="og:image" />
        

    </head>
    
    <body>
         
            
        <script src="../assets/ScriptLoader.js" type="text/javascript"></script>
        <form id="aspnetForm" autocomplete="off" method="POST" enctype="multipart/form-data">
            <input name="__RequestVerificationToken" type="hidden" value="F9kMf0ZhveGcCU9-bJ8JG8hRaY7sSTxJjNMN21P1iW1UjJvKYXiSeglLulyHiPx9BndjTHF8TqmD2v4U3wmHoqNPt171bRcVNACC1uMk54nCiRATtOK02jq3i0tbQ2NEl2XJfA2" /><input name="__RequestVerificationToken2" type="hidden" value="__RequestVerificationToken257d3d3d8-e672-46af-a6e7-bfa9a50a6ed7" />
            
            <div id="UpdateProgressPanel" class="loading_animation" style="display:none;">
                <div class="row">
                    <h2 class="anim_h2">
                        <span id="UpdateProgressText">Updating...</span>
                        <span id="animatedLoadingIconContainer">
                            <img id="animatedLoadingIcon" src="../assets/loading_animation.gif" class="anim_img"/>
                        </span>
                    </h2>
                </div>
            </div>
            
            <div style="display:none;">
                
                <img id="BlankImage" style="width:0;height:0;" src="../assets/blank.png" onload="self.logoImageLoaded=true;"/>

                <script language="javascript" type="text/javascript">
                    var date = new Date();
                    var timezoneOffset = date.getTimezoneOffset() / 60 * -1;
                    var timezoneOffsetCookie = getCookie("TimezoneOffset");
                    var firstTimeSetTimezoneCookie = false;

                    if (timezoneOffsetCookie == null || timezoneOffsetCookie != timezoneOffset) {
                        firstTimeSetTimezoneCookie = true;
                        document.cookie = "TimezoneOffset=" + timezoneOffset + '; domain=.codeplex.com;expires=Wed, 10 Oct 2018 05:27:06 UTC';
                    }
                </script>
            </div>
            
            
            <div id="banner">
                <div id="message"><strong>This is an archived copy of the original CodePlex Unity Discussion Forum</strong><br />Unity is now on <a href="https://github.com/unitycontainer/">GitHub</a>
                    
                </div>
            </div>
            

            <div id="header">
                <div id="header_wrap" class="row">
                    <p id="logo"><a href="http://www.codeplex.com">Code<span class="semi">Plex</span></a><span id="tagline">Project Hosting for Open Source Software</span></p>
                    

<ul id="nav">

    <li><a href="/site/register/new" id="registerLink" class="ZoomFix">Register</a></li>
    <li ><a class="SignInLink" href="https://www.codeplex.com/site/login?RedirectUrl=http%3a%2f%2funity.codeplex.com%2fdiscussions%2f232504" id="signInLink">Sign In</a></li>
  
    <li class="last"><a class="rss_site_icon" href="http://www.codeplex.com/site/feeds/rss" type="application/rss+xml" rel="Alternate" title="CodePlex Site Activity"></a></li>
</ul>
                    <input id="searchsite" name="searchsite" maxlength="500" type="text" value="" /><span id="search_mag"><a id="submitSearch" name="submitSearch" class="magnify" title="Search" href="#"></a></span>
                    <script>
	$(document).ready(function() {
    var searchButton = $('#submitSearch'),
        searchBar = $('#searchsite');

    // Register our own handler for the search event while we wait for the SearchBox script to load.
    searchButton.bind('click.backupSearchBox', doProjectSearch);
    searchBar.bind('keypress.backupSearchBox', function(e) { if ($keyCode(e) === 13) { doProjectSearch(); return false; } });

    function cleanupSearchEvents() {
        // If the SearchBox was loaded, unregister our handlers.
        if (epx_loaded) {
            searchButton.unbind('.backupSearchBox');
            searchBar.unbind('.backupSearchBox');
        }
    }

    $loadScript('https://i4.services.social.microsoft.com/search/Widgets/SearchBox.jss?appid=1000&scopeid=1&boxId=searchsite&btnId=submitSearch&watermark=Search%20all%20projects&overrideWatermark=true&searchLocation=https%3A%2F%2Fwww.codeplex.com%2Fsite%2Fsearch&allowEmptySearch=true&focusOnInit=False&minimumTermLength=3', cleanupSearchEvents);
})
function doProjectSearch() {
    
    var url = 'https://www.codeplex.com/site/search';

    //If search term is not same as watermark
    if($('#searchsite').val() != 'Search all projects')    
    {        
        url = url + '?query=' + encodeURIComponent($('#searchsite').val());
    }

    
    var callback = '';
    if (callback.length > 0 && eval('typeof ' + callback) != 'undefined')
        url += eval(callback + '()');

    window.location.href = url;
    return false;
}
</script>
                </div>
            </div>
            
            <div id="wrap">
                
    <div id="sub_heading" class="row">
        
        <div id="ProjectHeader">
            <div id="project_title_row" class="row">
                <div id="project_logo">
                    
<a id="AffiliateLink" href="http://msdn.microsoft.com/practices">
    <img id="AffiliateImage" src="../assets/pnp_logo.png" title="patterns&#32;&#38;&#32;practices" />
</a>

    
    <h1 class="text_only"><a href="http://unity.codeplex.com/" id="ProjectTitle1"><div>patterns &#38; practices - Unity</div></a></h1>

                </div>
            </div>
        </div>
        
        <div id="ProjectDetailsDiv">
            
        </div>
		<div class="clear"></div>
        

<ul id="page_box_links">
	<li id="homeTabCell" style="width: 63px;"><a id="homeTab" href="http://unity.codeplex.com/" class="box_home">home</a><div></div></li>
    
	<li id="sourceTabCell" style="width:113px;"><a id="sourceTab" href="http://unity.codeplex.com/SourceControl/latest" class="box_source">source code</a><div></div></li>
    
	<li id="releasesTabCell" style="width:105px;"><a id="releasesTab" href="http://unity.codeplex.com/releases" class="box_downloads">downloads</a><div></div></li>
    
    <li id="documentationTabCell" style="width:143px;"><a id="documentationTab" href="http://unity.codeplex.com/documentation" class="box_documentation">documentation</a><div></div></li>
    
	<li id="discussionTabCell" style="width:112px;"><a id="discussionTab" href="../index.html" class="discussions_active">discussions</a><div></div></li>
    
	<li id="workItemsTabCell" style="width:70px;"><a id="workItemsTab" href="http://unity.codeplex.com/workitem/list/basic" class="box_issue">issues</a><div></div></li>
    
	<li id="peopleTabCell" style="width:70px;"><a id="peopleTab" href="http://unity.codeplex.com/team/view" class="box_people">people</a><div></div></li>
	<li id="licenseTabCell" style="width:70px;"><a id="licenseTab" href="http://unity.codeplex.com/license" class="box_license">license</a><div></div></li>
    
    <span class="stretch"></span>
</ul>

<script type="text/javascript">
    $(document).ready(function () {
        $('#page_box_links').applyLastClassToList();
    });
</script>
		    <div class="clear"></div>
            
     <td>
       

<div>
    
    <div id="actionBar" class="action_bar">
        <ul id="actionBar_ul" class="actionBar_sublinks subtab_right" style="vertical-align: middle;">

            

                <li id="li_actionbar_creatediscussion" data-action-id="actionbar_creatediscussion" data-action-type="Navigate" class="actionBar_sublinks" data-options-id="e8335dce-189c-4434-9243-abb7eb3c0147">
                
                    <script class="options" defer="defer" id="e8335dce-189c-4434-9243-abb7eb3c0147" type="application/json">{"navigate-url":"http://unity.codeplex.com/discussions/create"}</script> 
                    
                    <div class="actionBar_custom_content"></div>

                    <a href="#" id="actionbar_creatediscussion" title="Start a New Thread" class="action_bar_item_link">
                        <img id="img_actionbar_creatediscussion" class="action_bar_item_image" src="../assets/actionbar_newitem.png" style="vertical-align: middle" />
                        New Thread
                    </a>

                </li>

            

                <li id="li_actionbar_subscribe" data-action-id="actionbar_subscribe" data-action-type="PopUp" class="actionBar_sublinks" data-options-id="1c45cc77-c377-45b7-8067-64703e3a635b">
                
                    <script class="options" defer="defer" id="1c45cc77-c377-45b7-8067-64703e3a635b" type="application/json">{}</script> 
                    
                    <div class="actionBar_custom_content">

<div id="rssHoverDiv" class="HoverPanel LeftHoverWidth" style="display: none">
        <ul id="3_FeedsPanel" class="RssFeedsPanel">
            <li>
                <a id="ProjectRssLink" href="http://unity.codeplex.com/project/feeds/rss" class="ArrowSmall NoUnderline">All Project Updates</a>
            </li>
            
            <li>
                <a id="DiscussionRssLink" href="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fforum%2funity" class="ArrowSmall NoUnderline">Discussions</a>
            </li>
            
            <li>
                <a id="IssueTrackerRssLink" href="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fworkitem%2funity" class="ArrowSmall NoUnderline">Issue Tracker</a>
            </li>
            
            <li>
                <a id="ReleasesRssLink" href="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2frelease%2funity" class="ArrowSmall NoUnderline">Downloads</a>
            </li>
            <li>
                <a id="ReviewsRssLink" href="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2freview%2funity" class="ArrowSmall NoUnderline">Reviews</a>
            </li>
            
            <li>
                <a id="SourceControlRssLink" href="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fsourcecontrol%2funity" class="ArrowSmall NoUnderline">Source Code</a>
            </li>
            <li>
                <a id="WikiRssLink" href="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fwiki%2funity" class="ArrowSmall NoUnderline">Wiki &amp; Documentation</a>
            </li>
        </ul>
</div></div>

                    <a href="#" id="actionbar_subscribe" title="Subscribe to project updates in RSS feeds." class="action_bar_item_link">
                        <img id="img_actionbar_subscribe" class="action_bar_item_image" src="../assets/actionbar_subscribe.png" style="vertical-align: middle" />
                        Subscribe
                    </a>

                </li>

            
        </ul>
    </div>
</div>
     </td>

        

    </div>
    
    
<div class="Threads">
    <div class="ViewThread">
        
        
        
            <h1 class="page_title WordWrapBreakWord">
                Three entries per call using LogCallHandler on WCF service &#91;solved&#93;
            </h1>

            <!-- Private Discussion header -->
            

            <!-- Posts List Header: Topics and Wiki Link -->
            <table class="PostsListHeader">
                <tr>
                    <td>
                     
                    </td>
                    <td>
                        <div class="WikiLink">
                            <span title="Paste this into a wiki page to link to this discussion">
                                Wiki Link: [discussion:232504]
                            </span>
                        </div>
                    </td>
                </tr>
            </table>

            <!-- The list of posts -->
            

<div id="discussionsPostList" data-options-id="f8d5c1d0-2200-4e32-aae9-1127a5099f75">
    <script class="options" defer="defer" id="f8d5c1d0-2200-4e32-aae9-1127a5099f75" type="application/json">{"threadUrl":"http://unity.codeplex.com/discussions/232504","showEditor":false,"checkImageUrl":"../assets/check_answer.png"}</script>

    <div class="Posts" style="margin-top: 10px;">
    

<table cellpadding="0" cellspacing="0" style="width: 100%; margin-bottom: 0px; table-layout:fixed">
    

<tr id="PostPanel" class="Post" d:forid="513325">
    <td id="PostDetailsCell_513325" style="vertical-align: top; border: solid #BBB 1px; border-bottom: none; border-left: none; border-top: none; width: 114px" class="Post">
        <div class="Details">
            <a name="post513325"></a>
            <div class="UserName" style="white-space: pre-wrap; word-wrap: break-word;"><a class="UserProfileLink" href="http://www.codeplex.com/site/users/view/ssg31415926">ssg31415926</a></div>
            <div class="UserRole"></div>
            <div style="white-space: normal" class="SubText"><span class="smartDate" title="10/27/2010 12:05:56 PM" LocalTimeTicks="1288206356">Oct 27, 2010 at 12:05 PM</span></div>
            
        </div>
    </td>
    <td id="PostContent_513325" style="width: 100%; vertical-align: top;" 
        class=" discussionPost discussionListContent WordWrapBreakWord Post " 
        data-markdown="&#32;With&#32;Sarah&#39;s&#32;help,&#32;over&#32;on&#32;the&#32;EntLib&#32;project,&#32;I&#39;ve&#32;managed&#32;to&#32;get&#32;PolicyInjection&#32;working&#32;on&#32;a&#32;Console&#32;App.&#38;nbsp&#59;&#32;Now&#32;I&#39;m&#32;trying&#32;to&#32;get&#32;it&#32;working&#32;on&#32;a&#32;WCF&#32;app.&#38;nbsp&#59;&#32;I&#39;m&#32;creating&#32;an&#32;instance&#32;of&#32;Unity&#32;in&#32;a&#32;ServiceHostFactory&#32;so&#32;that&#32;I&#32;can&#32;have&#32;a&#32;single&#32;instance&#32;of&#32;it&#32;for&#32;all&#32;calls&#32;and&#32;I&#32;use&#32;the&#32;container&#32;to&#32;resolve&#32;the&#32;TestService&#32;class&#38;nbsp&#59;in&#32;an&#32;IInstanceProvider&#32;implementation.&#38;nbsp&#59;&#32;The&#32;essential&#32;part&#32;of&#32;that&#32;is&#32;that&#32;Unity&#32;resolves&#32;the&#32;TestService&#32;class.&#32;When&#32;my&#32;TestService&#32;class&#32;is&#32;instantiated,&#32;unity&#32;provides&#32;an&#32;instance&#32;of&#32;an&#32;implementation&#32;of&#38;nbsp&#59;IWiggalizer.&#38;nbsp&#59;&#32;GetString&#40;&#41;&#32;on&#32;the&#32;service&#32;calls&#32;GetHome&#40;&#41;&#32;on&#32;the&#32;Wiggalizer&#32;instance.&#32;I&#39;ve&#32;implemented&#32;LogCallHandler&#32;policy&#32;using&#32;the&#32;Edit&#32;Enterprise&#32;Library&#32;V5&#32;Configuration&#32;plug&#32;in&#32;to&#32;Visual&#32;Studio.&#38;nbsp&#59;&#32;Initially,&#32;I&#32;tried&#32;a&#32;Namespace&#32;Matching&#32;Rule&#32;with&#32;a&#32;wildcard&#32;&#40;as&#32;Wiggalizer&#32;is&#32;in&#32;a&#32;sub-Namespace&#41;.&#38;nbsp&#59;&#32;I&#32;got&#32;three&#32;BEFORE&#32;messages&#32;from&#32;TestService&#32;and&#32;one&#32;BEFORE&#32;from&#32;Wiggalizer,&#32;then&#32;one&#32;AFTER&#32;from&#32;Wiggalizer&#32;followed&#32;by&#32;three&#32;AFTER&#32;messages&#32;from&#32;TestService.&#38;nbsp&#59;&#32;Strange.&#32;So&#32;then&#32;I&#32;tried&#32;two&#32;separate&#32;policies&#32;with&#32;Type&#32;Matching&#32;Rules,&#32;one&#32;for&#32;each&#32;class.&#38;nbsp&#59;&#32;I&#39;ve&#32;given&#32;the&#32;Call&#32;Handlers&#32;different&#32;EventIds&#32;and&#32;Messages&#32;for&#32;clarity.&#38;nbsp&#59;&#32;I&#39;m&#32;still&#32;getting&#32;triple&#32;messages&#32;from&#32;the&#32;TestService.&#32;Here&#32;are&#32;extracts&#32;from&#32;Web.config&#58;&#32;&#32;&#32;&#38;lt&#59;container&#38;gt&#59;&#32;&#38;lt&#59;extension&#32;type&#61;&#38;quot&#59;Interception&#38;quot&#59;&#47;&#38;gt&#59;&#32;&#38;lt&#59;register&#32;type&#61;&#38;quot&#59;IWiggalizer&#38;quot&#59;&#32;mapTo&#61;&#38;quot&#59;Wiggalizer&#38;quot&#59;&#38;gt&#59;&#32;&#38;lt&#59;interceptor&#32;type&#61;&#38;quot&#59;InterfaceInterceptor&#38;quot&#59;&#32;&#47;&#38;gt&#59;&#32;&#38;lt&#59;policyInjection&#32;&#47;&#38;gt&#59;&#32;&#38;lt&#59;&#47;register&#38;gt&#59;&#32;&#38;lt&#59;register&#32;type&#61;&#38;quot&#59;TestService&#38;quot&#59;&#38;gt&#59;&#32;&#38;lt&#59;interceptor&#32;type&#61;&#38;quot&#59;VirtualMethodInterceptor&#38;quot&#59;&#32;&#47;&#38;gt&#59;&#32;&#38;lt&#59;policyInjection&#32;&#47;&#38;gt&#59;&#32;&#38;lt&#59;&#47;register&#38;gt&#59;&#32;&#38;lt&#59;&#47;container&#38;gt&#59;&#32;&#32;&#32;It&#32;appears&#32;that&#32;TestService&#32;has&#32;to&#32;be&#32;resolved&#32;as&#32;an&#32;implementation,&#32;not&#32;an&#32;interface,&#32;so&#32;I&#32;can&#39;t&#32;use&#32;the&#32;same&#32;interceptor&#32;type.&#38;nbsp&#59;&#32;I&#39;ve&#32;defined&#32;aliases&#32;for&#32;the&#32;types&#32;and&#38;nbsp&#59;interface.&#38;nbsp&#59;&#32;The&#32;other&#32;key&#32;part&#32;is&#58;&#32;&#32;&#32;&#38;lt&#59;policyInjection&#38;gt&#59;&#32;&#38;lt&#59;policies&#38;gt&#59;&#32;&#38;lt&#59;add&#32;name&#61;&#38;quot&#59;TracingPolicy&#38;quot&#59;&#38;gt&#59;&#32;&#38;lt&#59;matchingRules&#38;gt&#59;&#32;&#38;lt&#59;add&#32;type&#61;&#38;quot&#59;Microsoft.Practices.EnterpriseLibrary.PolicyInjection.MatchingRules.TypeMatchingRule,&#32;&#32;Microsoft.Practices.EnterpriseLibrary.PolicyInjection,&#32;Version&#61;5.0.414.0,&#32;Culture&#61;neutral,&#32;PublicKeyToken&#61;31bf3856ad364e35&#38;quot&#59;&#32;name&#61;&#38;quot&#59;Type&#32;Matching&#32;Rule&#38;quot&#59;&#38;gt&#59;&#32;&#38;lt&#59;matches&#38;gt&#59;&#32;&#38;lt&#59;add&#32;match&#61;&#38;quot&#59;Wiggalizer&#38;quot&#59;&#32;&#47;&#38;gt&#59;&#32;&#38;lt&#59;&#47;matches&#38;gt&#59;&#32;&#38;lt&#59;&#47;add&#38;gt&#59;&#32;&#38;lt&#59;&#47;matchingRules&#38;gt&#59;&#32;&#38;lt&#59;handlers&#38;gt&#59;&#32;&#38;lt&#59;add&#32;type&#61;&#38;quot&#59;Microsoft.Practices.EnterpriseLibrary.Logging.PolicyInjection.LogCallHandler,&#32;&#32;Microsoft.Practices.EnterpriseLibrary.Logging,&#32;Version&#61;5.0.414.0,&#32;Culture&#61;neutral,&#32;PublicKeyToken&#61;31bf3856ad364e35&#38;quot&#59;&#32;beforeMessage&#61;&#38;quot&#59;BEFORE&#38;quot&#59;&#32;afterMessage&#61;&#38;quot&#59;AFTER&#38;quot&#59;&#32;eventId&#61;&#38;quot&#59;407&#38;quot&#59;&#32;name&#61;&#38;quot&#59;Logging&#32;Call&#32;Handler&#38;quot&#59;&#38;gt&#59;&#32;&#38;lt&#59;categories&#38;gt&#59;&#32;&#38;lt&#59;add&#32;name&#61;&#38;quot&#59;General&#38;quot&#59;&#32;&#47;&#38;gt&#59;&#32;&#38;lt&#59;&#47;categories&#38;gt&#59;&#32;&#38;lt&#59;&#47;add&#38;gt&#59;&#32;&#38;lt&#59;&#47;handlers&#38;gt&#59;&#32;&#38;lt&#59;&#47;add&#38;gt&#59;&#32;&#38;lt&#59;add&#32;name&#61;&#38;quot&#59;TracingPolicy2&#38;quot&#59;&#38;gt&#59;&#32;&#38;lt&#59;matchingRules&#38;gt&#59;&#32;&#38;lt&#59;add&#32;type&#61;&#38;quot&#59;Microsoft.Practices.EnterpriseLibrary.PolicyInjection.MatchingRules.TypeMatchingRule,&#32;&#32;Microsoft.Practices.EnterpriseLibrary.PolicyInjection,&#32;Version&#61;5.0.414.0,&#32;Culture&#61;neutral,&#32;PublicKeyToken&#61;31bf3856ad364e35&#38;quot&#59;&#32;name&#61;&#38;quot&#59;Type&#32;Matching&#32;Rule&#38;quot&#59;&#38;gt&#59;&#32;&#38;lt&#59;matches&#38;gt&#59;&#32;&#38;lt&#59;add&#32;match&#61;&#38;quot&#59;TestService&#38;quot&#59;&#32;&#47;&#38;gt&#59;&#32;&#38;lt&#59;&#47;matches&#38;gt&#59;&#32;&#38;lt&#59;&#47;add&#38;gt&#59;&#32;&#38;lt&#59;&#47;matchingRules&#38;gt&#59;&#32;&#38;lt&#59;handlers&#38;gt&#59;&#32;&#38;lt&#59;add&#32;type&#61;&#38;quot&#59;Microsoft.Practices.EnterpriseLibrary.Logging.PolicyInjection.LogCallHandler,&#32;&#32;Microsoft.Practices.EnterpriseLibrary.Logging,&#32;Version&#61;5.0.414.0,&#32;Culture&#61;neutral,&#32;PublicKeyToken&#61;31bf3856ad364e35&#38;quot&#59;&#32;beforeMessage&#61;&#38;quot&#59;BEFORE2&#38;quot&#59;&#32;afterMessage&#61;&#38;quot&#59;AFTER2&#38;quot&#59;&#32;eventId&#61;&#38;quot&#59;408&#38;quot&#59;&#32;name&#61;&#38;quot&#59;Logging&#32;Call&#32;Handler&#32;2&#38;quot&#59;&#38;gt&#59;&#32;&#38;lt&#59;categories&#38;gt&#59;&#32;&#38;lt&#59;add&#32;name&#61;&#38;quot&#59;General&#38;quot&#59;&#32;&#47;&#38;gt&#59;&#32;&#38;lt&#59;&#47;categories&#38;gt&#59;&#32;&#38;lt&#59;&#47;add&#38;gt&#59;&#32;&#38;lt&#59;&#47;handlers&#38;gt&#59;&#32;&#38;lt&#59;&#47;add&#38;gt&#59;&#32;&#38;lt&#59;&#47;policies&#38;gt&#59;&#32;&#38;lt&#59;&#47;policyInjection&#38;gt&#59;&#32;&#32;&#91;I&#39;ve&#32;wrapped&#32;the&#32;&#38;quot&#59;add&#32;type&#61;&#38;quot&#59;&#32;lines&#32;because&#32;otherwise&#32;it&#32;makes&#32;such&#32;a&#32;pig&#39;s&#32;ear&#32;of&#32;the&#32;display&#32;but&#32;they&#39;re&#32;not&#32;wrapped&#32;in&#32;the&#32;original&#32;file.&#93;&#32;So,&#32;any&#32;idea&#32;why&#32;I&#32;get&#32;3&#32;entries&#32;for&#32;the&#32;WCF&#32;TestService&#32;but&#32;only&#32;1&#32;entry&#32;for&#32;the&#32;Wiggalizer&#32;class&#63;&#32;&#38;nbsp&#59;&#32;&#38;nbsp&#59;&#32;&#38;nbsp&#59;&#32;">
        
<p>With Sarah's help, over on the EntLib project, I've managed to get PolicyInjection working on a Console App.&nbsp; Now I'm trying to get it working on a WCF app.&nbsp; I'm creating an instance of Unity in a ServiceHostFactory so that I can have a single
 instance of it for all calls and I use the container to resolve the TestService class&nbsp;in an IInstanceProvider implementation.&nbsp; The essential part of that is that Unity resolves the TestService class.</p>
<p>When my TestService class is instantiated, unity provides an instance of an implementation of&nbsp;IWiggalizer.&nbsp; GetString() on the service calls GetHome() on the Wiggalizer instance.</p>
<p>I've implemented LogCallHandler policy using the Edit Enterprise Library V5 Configuration plug in to Visual Studio.&nbsp; Initially, I tried a Namespace Matching Rule with a wildcard (as Wiggalizer is in a sub-Namespace).&nbsp; I got three BEFORE messages
 from TestService and one BEFORE from Wiggalizer, then one AFTER from Wiggalizer followed by three AFTER messages from TestService.&nbsp; Strange.</p>
<p>So then I tried two separate policies with Type Matching Rules, one for each class.&nbsp; I've given the Call Handlers different EventIds and Messages for clarity.&nbsp; I'm still getting triple messages from the TestService.</p>
<p>Here are extracts from Web.config:</p>
<div style="color:black; background-color:white">
<pre>    <span style="color:blue">&lt;</span><span style="color:#a31515">container</span><span style="color:blue">&gt;</span>
      <span style="color:blue">&lt;</span><span style="color:#a31515">extension</span> <span style="color:red">type</span><span style="color:blue">=</span><span style="color:black">&quot;</span><span style="color:blue">Interception</span><span style="color:black">&quot;</span><span style="color:blue">/&gt;</span>

      <span style="color:blue">&lt;</span><span style="color:#a31515">register</span> <span style="color:red">type</span><span style="color:blue">=</span><span style="color:black">&quot;</span><span style="color:blue">IWiggalizer</span><span style="color:black">&quot;</span> <span style="color:red">mapTo</span><span style="color:blue">=</span><span style="color:black">&quot;</span><span style="color:blue">Wiggalizer</span><span style="color:black">&quot;</span><span style="color:blue">&gt;</span>
        <span style="color:blue">&lt;</span><span style="color:#a31515">interceptor</span> <span style="color:red">type</span><span style="color:blue">=</span><span style="color:black">&quot;</span><span style="color:blue">InterfaceInterceptor</span><span style="color:black">&quot;</span> <span style="color:blue">/&gt;</span>
        <span style="color:blue">&lt;</span><span style="color:#a31515">policyInjection</span> <span style="color:blue">/&gt;</span>
      <span style="color:blue">&lt;/</span><span style="color:#a31515">register</span><span style="color:blue">&gt;</span>
      
      <span style="color:blue">&lt;</span><span style="color:#a31515">register</span> <span style="color:red">type</span><span style="color:blue">=</span><span style="color:black">&quot;</span><span style="color:blue">TestService</span><span style="color:black">&quot;</span><span style="color:blue">&gt;</span>
        <span style="color:blue">&lt;</span><span style="color:#a31515">interceptor</span> <span style="color:red">type</span><span style="color:blue">=</span><span style="color:black">&quot;</span><span style="color:blue">VirtualMethodInterceptor</span><span style="color:black">&quot;</span> <span style="color:blue">/&gt;</span>
        <span style="color:blue">&lt;</span><span style="color:#a31515">policyInjection</span> <span style="color:blue">/&gt;</span>
      <span style="color:blue">&lt;/</span><span style="color:#a31515">register</span><span style="color:blue">&gt;</span>
    <span style="color:blue">&lt;/</span><span style="color:#a31515">container</span><span style="color:blue">&gt;</span>
</pre>
</div>
<p>It appears that TestService has to be resolved as an implementation, not an interface, so I can't use the same interceptor type.&nbsp; I've defined aliases for the types and&nbsp;interface.&nbsp; The other key part is:</p>
<div style="color:black; background-color:white">
<pre>  <span style="color:blue">&lt;</span><span style="color:#a31515">policyInjection</span><span style="color:blue">&gt;</span>
    <span style="color:blue">&lt;</span><span style="color:#a31515">policies</span><span style="color:blue">&gt;</span>
      <span style="color:blue">&lt;</span><span style="color:#a31515">add</span> <span style="color:red">name</span><span style="color:blue">=</span><span style="color:black">&quot;</span><span style="color:blue">TracingPolicy</span><span style="color:black">&quot;</span><span style="color:blue">&gt;</span>
        <span style="color:blue">&lt;</span><span style="color:#a31515">matchingRules</span><span style="color:blue">&gt;</span>
          <span style="color:blue">&lt;</span><span style="color:#a31515">add</span> <span style="color:red">type</span><span style="color:blue">=</span><span style="color:black">&quot;</span><span style="color:blue">Microsoft.Practices.EnterpriseLibrary.PolicyInjection.MatchingRules.TypeMatchingRule, </span></pre>
<pre><span style="color:blue">Microsoft.Practices.EnterpriseLibrary.PolicyInjection, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35</span><span style="color:black">&quot;</span>
            <span style="color:red">name</span><span style="color:blue">=</span><span style="color:black">&quot;</span><span style="color:blue">Type Matching Rule</span><span style="color:black">&quot;</span><span style="color:blue">&gt;</span>
            <span style="color:blue">&lt;</span><span style="color:#a31515">matches</span><span style="color:blue">&gt;</span>
              <span style="color:blue">&lt;</span><span style="color:#a31515">add</span> <span style="color:red">match</span><span style="color:blue">=</span><span style="color:black">&quot;</span><span style="color:blue">Wiggalizer</span><span style="color:black">&quot;</span> <span style="color:blue">/&gt;</span>
            <span style="color:blue">&lt;/</span><span style="color:#a31515">matches</span><span style="color:blue">&gt;</span>
          <span style="color:blue">&lt;/</span><span style="color:#a31515">add</span><span style="color:blue">&gt;</span>
        <span style="color:blue">&lt;/</span><span style="color:#a31515">matchingRules</span><span style="color:blue">&gt;</span>
        <span style="color:blue">&lt;</span><span style="color:#a31515">handlers</span><span style="color:blue">&gt;</span>
          <span style="color:blue">&lt;</span><span style="color:#a31515">add</span> <span style="color:red">type</span><span style="color:blue">=</span><span style="color:black">&quot;</span><span style="color:blue">Microsoft.Practices.EnterpriseLibrary.Logging.PolicyInjection.LogCallHandler, </span></pre>
<pre><span style="color:blue">Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35</span><span style="color:black">&quot;</span>
            <span style="color:red">beforeMessage</span><span style="color:blue">=</span><span style="color:black">&quot;</span><span style="color:blue">BEFORE</span><span style="color:black">&quot;</span> <span style="color:red">afterMessage</span><span style="color:blue">=</span><span style="color:black">&quot;</span><span style="color:blue">AFTER</span><span style="color:black">&quot;</span> <span style="color:red">eventId</span><span style="color:blue">=</span><span style="color:black">&quot;</span><span style="color:blue">407</span><span style="color:black">&quot;</span> <span style="color:red">name</span><span style="color:blue">=</span><span style="color:black">&quot;</span><span style="color:blue">Logging Call Handler</span><span style="color:black">&quot;</span><span style="color:blue">&gt;</span>
            <span style="color:blue">&lt;</span><span style="color:#a31515">categories</span><span style="color:blue">&gt;</span>
              <span style="color:blue">&lt;</span><span style="color:#a31515">add</span> <span style="color:red">name</span><span style="color:blue">=</span><span style="color:black">&quot;</span><span style="color:blue">General</span><span style="color:black">&quot;</span> <span style="color:blue">/&gt;</span>
            <span style="color:blue">&lt;/</span><span style="color:#a31515">categories</span><span style="color:blue">&gt;</span>
          <span style="color:blue">&lt;/</span><span style="color:#a31515">add</span><span style="color:blue">&gt;</span>
        <span style="color:blue">&lt;/</span><span style="color:#a31515">handlers</span><span style="color:blue">&gt;</span>
      <span style="color:blue">&lt;/</span><span style="color:#a31515">add</span><span style="color:blue">&gt;</span>
      <span style="color:blue">&lt;</span><span style="color:#a31515">add</span> <span style="color:red">name</span><span style="color:blue">=</span><span style="color:black">&quot;</span><span style="color:blue">TracingPolicy2</span><span style="color:black">&quot;</span><span style="color:blue">&gt;</span>
        <span style="color:blue">&lt;</span><span style="color:#a31515">matchingRules</span><span style="color:blue">&gt;</span>
          <span style="color:blue">&lt;</span><span style="color:#a31515">add</span> <span style="color:red">type</span><span style="color:blue">=</span><span style="color:black">&quot;</span><span style="color:blue">Microsoft.Practices.EnterpriseLibrary.PolicyInjection.MatchingRules.TypeMatchingRule, </span></pre>
<pre><span style="color:blue">Microsoft.Practices.EnterpriseLibrary.PolicyInjection, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35</span><span style="color:black">&quot;</span>
            <span style="color:red">name</span><span style="color:blue">=</span><span style="color:black">&quot;</span><span style="color:blue">Type Matching Rule</span><span style="color:black">&quot;</span><span style="color:blue">&gt;</span>
            <span style="color:blue">&lt;</span><span style="color:#a31515">matches</span><span style="color:blue">&gt;</span>
              <span style="color:blue">&lt;</span><span style="color:#a31515">add</span> <span style="color:red">match</span><span style="color:blue">=</span><span style="color:black">&quot;</span><span style="color:blue">TestService</span><span style="color:black">&quot;</span> <span style="color:blue">/&gt;</span>
            <span style="color:blue">&lt;/</span><span style="color:#a31515">matches</span><span style="color:blue">&gt;</span>
          <span style="color:blue">&lt;/</span><span style="color:#a31515">add</span><span style="color:blue">&gt;</span>
        <span style="color:blue">&lt;/</span><span style="color:#a31515">matchingRules</span><span style="color:blue">&gt;</span>
        <span style="color:blue">&lt;</span><span style="color:#a31515">handlers</span><span style="color:blue">&gt;</span>
          <span style="color:blue">&lt;</span><span style="color:#a31515">add</span> <span style="color:red">type</span><span style="color:blue">=</span><span style="color:black">&quot;</span><span style="color:blue">Microsoft.Practices.EnterpriseLibrary.Logging.PolicyInjection.LogCallHandler, </span></pre>
<pre><span style="color:blue">Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35</span><span style="color:black">&quot;</span>
            <span style="color:red">beforeMessage</span><span style="color:blue">=</span><span style="color:black">&quot;</span><span style="color:blue">BEFORE2</span><span style="color:black">&quot;</span> <span style="color:red">afterMessage</span><span style="color:blue">=</span><span style="color:black">&quot;</span><span style="color:blue">AFTER2</span><span style="color:black">&quot;</span> <span style="color:red">eventId</span><span style="color:blue">=</span><span style="color:black">&quot;</span><span style="color:blue">408</span><span style="color:black">&quot;</span>
            <span style="color:red">name</span><span style="color:blue">=</span><span style="color:black">&quot;</span><span style="color:blue">Logging Call Handler 2</span><span style="color:black">&quot;</span><span style="color:blue">&gt;</span>
            <span style="color:blue">&lt;</span><span style="color:#a31515">categories</span><span style="color:blue">&gt;</span>
              <span style="color:blue">&lt;</span><span style="color:#a31515">add</span> <span style="color:red">name</span><span style="color:blue">=</span><span style="color:black">&quot;</span><span style="color:blue">General</span><span style="color:black">&quot;</span> <span style="color:blue">/&gt;</span>
            <span style="color:blue">&lt;/</span><span style="color:#a31515">categories</span><span style="color:blue">&gt;</span>
          <span style="color:blue">&lt;/</span><span style="color:#a31515">add</span><span style="color:blue">&gt;</span>
        <span style="color:blue">&lt;/</span><span style="color:#a31515">handlers</span><span style="color:blue">&gt;</span>
      <span style="color:blue">&lt;/</span><span style="color:#a31515">add</span><span style="color:blue">&gt;</span>
    <span style="color:blue">&lt;/</span><span style="color:#a31515">policies</span><span style="color:blue">&gt;</span>
  <span style="color:blue">&lt;/</span><span style="color:#a31515">policyInjection</span><span style="color:blue">&gt;</span></pre>
</div>
<p>[I've wrapped the &quot;add type=&quot; lines because otherwise it makes such a pig's ear of the display but they're not wrapped in the original file.]</p>
<p>So, any idea why I get 3 entries for the WCF TestService but only 1 entry for the Wiggalizer class?</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>

        
    </td>
    <td style="vertical-align: top; width: 134px;" class="Post ">
        
        <div id="Options_513325" class="Options" >
            
        </div>
        
    </td>
</tr>

        <tr><td colspan="3"><div class="PostSeparator"></div></td></tr>
        

<tr id="PostPanel" class="Post" d:forid="513759">
    <td id="PostDetailsCell_513759" style="vertical-align: top; border: solid #BBB 1px; border-bottom: none; border-left: none; border-top: none; width: 114px" class="Post">
        <div class="Details">
            <a name="post513759"></a>
            <div class="UserName" style="white-space: pre-wrap; word-wrap: break-word;"><a class="UserProfileLink" href="http://www.codeplex.com/site/users/view/ssg31415926">ssg31415926</a></div>
            <div class="UserRole"></div>
            <div style="white-space: normal" class="SubText"><span class="smartDate" title="10/28/2010 5:39:59 AM" LocalTimeTicks="1288269599">Oct 28, 2010 at 5:39 AM</span></div>
            
        </div>
    </td>
    <td id="PostContent_513759" style="width: 100%; vertical-align: top;" 
        class=" discussionPost discussionListContent WordWrapBreakWord Post " 
        data-markdown="&#32;I&#39;ve&#32;posted&#32;the&#32;entire&#32;project&#32;here&#58;&#32;&#32;http&#58;&#47;&#47;cid-22078f9a937627b6.office.live.com&#47;self.aspx&#47;.Public&#47;ConfiguringWCFforSL4withInterception.zip.&#38;nbsp&#59;&#32;The&#32;only&#32;binaries&#32;in&#32;the&#32;zip&#32;are&#32;the&#32;Prism&#32;&#40;for&#32;the&#32;ViewModel&#32;in&#32;the&#32;Silverlight&#32;client&#41;,&#32;EntLib&#32;and&#32;Unity&#32;ones.&#32;It&#32;logs&#32;to&#32;the&#32;standard&#32;EntLib&#32;Logging&#32;database&#32;in&#32;a&#32;local&#32;.&#92;SQLEXPRESS&#32;instance&#32;and&#32;to&#32;the&#38;nbsp&#59;standard&#32;EntLib&#32;event&#32;source&#32;in&#32;Event&#32;Viewer.&#32;It&#32;shows&#32;three&#32;calls&#32;from&#32;the&#32;WCF&#32;service,&#32;before&#32;and&#32;after&#32;and&#32;one&#32;call&#32;from&#32;the&#32;Wiggalizer&#32;call,&#32;before&#32;and&#32;after.&#32;">
        
<p>I've posted the entire project here: <a href="http://cid-22078f9a937627b6.office.live.com/self.aspx/.Public/ConfiguringWCFforSL4withInterception.zip" rel="nofollow">
http://cid-22078f9a937627b6.office.live.com/self.aspx/.Public/ConfiguringWCFforSL4withInterception.zip</a>.&nbsp; The only binaries in the zip are the Prism (for the ViewModel in the Silverlight client), EntLib and Unity ones.</p>
<p>It logs to the standard EntLib Logging database in a local .\SQLEXPRESS instance and to the&nbsp;standard EntLib event source in Event Viewer.</p>
<p>It shows three calls from the WCF service, before and after and one call from the Wiggalizer call, before and after.</p>

        
    </td>
    <td style="vertical-align: top; width: 134px;" class="Post ">
        
        <div id="Options_513759" class="Options" >
            
        </div>
        
    </td>
</tr>

        <tr><td colspan="3"><div class="PostSeparator"></div></td></tr>
        

<tr id="PostPanel" class="Post" d:forid="514346">
    <td id="PostDetailsCell_514346" style="vertical-align: top; border: solid #BBB 1px; border-bottom: none; border-left: none; border-top: none; width: 114px" class="Post">
        <div class="Details">
            <a name="post514346"></a>
            <div class="UserName" style="white-space: pre-wrap; word-wrap: break-word;"><a class="UserProfileLink" href="http://www.codeplex.com/site/users/view/AvanadeSupport">AvanadeSupport</a></div>
            <div class="UserRole"></div>
            <div style="white-space: normal" class="SubText"><span class="smartDate" title="10/29/2010 3:37:48 AM" LocalTimeTicks="1288348668">Oct 29, 2010 at 3:37 AM</span></div>
            
        </div>
    </td>
    <td id="PostContent_514346" style="width: 100%; vertical-align: top;" 
        class=" discussionPost discussionListContent WordWrapBreakWord Post " 
        data-markdown="&#32;Remove&#32;the&#32;addition&#32;of&#32;the&#32;Interception&#32;extension&#32;in&#32;the&#32;config&#32;file&#32;and&#38;nbsp&#59;in&#32;the&#32;UnityServiceHostFactory.CreateSingleInstanceOfContainerForAllUnityServiceHostFactories.&#38;nbsp&#59;&#32;The&#32;EnterpriseLibraryCoreExtension&#32;automatically&#32;adds&#32;it.&#38;nbsp&#59;&#32;Here&#39;s&#32;a&#32;related&#32;thread&#32;discussion&#32;in&#32;the&#32;Entlib&#32;forum.&#32;&#38;nbsp&#59;&#32;Sarah&#32;Urmeneta&#32;Global&#32;Technology&#32;and&#32;Solutions&#32;Avanade,&#32;Inc.&#32;entlib.support&#64;avanade.com&#32;">
        
<p>Remove the addition of the Interception extension in the config file and&nbsp;in the UnityServiceHostFactory.CreateSingleInstanceOfContainerForAllUnityServiceHostFactories.&nbsp; The EnterpriseLibraryCoreExtension automatically adds it.&nbsp; Here's a related
<a href="http://entlib.codeplex.com/Thread/View.aspx?ThreadId=224790" rel="nofollow">thread</a> discussion in the Entlib forum.</p>
<p>&nbsp;</p>
<p><strong><em><span style="color:#30332d; font-size:9.5pt">Sarah Urmeneta</span></em></strong><span style="color:#30332d; font-size:9.5pt"><br>
Global Technology and Solutions<br>
Avanade, Inc.<br>
</span><a href="mailto:entlib.support@avanade.com" rel="nofollow"><span style="color:#3e62a6; font-size:9.5pt">entlib.support@avanade.com</span></a></p>

        
    </td>
    <td style="vertical-align: top; width: 134px;" class="Post ">
        
        <div id="Options_514346" class="Options" >
            
        </div>
        
    </td>
</tr>

        <tr><td colspan="3"><div class="PostSeparator"></div></td></tr>
        

<tr id="PostPanel" class="Post" d:forid="514387">
    <td id="PostDetailsCell_514387" style="vertical-align: top; border: solid #BBB 1px; border-bottom: none; border-left: none; border-top: none; width: 114px" class="Post">
        <div class="Details">
            <a name="post514387"></a>
            <div class="UserName" style="white-space: pre-wrap; word-wrap: break-word;"><a class="UserProfileLink" href="http://www.codeplex.com/site/users/view/ssg31415926">ssg31415926</a></div>
            <div class="UserRole"></div>
            <div style="white-space: normal" class="SubText"><span class="smartDate" title="10/29/2010 6:42:49 AM" LocalTimeTicks="1288359769">Oct 29, 2010 at 6:42 AM</span></div>
            
            <div style="white-space: normal" class="SubText" id="UpdatedDiv">Edited <span class="smartDate" title="10/29/2010 6:43:13 AM" LocalTimeTicks="1288359793">Oct 29, 2010 at 6:43 AM</span></div>
            
        </div>
    </td>
    <td id="PostContent_514387" style="width: 100%; vertical-align: top;" 
        class=" discussionPost discussionListContent WordWrapBreakWord Post " 
        data-markdown="&#32;Ah.&#38;nbsp&#59;&#32;I&#32;searched&#32;in&#32;this&#32;forum&#32;for&#32;&#39;double&#39;&#32;and&#32;&#39;triple&#39;&#32;but&#32;didn&#39;t&#32;find&#32;anything&#32;relevant&#32;&#40;apart&#32;from&#32;the&#32;one&#32;who&#32;fixed&#32;it&#32;by&#32;recreating&#32;his&#32;config&#32;file,&#32;which&#32;didn&#39;t&#32;work&#32;for&#32;me&#32;because&#32;I&#32;just&#32;reintroduced&#32;the&#32;errors&#41;.&#32;Thank&#32;you,&#32;once&#32;again,&#32;Sarah,&#32;for&#32;fixing&#32;my&#32;problem.&#38;nbsp&#59;&#32;Now,&#32;how&#32;are&#32;you&#32;with&#32;decorating&#63;&#38;nbsp&#59;&#32;I&#39;ve&#32;got&#32;this&#32;odd&#32;set&#32;of&#32;corners&#32;and&#32;I&#32;just&#32;can&#39;t&#32;work&#32;out&#32;how&#32;to&#32;get&#32;the&#32;wallpaper&#32;in&#32;there.&#38;nbsp&#59;&#32;&#58;-&#41;&#32;">
        
<p>Ah.&nbsp; I searched in <strong>this</strong> forum for 'double' and 'triple' but didn't find anything relevant (apart from the one who fixed it by recreating his config file, which didn't work for me because I just reintroduced the errors).</p>
<p>Thank you, once again, Sarah, for fixing my problem.&nbsp; Now, how are you with decorating?&nbsp; I've got this odd set of corners and I just can't work out how to get the wallpaper in there.&nbsp; :-)</p>

        
    </td>
    <td style="vertical-align: top; width: 134px;" class="Post ">
        
        <div id="Options_514387" class="Options" >
            
        </div>
        
    </td>
</tr>

        <tr><td colspan="3"><div class="PostSeparator"></div></td></tr>
        

<tr id="PostPanel" class="Post" d:forid="514389">
    <td id="PostDetailsCell_514389" style="vertical-align: top; border: solid #BBB 1px; border-bottom: none; border-left: none; border-top: none; width: 114px" class="Post">
        <div class="Details">
            <a name="post514389"></a>
            <div class="UserName" style="white-space: pre-wrap; word-wrap: break-word;"><a class="UserProfileLink" href="http://www.codeplex.com/site/users/view/AvanadeSupport">AvanadeSupport</a></div>
            <div class="UserRole"></div>
            <div style="white-space: normal" class="SubText"><span class="smartDate" title="10/29/2010 6:54:04 AM" LocalTimeTicks="1288360444">Oct 29, 2010 at 6:54 AM</span></div>
            
        </div>
    </td>
    <td id="PostContent_514389" style="width: 100%; vertical-align: top;" 
        class=" discussionPost discussionListContent WordWrapBreakWord Post " 
        data-markdown="&#32;You&#39;re&#32;welcome,&#32;glad&#32;to&#32;be&#32;of&#32;help.&#38;nbsp&#59;&#32;No,&#32;I&#39;m&#32;not&#32;good&#32;at&#32;that&#32;&#58;&#41;&#32;">
        
<p>You're welcome, glad to be of help.&nbsp; No, I'm not good at that :)</p>

        
    </td>
    <td style="vertical-align: top; width: 134px;" class="Post ">
        
        <div id="Options_514389" class="Options" >
            
        </div>
        
    </td>
</tr>

</table>
    </div>

    
        <div class="StandardMarginTop">
            <a id="SignInToAddCommentLink" href="https://www.codeplex.com/site/login?RedirectUrl=http%3a%2f%2funity.codeplex.com%2fdiscussions%2f232504">
                Sign in to post message or set email notifications
            </a>
        </div>
    


    <div id="PostEditorContainer">
        <a name="editor"></a>
        <div id="Editor" style="display: none;">
            

<div class="MarkdownEditor" data-options-id="d51e8963-96f8-45c5-87be-c7a215766247">
    <script class="options" defer="defer" id="d51e8963-96f8-45c5-87be-c7a215766247" type="application/json">{"maxLength":10000,"styleSheetLocation":""}</script>

    <div class="MarkdownEditorControls">
        <a href="#" tabindex="-1" class="control md_help" title="Markdown Syntax Guide"></a>
        <div class="control md_divider"></div>
        <a href="#" tabindex="-1" class="control md_header" title="Insert Header (CTRL + H)"></a>
        <a href="#" tabindex="-1" class="control md_code" title="Insert Code (CTRL + K)"></a>
        <a href="#" tabindex="-1" class="control md_quote" title="Insert Quote (CTRL + Q)"></a>
        <a href="#" tabindex="-1" class="control md_img" title="Insert Img (CTRL + G)"></a>
        <a href="#" tabindex="-1" class="control md_link" title="Insert Link (CTRL + L)"></a>
        <a href="#" tabindex="-1" class="control md_ulist" title="Unordered List (CTRL + U)"></a>
        <a href="#" tabindex="-1" class="control md_olist" title="Ordered List (CTRL + O)"></a>
        <a href="#" tabindex="-1" class="control md_italics" title="Italic Text (CTRL + I)"></a>
        <a href="#" tabindex="-1" class="control md_bold" title="Bold Text (CTRL + B)"></a>
    </div>

    

<div class="tab_control">
    <!-- Generate the basic HTML for the tabs. -->
    
        <div id="Compose"
              class="tab selected"
              data-custom-header-id=""
              data-tab-contents-id="compose_contents_bf0215aa-05d0-4cdf-aa60-3765225eb5ad">
            Compose
        </div>
    
        <div id="Preview"
              class="tab "
              data-custom-header-id=""
              data-tab-contents-id="preview_contents_791e6121-9c2b-438d-84c4-bb1d9db9c518">
            Preview
        </div>
    
    <div class="clear"></div>
</div>


    <div id="compose_contents_bf0215aa-05d0-4cdf-aa60-3765225eb5ad" class="compose_tab_content">
        <textarea class=" MarkdownEditorDimensions" cols="20" id="MarkdownEditor" name="content" rows="2">
</textarea>
        <div class="ClearBoth"></div>

        <div class="markdownGuide" style="display: none">
            <table>
                <tr>
                    <td class="markdownGuideColumn">
                        <h1>Text Formatting</h1>
                        <div># Header 1</div>
                        <div>## Header 2</div>
                        <br />
                        <div>*italics* (or _italics_)</div>
                        <div>**bold** (or __bold__)</div>
                    </td>
                    <td class="markdownGuideColumn">
                        <h1>Lists</h1>
                        <div>* Unordered List</div>
                        <div>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp * SubItem</div>
                        <br />
                        <div>1. Ordered List</div>
                        <div>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp 1. SubItem</div>
                    </td>
                    <td class="markdownGuideColumn">
                        <h1>Quotes</h1>
                        <div>> Lorem ipsum</div>
                        <div>dolor sitamet </div>
                        <div>non. Lectus at</div>
                        <div>nam nunc...</div>
                    </td>
                    <td class="markdownGuideColumn">
                        <h1>Code</h1>
                        <div>`Inline Code`</div>
                        <br />
                        <div>``` C#</div>
                        <div>if (foo==bar)</div>
                        <div>&nbsp&nbsp&nbsp&nbsp&nbsp&nbspbar++</div>
                        <div>```</div>
                    </td>
                    <td class="markdownGuideColumn">
                        <h1>References</h1>
                        <div>[Link Text](URL)</div>
                        <br />
                        <div>![Image](URL)</div>
                        <br />
                        <a class="Reference" target="_blank" href="http://codeplex.codeplex.com/wikipage?title=Markdown&referringTitle=Documentation">Markdown Reference</a>
                    </td>
                </tr>
            </table>
        </div>
    </div>
    <div id="preview_contents_791e6121-9c2b-438d-84c4-bb1d9db9c518" class="preview_tab_content markDownOutput">
        
            <div></div>
        
    </div>
    <div class="clear"></div>
</div>

            
            <div class="row" id="recaptcha_row">
                
<script type="text/javascript">
    $(document).ready(function () {
        $('#recaptcha_reload').attr('src', '../assets/recaptcha_refresh.png');
        $('#recaptcha_switch_audio').attr('src', '../assets/recaptcha_audio.png');
        $('#recaptcha_switch_img').attr('src', '../assets/recaptcha_text.png');
        $('#recaptcha_whatsthis').attr('src', '../assets/recaptcha_help.png');
        $('#recaptcha_area tr:first').attr('height', '35');
    });
</script>

                <div class="clear"></div>
                <span id="ReCaptchaError"></span>
            </div>
            <div style="padding-top: 6px;">
                <input type="button" id="SaveButton" value="Save" class="ok" />
                <input type="button" id="CancelButton" value="Cancel" class="cancel" />
                <div class="clear"></div>
            </div>
        </div>
    </div>
</div>

<div id="DeletePostPanel" class="modal" style="display:none">
    <div class="row">
        <h2>Delete Post <a href="javascript:return false;" class="close">X</a></h2>
    </div>
    <div class="modal_info">
        <p>Are you sure you want to delete this post? You will not be able to recover it later.</p>
        <p class="modal_buttons">
            <input type="button" id="ClosePostCancel" value="Cancel" class="cancel" />
            <input type="button" id="ClosePostOk" value="Delete" class="ok" />
        </p>
        <div class="ClearBoth"></div>
    </div>
</div>
        
            <!-- Email notification / Subscription details -->
            
    </div>
</div>
    
<div id="DeleteThreadPanel" class="modal" style="display:none">
    <div class="row">
        <h2>Delete Thread <a href="javascript:return false;" class="close">X</a></h2>
    </div>
    <div class="modal_info">
        <p>Are you sure you want to delete this thread? You will not be able to recover it later.</p>
        <p class="modal_buttons">
            <input type="button" id="CloseThreadCancel" value="Cancel" class="cancel" />
            <input type="button" id="CloseThreadOk" value="Delete" class="ok" />
        </p>
        <div class="ClearBoth"></div>
    </div>
</div>

<script type="text/javascript" language="javascript">
    $(function () {

        $('#recaptcha_response_field')
            .bind('keypress', function (event) { return $submitKeyPressElement(this, event); });


        if ($('#DeleteThreadLink')) {
            $('#DeleteThreadLink').click(function () {
                OpenDialog('#DeleteThreadPanel', true, '41em');
            });
        }
        
        $('#DeleteThreadPanel #CloseThreadOk').click(function () {
            var url = 'http://unity.codeplex.com/discussions/232504';
            $.ajax({
                url: url,
                type: 'DELETE',
                success: function (x) {
                    location.href = x.RedirectUrl;
                }
            });
        });
    });

    workItemMention = new codeplex.ui.WorkItemMention();
    workItemMention.addLinks(".discussionPost");
</script>


        
        
                
                <div class="clear"></div>
                
                <div id="footer">
                    <div class="row">
                        <hr />
                        <ul>
                            <li>Â© 2006-2017 Microsoft</li>
                            <li><a href="http://www.codeplex.com/site/help">Get Help</a></li>
                            <li><a href="/site/legal/privacy">Privacy Statement</a></li>
                            <li><a href="http://www.codeplex.com/site/legal/terms">Terms of Use</a></li>
                            <li><a href="http://www.codeplex.com/site/legal/conduct">Code of Conduct</a></li>
                            <li><a href="http://developermedia.com/" target="_blank">Advertise With Us</a></li>
                            <li>Version 2017.10.3.21062</li>
                        </ul>
                    </div>
                </div>
            </div>
        </form>
    </body>

</html>