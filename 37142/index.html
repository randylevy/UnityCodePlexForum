

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" class="" prefix="og: http://ogp.me/ns# profile: http://ogp.me/ns/profile#">
    
    
    
    

    
    <head>
        <meta id="CompatabilityMode" http-equiv="X-UA-Compatible" content="IE=edge" />
	    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link href="../assets/StyleSheet.css" id="MasterCss" rel="stylesheet" type="text/css" />
        <link rel="SHORTCUT ICON" href="../assets/favicon.ico" />
        <title>patterns &#38; practices - Unity - Property vs. Constructor vs. Explicit Dependency Injection</title>
        
       
                    <script src="../assets/mscc-0.3.6.min.js"></script>
        
                    <link rel="stylesheet" type="text/css" href="../assets/mscc-0.3.6.min.css" />
        
            <script type="text/javascript">
                var msccHadCookieBannerAtPageStart = true;
            </script>
        

        <!--
        Third party scripts and code linked to or referenced from this website are licensed to you by the parties that own such code,
        not by Microsoft.  See ASP.NET Ajax CDN Terms of Use â€“ http://www.asp.net/ajaxlibrary/CDN.ashx.
        -->
        <script src="https://ajax.aspnetcdn.com/ajax/jquery/jquery-1.4.4.min.js" type="text/javascript"></script>
        
        <script type="text/javascript">
            if (typeof jQuery === 'undefined') {
                document.write(unescape("%3Cscript src='https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js' type='text/javascript'%3E%3C/script%3E"));
            }
        </script>

        <script src="https://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.6/jquery-ui.min.js" type="text/javascript"></script>
        
        <script type="text/javascript">
            if (typeof jQuery.ui === 'undefined') {
                document.write(unescape("%3Cscript src='https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.6/jquery-ui.min.js' type='text/javascript'%3E%3C/script%3E"));
            }
        </script>

        
    <style type="text/css">.SideBar, .SideBarPadding{display:none;}.MainContent{width:auto;}.SiteContentTable{width:100%;}</style>
    <style id="ProjectStyles" type="text/css">
        .SiteHeader, .SiteHeaderLeft {
            height:45px !important;
            overflow:hidden;
        }
        .SiteContent 
        {
            padding: 0 0 1em 0;
            margin-top:0;
            min-height:225px;
            border-right: 1px solid lightgrey;
            border-left: 1px solid lightgrey;
            border-bottom: 1px solid lightgrey;
        }
        .IE table.MinWidthContent
        {
	        table-layout: auto !important;	
        }
    </style>
    
    
    <meta name="ROBOTS" content="NOINDEX, NOFOLLOW">

    
    
    <meta id="WTProjectName" name="WT.pi" content="unity"/>
    

    <link rel="EditURI" type="application/rsd+xml" title="RSD" href='http://unity.codeplex.com/rsd' />
    <link rel="wlwmanifest" type="application/wlwmanifest+xml" title="WLWManifest" href='/wlwmanifest.xml' />
    
    
        <link rel="alternate" type="application/rss+xml" title="patterns&#32;&#38;&#32;practices&#32;-&#32;Unity" url="http://unity.codeplex.com/project/feeds/rss"/>
    
        
        <link rel="alternate" type="application/rss+xml" title="patterns&#32;&#38;&#32;practices&#32;-&#32;Unity&#32;-&#32;Discussions" url="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fforum%2funity"/>
        
        <link rel="alternate" type="application/rss+xml" title="patterns&#32;&#38;&#32;practices&#32;-&#32;Unity&#32;-&#32;Issues" url="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fworkitem%2funity"/>
        
        <link rel="alternate" type="application/rss+xml" title="patterns&#32;&#38;&#32;practices&#32;-&#32;Unity&#32;-&#32;Downloads" url="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2frelease%2funity"/>
        <link rel="alternate" type="application/rss+xml" title="patterns&#32;&#38;&#32;practices&#32;-&#32;Unity&#32;-&#32;Reviews" url="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2freview%2funity"/>
        
    
        <link rel="alternate" type="application/rss+xml" title="patterns&#32;&#38;&#32;practices&#32;-&#32;Unity&#32;-&#32;Source&#32;code" url="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fsourcecontrol%2funity"/>
        <link rel="alternate" type="application/rss+xml" title="patterns&#32;&#38;&#32;practices&#32;-&#32;Unity&#32;-&#32;Wiki" url="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fwiki%2funity"/>
    
        
    
        <meta content="summary" name="twitter:card" /><meta content="@CodePlex" name="twitter:site" /><meta content="http://unity.codeplex.com/discussions/37142?ProjectName=unity" name="twitter:url" /><meta content="patterns &amp;#38; practices - Unity" name="twitter:title" /><meta content="The Unity Application Block &amp;#40;Unity&amp;#41; is officially under new ownership.&amp;#13;&amp;#10;https&amp;#58;&amp;#47;&amp;#47;github.com&amp;#47;unitycontainer&amp;#47;unity" name="twitter:description" /><meta content="http://www.codeplex.com/Images/codeplex.png" name="twitter:image" /><meta content="CodePlex" property="og:site_name" /><meta content="http://unity.codeplex.com/discussions/37142?ProjectName=unity" property="og:url" /><meta content="object" property="og:type" /><meta content="patterns &amp;#38; practices - Unity" property="og:title" /><meta content="The Unity Application Block &amp;#40;Unity&amp;#41; is officially under new ownership.&amp;#13;&amp;#10;https&amp;#58;&amp;#47;&amp;#47;github.com&amp;#47;unitycontainer&amp;#47;unity" property="og:description" /><meta content="http://www.codeplex.com/Images/codeplex.png" property="og:image" />
        

    </head>
    
    <body>
         
            
        <script src="../assets/ScriptLoader.js" type="text/javascript"></script>
        <form id="aspnetForm" autocomplete="off" method="POST" enctype="multipart/form-data">
            <input name="__RequestVerificationToken" type="hidden" value="lOtaPZJUlwCsk_3A0jvHmA-oVjh4m4XHcC7TrMjqb_TtOuFJL2r61yxQttfaQ_KkJFFtWagPKed8_m80gSUPeHvvo1T1rIyoiVbawEtmziCxEoJGwRGR9DtxXcggAnrEv3B3HA2" /><input name="__RequestVerificationToken2" type="hidden" value="__RequestVerificationToken239880d09-33e0-4111-9bdb-a2bc54f5099d" />
            
            <div id="UpdateProgressPanel" class="loading_animation" style="display:none;">
                <div class="row">
                    <h2 class="anim_h2">
                        <span id="UpdateProgressText">Updating...</span>
                        <span id="animatedLoadingIconContainer">
                            <img id="animatedLoadingIcon" src="../assets/loading_animation.gif" class="anim_img"/>
                        </span>
                    </h2>
                </div>
            </div>
            
            <div style="display:none;">
                
                <img id="BlankImage" style="width:0;height:0;" src="../assets/blank.png" onload="self.logoImageLoaded=true;"/>

                <script language="javascript" type="text/javascript">
                    var date = new Date();
                    var timezoneOffset = date.getTimezoneOffset() / 60 * -1;
                    var timezoneOffsetCookie = getCookie("TimezoneOffset");
                    var firstTimeSetTimezoneCookie = false;

                    if (timezoneOffsetCookie == null || timezoneOffsetCookie != timezoneOffset) {
                        firstTimeSetTimezoneCookie = true;
                        document.cookie = "TimezoneOffset=" + timezoneOffset + '; domain=.codeplex.com;expires=Wed, 10 Oct 2018 05:28:48 UTC';
                    }
                </script>
            </div>
            
            
            <div id="banner">
                <div id="message"><strong>This is an archived copy of the original CodePlex Unity Discussion Forum</strong><br />Unity is now on <a href="https://github.com/unitycontainer/">GitHub</a>
                    
                </div>
            </div>
            

            <div id="header">
                <div id="header_wrap" class="row">
                    <p id="logo"><a href="http://www.codeplex.com">Code<span class="semi">Plex</span></a><span id="tagline">Project Hosting for Open Source Software</span></p>
                    

<ul id="nav">

    <li><a href="/site/register/new" id="registerLink" class="ZoomFix">Register</a></li>
    <li ><a class="SignInLink" href="https://www.codeplex.com/site/login?RedirectUrl=http%3a%2f%2funity.codeplex.com%2fdiscussions%2f37142" id="signInLink">Sign In</a></li>
  
    <li class="last"><a class="rss_site_icon" href="http://www.codeplex.com/site/feeds/rss" type="application/rss+xml" rel="Alternate" title="CodePlex Site Activity"></a></li>
</ul>
                    <input id="searchsite" name="searchsite" maxlength="500" type="text" value="" /><span id="search_mag"><a id="submitSearch" name="submitSearch" class="magnify" title="Search" href="#"></a></span>
                    <script>
	$(document).ready(function() {
    var searchButton = $('#submitSearch'),
        searchBar = $('#searchsite');

    // Register our own handler for the search event while we wait for the SearchBox script to load.
    searchButton.bind('click.backupSearchBox', doProjectSearch);
    searchBar.bind('keypress.backupSearchBox', function(e) { if ($keyCode(e) === 13) { doProjectSearch(); return false; } });

    function cleanupSearchEvents() {
        // If the SearchBox was loaded, unregister our handlers.
        if (epx_loaded) {
            searchButton.unbind('.backupSearchBox');
            searchBar.unbind('.backupSearchBox');
        }
    }

    $loadScript('https://i4.services.social.microsoft.com/search/Widgets/SearchBox.jss?appid=1000&scopeid=1&boxId=searchsite&btnId=submitSearch&watermark=Search%20all%20projects&overrideWatermark=true&searchLocation=https%3A%2F%2Fwww.codeplex.com%2Fsite%2Fsearch&allowEmptySearch=true&focusOnInit=False&minimumTermLength=3', cleanupSearchEvents);
})
function doProjectSearch() {
    
    var url = 'https://www.codeplex.com/site/search';

    //If search term is not same as watermark
    if($('#searchsite').val() != 'Search all projects')    
    {        
        url = url + '?query=' + encodeURIComponent($('#searchsite').val());
    }

    
    var callback = '';
    if (callback.length > 0 && eval('typeof ' + callback) != 'undefined')
        url += eval(callback + '()');

    window.location.href = url;
    return false;
}
</script>
                </div>
            </div>
            
            <div id="wrap">
                
    <div id="sub_heading" class="row">
        
        <div id="ProjectHeader">
            <div id="project_title_row" class="row">
                <div id="project_logo">
                    
<a id="AffiliateLink" href="http://msdn.microsoft.com/practices">
    <img id="AffiliateImage" src="../assets/pnp_logo.png" title="patterns&#32;&#38;&#32;practices" />
</a>

    
    <h1 class="text_only"><a href="http://unity.codeplex.com/" id="ProjectTitle1"><div>patterns &#38; practices - Unity</div></a></h1>

                </div>
            </div>
        </div>
        
        <div id="ProjectDetailsDiv">
            
        </div>
		<div class="clear"></div>
        

<ul id="page_box_links">
	<li id="homeTabCell" style="width: 63px;"><a id="homeTab" href="http://unity.codeplex.com/" class="box_home">home</a><div></div></li>
    
	<li id="sourceTabCell" style="width:113px;"><a id="sourceTab" href="http://unity.codeplex.com/SourceControl/latest" class="box_source">source code</a><div></div></li>
    
	<li id="releasesTabCell" style="width:105px;"><a id="releasesTab" href="http://unity.codeplex.com/releases" class="box_downloads">downloads</a><div></div></li>
    
    <li id="documentationTabCell" style="width:143px;"><a id="documentationTab" href="http://unity.codeplex.com/documentation" class="box_documentation">documentation</a><div></div></li>
    
	<li id="discussionTabCell" style="width:112px;"><a id="discussionTab" href="../index.html" class="discussions_active">discussions</a><div></div></li>
    
	<li id="workItemsTabCell" style="width:70px;"><a id="workItemsTab" href="http://unity.codeplex.com/workitem/list/basic" class="box_issue">issues</a><div></div></li>
    
	<li id="peopleTabCell" style="width:70px;"><a id="peopleTab" href="http://unity.codeplex.com/team/view" class="box_people">people</a><div></div></li>
	<li id="licenseTabCell" style="width:70px;"><a id="licenseTab" href="http://unity.codeplex.com/license" class="box_license">license</a><div></div></li>
    
    <span class="stretch"></span>
</ul>

<script type="text/javascript">
    $(document).ready(function () {
        $('#page_box_links').applyLastClassToList();
    });
</script>
		    <div class="clear"></div>
            
     <td>
       

<div>
    
    <div id="actionBar" class="action_bar">
        <ul id="actionBar_ul" class="actionBar_sublinks subtab_right" style="vertical-align: middle;">

            

                <li id="li_actionbar_creatediscussion" data-action-id="actionbar_creatediscussion" data-action-type="Navigate" class="actionBar_sublinks" data-options-id="7d60ab71-2b79-42f6-8f3e-a3b43222273a">
                
                    <script class="options" defer="defer" id="7d60ab71-2b79-42f6-8f3e-a3b43222273a" type="application/json">{"navigate-url":"http://unity.codeplex.com/discussions/create"}</script> 
                    
                    <div class="actionBar_custom_content"></div>

                    <a href="#" id="actionbar_creatediscussion" title="Start a New Thread" class="action_bar_item_link">
                        <img id="img_actionbar_creatediscussion" class="action_bar_item_image" src="../assets/actionbar_newitem.png" style="vertical-align: middle" />
                        New Thread
                    </a>

                </li>

            

                <li id="li_actionbar_subscribe" data-action-id="actionbar_subscribe" data-action-type="PopUp" class="actionBar_sublinks" data-options-id="09a2c0d1-3c31-42ec-a139-760d81c8eea3">
                
                    <script class="options" defer="defer" id="09a2c0d1-3c31-42ec-a139-760d81c8eea3" type="application/json">{}</script> 
                    
                    <div class="actionBar_custom_content">

<div id="rssHoverDiv" class="HoverPanel LeftHoverWidth" style="display: none">
        <ul id="3_FeedsPanel" class="RssFeedsPanel">
            <li>
                <a id="ProjectRssLink" href="http://unity.codeplex.com/project/feeds/rss" class="ArrowSmall NoUnderline">All Project Updates</a>
            </li>
            
            <li>
                <a id="DiscussionRssLink" href="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fforum%2funity" class="ArrowSmall NoUnderline">Discussions</a>
            </li>
            
            <li>
                <a id="IssueTrackerRssLink" href="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fworkitem%2funity" class="ArrowSmall NoUnderline">Issue Tracker</a>
            </li>
            
            <li>
                <a id="ReleasesRssLink" href="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2frelease%2funity" class="ArrowSmall NoUnderline">Downloads</a>
            </li>
            <li>
                <a id="ReviewsRssLink" href="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2freview%2funity" class="ArrowSmall NoUnderline">Reviews</a>
            </li>
            
            <li>
                <a id="SourceControlRssLink" href="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fsourcecontrol%2funity" class="ArrowSmall NoUnderline">Source Code</a>
            </li>
            <li>
                <a id="WikiRssLink" href="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fwiki%2funity" class="ArrowSmall NoUnderline">Wiki &amp; Documentation</a>
            </li>
        </ul>
</div></div>

                    <a href="#" id="actionbar_subscribe" title="Subscribe to project updates in RSS feeds." class="action_bar_item_link">
                        <img id="img_actionbar_subscribe" class="action_bar_item_image" src="../assets/actionbar_subscribe.png" style="vertical-align: middle" />
                        Subscribe
                    </a>

                </li>

            
        </ul>
    </div>
</div>
     </td>

        

    </div>
    
    
<div class="Threads">
    <div class="ViewThread">
        
        
        
            <h1 class="page_title WordWrapBreakWord">
                Property vs. Constructor vs. Explicit Dependency Injection
            </h1>

            <!-- Private Discussion header -->
            

            <!-- Posts List Header: Topics and Wiki Link -->
            <table class="PostsListHeader">
                <tr>
                    <td>
                     
                    </td>
                    <td>
                        <div class="WikiLink">
                            <span title="Paste this into a wiki page to link to this discussion">
                                Wiki Link: [discussion:37142]
                            </span>
                        </div>
                    </td>
                </tr>
            </table>

            <!-- The list of posts -->
            

<div id="discussionsPostList" data-options-id="38853ad1-d0f0-4f1c-9c58-599950caaafe">
    <script class="options" defer="defer" id="38853ad1-d0f0-4f1c-9c58-599950caaafe" type="application/json">{"threadUrl":"http://unity.codeplex.com/discussions/37142","showEditor":false,"checkImageUrl":"../assets/check_answer.png"}</script>

    <div class="Posts" style="margin-top: 10px;">
    

<table cellpadding="0" cellspacing="0" style="width: 100%; margin-bottom: 0px; table-layout:fixed">
    

<tr id="PostPanel" class="Post" d:forid="123230">
    <td id="PostDetailsCell_123230" style="vertical-align: top; border: solid #BBB 1px; border-bottom: none; border-left: none; border-top: none; width: 114px" class="Post">
        <div class="Details">
            <a name="post123230"></a>
            <div class="UserName" style="white-space: pre-wrap; word-wrap: break-word;"><a class="UserProfileLink" href="http://www.codeplex.com/site/users/view/Lefty">Lefty</a></div>
            <div class="UserRole"></div>
            <div style="white-space: normal" class="SubText"><span class="smartDate" title="10/6/2008 5:32:24 PM" LocalTimeTicks="1223339544">Oct 6, 2008 at 5:32 PM</span></div>
            
        </div>
    </td>
    <td id="PostContent_123230" style="width: 100%; vertical-align: top;" 
        class=" discussionPost discussionListContent WordWrapBreakWord Post " 
        data-markdown="New&#32;to&#32;Unity&#32;and&#32;trying&#32;to&#32;get&#32;my&#32;head&#32;around&#32;it.&#38;nbsp&#59;&#32;As&#32;I&#32;understand&#32;it,&#32;there&#32;are&#32;3&#32;basic&#32;ways&#32;to&#32;enable&#32;dependency&#32;injection,&#32;via&#32;a&#32;Property&#32;for&#32;a&#32;dependent&#32;object,&#32;add&#32;the&#32;dependent&#32;object&#32;to&#32;the&#32;constructor&#32;of&#32;the&#32;parent&#32;object,&#32;or&#32;explicitly&#32;call&#32;the&#32;container.Resolve&#32;method.&#32;&#32;I&#39;m&#32;curious&#32;about&#32;best&#32;practices&#32;for&#32;each&#32;type...&#32;are&#32;they&#32;all&#32;equivalent&#63;&#32;&#32;&#32;For&#32;instance,&#32;choosing&#32;to&#32;use&#32;the&#32;Constructor&#32;method&#32;over&#32;choosing&#32;to&#32;use&#32;container.Resolve&#32;primarily&#32;saves&#32;writing&#32;some&#32;code.&#38;nbsp&#59;&#32;Are&#32;there&#32;any&#32;other&#32;reasons&#32;one&#32;would&#32;choose&#32;one&#32;of&#32;these&#32;DI&#32;methods&#32;over&#32;another&#63;&#32;&#32;Thx&#32;&#32;">
        New to Unity and trying to get my head around it.&nbsp; As I understand it, there are 3 basic ways to enable dependency injection, via a Property for a dependent object, add the dependent object to the constructor of the parent object, or explicitly call
 the container.Resolve method.<br>
<br>
I'm curious about best practices for each type... are they all equivalent? <br>
<br>
For instance, choosing to use the Constructor method over choosing to use container.Resolve primarily saves writing some code.&nbsp; Are there any other reasons one would choose one of these DI methods over another?<br>
<br>
Thx<br>
<br>

        
    </td>
    <td style="vertical-align: top; width: 134px;" class="Post ">
        
        <div id="Options_123230" class="Options" >
            
        </div>
        
    </td>
</tr>

        <tr><td colspan="3"><div class="PostSeparator"></div></td></tr>
        

<tr id="PostPanel" class="Post" d:forid="123266">
    <td id="PostDetailsCell_123266" style="vertical-align: top; border: solid #BBB 1px; border-bottom: none; border-left: none; border-top: none; width: 114px" class="Post">
        <div class="Details">
            <a name="post123266"></a>
            <div class="UserName" style="white-space: pre-wrap; word-wrap: break-word;"><a class="UserProfileLink" href="http://www.codeplex.com/site/users/view/RayHenry">RayHenry</a></div>
            <div class="UserRole"></div>
            <div style="white-space: normal" class="SubText"><span class="smartDate" title="10/6/2008 7:53:44 PM" LocalTimeTicks="1223348024">Oct 6, 2008 at 7:53 PM</span></div>
            
        </div>
    </td>
    <td id="PostContent_123266" style="width: 100%; vertical-align: top;" 
        class=" discussionPost discussionListContent WordWrapBreakWord Post " 
        data-markdown="Hi&#32;Lefty,&#32;&#32;I&#39;ll&#32;assume&#32;you&#32;are&#32;creating&#32;a&#32;component&#32;and&#32;you&#39;d&#32;like&#32;external&#32;dependencies&#32;to&#32;be&#32;injected&#32;into&#32;your&#32;component.&#32;If&#32;you&#32;aren&#39;t&#32;creating&#32;components&#32;for&#32;consumption&#32;by&#32;other&#32;applications,&#32;then&#32;you&#32;can&#32;pretty&#32;much&#32;ignore&#32;what&#32;follows&#32;and&#32;do&#32;the&#32;injection&#38;nbsp&#59;in&#32;whatever&#32;way&#32;seems&#32;best&#32;to&#32;you.&#32;&#32;If&#32;you&#32;use&#32;constructor&#32;injection,&#32;your&#32;component&#32;can&#32;be&#32;used&#32;by&#32;anyone&#32;who&#32;is&#32;using&#32;a&#32;container&#32;that&#32;supports&#32;constructor&#32;injection.&#32;This&#32;is&#32;the&#32;optimal&#32;approach.&#32;Make&#32;sure&#32;you&#32;don&#39;t&#32;use&#32;any&#32;attributes&#32;that&#32;are&#32;container-specific.&#32;&#32;If&#32;you&#32;use&#32;Property&#32;&#40;Setter&#41;&#32;injection&#32;with&#32;Unity,&#32;then&#32;you&#32;will&#32;be&#32;using&#32;attributes&#32;to&#32;decorate&#32;the&#32;properties&#32;and&#32;your&#32;component&#32;will&#32;only&#32;be&#32;useful&#32;in&#32;applications&#32;that&#32;are&#32;using&#32;Unity.&#32;&#32;If&#32;you&#32;explicitly&#32;use&#32;unityContainer.Resolve&#32;inside&#32;your&#32;component,&#32;then&#32;you&#32;again&#32;are&#32;creating&#32;a&#32;hard&#32;dependency&#32;on&#32;Unity.&#32;&#32;That&#32;being&#32;said,&#32;you&#32;can&#32;resolve&#32;dependencies&#32;dynamically&#32;inside&#32;your&#32;component,&#32;in&#32;a&#32;&#39;container-independent&#39;&#32;fashion,&#32;by&#32;taking&#32;advantage&#32;of&#32;the&#32;Common&#32;Service&#32;Locator&#32;interface.&#32;Make&#32;your&#32;internal&#32;references&#32;to&#32;the&#32;container&#32;of&#32;type&#32;IServiceLocator.&#32;Then&#32;you&#32;will&#32;be&#32;able&#32;to&#32;ask&#32;the&#32;container&#32;to&#32;resolve&#32;a&#32;dependency&#32;regardless&#32;of&#32;the&#32;actual&#32;container&#32;implementation,&#32;so&#32;long&#32;as&#32;there&#32;is&#32;a&#32;CSL&#32;implementation&#32;for&#32;it.&#32;See&#38;nbsp&#59;http&#58;&#47;&#47;www.codeplex.com&#47;CommonServiceLocator.&#32;&#32;&#32;Ray&#32;Henry&#32;http&#58;&#47;&#47;initializecomponent.blogspot.com&#47;&#32;&#32;&#32;">
        Hi Lefty,<br>
<br>
I'll assume you are creating a component and you'd like external dependencies to be injected into your component. If you aren't creating components for consumption by other applications, then you can pretty much ignore what follows and do the injection&nbsp;in
 whatever way seems best to you.<br>
<br>
If you use constructor injection, your component can be used by anyone who is using a container that supports constructor injection. This is the optimal approach. Make sure you don't use any attributes that are container-specific.<br>
<br>
If you use Property (Setter) injection with Unity, then you will be using attributes to decorate the properties and your component will only be useful in applications that are using Unity.<br>
<br>
If you explicitly use unityContainer.Resolve inside your component, then <a href="http://initializecomponent.blogspot.com/2008/06/container-dependency-anti-pattern.html" rel="nofollow">
you again are creating a hard dependency on Unity</a>.<br>
<br>
That being said, you can resolve dependencies dynamically inside your component, in a 'container-independent' fashion, by taking advantage of the Common Service Locator interface.
<a href="http://initializecomponent.blogspot.com/2008/10/common-service-locator.html" rel="nofollow">
Make your internal references to the container of type IServiceLocator</a>. Then you will be able to ask the container to resolve a dependency regardless of the actual container implementation, so long as there is a CSL implementation for it. See&nbsp;<a href="http://www.codeplex.com/CommonServiceLocator" rel="nofollow">http://www.codeplex.com/CommonServiceLocator</a>.
<br>
<br>
Ray Henry<br>
<a href="http://initializecomponent.blogspot.com/" rel="nofollow">http://initializecomponent.blogspot.com/</a>
<br>
<br>

        
    </td>
    <td style="vertical-align: top; width: 134px;" class="Post ">
        
        <div id="Options_123266" class="Options" >
            
        </div>
        
    </td>
</tr>

        <tr><td colspan="3"><div class="PostSeparator"></div></td></tr>
        

<tr id="PostPanel" class="Post" d:forid="123277">
    <td id="PostDetailsCell_123277" style="vertical-align: top; border: solid #BBB 1px; border-bottom: none; border-left: none; border-top: none; width: 114px" class="Post">
        <div class="Details">
            <a name="post123277"></a>
            <div class="UserName" style="white-space: pre-wrap; word-wrap: break-word;"><a class="UserProfileLink" href="http://www.codeplex.com/site/users/view/ctavares">ctavares</a></div>
            <div class="UserRole"></div>
            <div style="white-space: normal" class="SubText"><span class="smartDate" title="10/6/2008 8:11:47 PM" LocalTimeTicks="1223349107">Oct 6, 2008 at 8:11 PM</span></div>
            
        </div>
    </td>
    <td id="PostContent_123277" style="width: 100%; vertical-align: top;" 
        class=" discussionPost discussionListContent WordWrapBreakWord Post " 
        data-markdown="Ray&#32;has&#32;it&#32;mostly&#32;right.&#32;If&#32;you&#39;re&#32;using&#32;Property&#32;injection,&#32;you&#32;can&#32;use&#32;attributes,&#32;but&#32;you&#32;don&#39;t&#32;have&#32;to&#59;&#32;you&#32;can&#32;instead&#32;configure&#32;the&#32;container&#32;to&#32;specify&#32;which&#32;properties&#32;are&#32;injected&#32;either&#32;via&#32;API&#32;or&#32;config&#32;file.&#32;So&#32;no&#32;hard&#32;dependency&#32;there.&#32;&#32;In&#32;my&#32;mind,&#32;prefer&#32;constructor&#32;injection&#32;whenever&#32;possible.&#32;It&#32;prevents&#32;coupling.&#32;If&#32;you&#32;call&#32;container.Resolve&#32;inside&#32;your&#32;component,&#32;then&#32;you&#32;need&#32;to&#32;have&#32;the&#32;container&#32;passed&#32;to&#32;you&#32;anyway.&#32;Constructor&#32;or&#32;property&#32;injection&#32;also&#32;has&#32;the&#32;advantage&#32;that&#32;you&#32;can&#32;tell&#32;just&#32;by&#32;looking&#32;at&#32;the&#32;class&#32;metadata&#32;what&#32;the&#32;dependencies&#32;are.&#32;If&#32;you&#39;re&#32;calling&#32;Resolve&#32;inside&#32;the&#32;code,&#32;the&#32;only&#32;way&#32;to&#32;find&#32;out&#32;what&#39;s&#32;being&#32;resolved&#32;&#40;and&#32;therefore&#32;how&#32;to&#32;configure&#32;the&#32;container&#41;&#32;is&#32;by&#32;actually&#32;digging&#32;through&#32;the&#32;code&#32;to&#32;the&#32;component.&#32;&#32;">
        Ray has it mostly right. If you're using Property injection, you <em>can</em> use attributes, but you don't have to; you can instead configure the container to specify which properties are injected either via API or config file. So no hard dependency there.<br>
<br>
In my mind, prefer constructor injection whenever possible. It prevents coupling. If you call container.Resolve inside your component, then you need to have the container passed to you anyway. Constructor or property injection also has the advantage that you
 can tell just by looking at the class metadata what the dependencies are. If you're calling Resolve inside the code, the only way to find out what's being resolved (and therefore how to configure the container) is by actually digging through the code to the
 component.<br>
<br>

        
    </td>
    <td style="vertical-align: top; width: 134px;" class="Post ">
        
        <div id="Options_123277" class="Options" >
            
        </div>
        
    </td>
</tr>

        <tr><td colspan="3"><div class="PostSeparator"></div></td></tr>
        

<tr id="PostPanel" class="Post" d:forid="123301">
    <td id="PostDetailsCell_123301" style="vertical-align: top; border: solid #BBB 1px; border-bottom: none; border-left: none; border-top: none; width: 114px" class="Post">
        <div class="Details">
            <a name="post123301"></a>
            <div class="UserName" style="white-space: pre-wrap; word-wrap: break-word;"><a class="UserProfileLink" href="http://www.codeplex.com/site/users/view/Lefty">Lefty</a></div>
            <div class="UserRole"></div>
            <div style="white-space: normal" class="SubText"><span class="smartDate" title="10/6/2008 8:56:17 PM" LocalTimeTicks="1223351777">Oct 6, 2008 at 8:56 PM</span></div>
            
        </div>
    </td>
    <td id="PostContent_123301" style="width: 100%; vertical-align: top;" 
        class=" discussionPost discussionListContent WordWrapBreakWord Post " 
        data-markdown="Ok,&#32;some&#32;good&#32;stuff&#32;there.&#32;&#32;As&#32;for&#32;my&#32;usage,&#32;I&#32;am&#32;trying&#32;to&#32;prototype&#32;a&#32;large&#32;application&#58;&#32;ASP.NET&#32;using&#32;MVP,&#32;WCF&#32;business&#32;service&#32;with&#32;DAL.&#38;nbsp&#59;&#32;My&#32;first&#32;implementation&#32;uses&#32;Resolve&#38;lt&#59;IDAL&#38;gt&#59;&#32;in&#32;the&#32;business&#32;layer,&#32;to&#32;resolve&#32;which&#32;DAL&#32;is&#32;going&#32;to&#32;be&#32;used,&#32;an&#32;Entity&#32;Framework&#32;version&#32;or&#32;an&#32;ADO.NET&#32;version&#32;&#40;that&#32;uses&#32;Data&#32;Access&#32;Application&#32;block&#41;.&#38;nbsp&#59;&#32;I&#32;then&#32;started&#32;expanding&#32;the&#32;search&#32;through&#32;the&#32;layers,&#32;looking&#32;for&#32;other&#32;appropriate&#32;places&#32;to&#32;make&#32;use&#32;of&#32;Unity.&#38;nbsp&#59;&#32;I&#32;came&#32;across&#32;a&#32;David&#32;Hayden&#32;example&#32;for&#32;MVP,&#32;and&#32;planned&#32;to&#32;try&#32;to&#32;work&#32;that&#32;in&#32;as&#32;well.&#32;&#32;I&#32;see&#32;your&#32;point&#32;about&#32;using&#32;the&#32;constructor&#32;and&#32;being&#32;able&#32;to&#32;read&#47;infer&#32;the&#32;dependencies&#32;without&#32;looking&#32;at&#32;the&#32;code.&#38;nbsp&#59;&#32;But&#32;I&#32;am&#32;a&#32;bit&#32;confused&#32;too.&#38;nbsp&#59;&#32;When&#32;a&#32;component&#32;takes&#32;a&#32;dependency&#32;in&#32;the&#32;constructor,&#32;it&#32;&#38;quot&#59;exposes&#38;quot&#59;&#32;some&#32;of&#32;the&#32;secrets&#32;of&#32;that&#32;component.&#38;nbsp&#59;&#32;For&#32;instance,&#32;the&#32;Quickstarts&#32;have&#32;a&#32;sample&#32;where&#32;the&#32;SalesData&#32;class&#32;has&#32;a&#32;constructor&#58;&#32;&#32;SalesData&#40;&#91;Dependency&#93;Database&#32;db&#41;&#32;&#32;It&#32;seems&#32;a&#32;bit&#32;counterintuitive&#32;to&#32;me&#32;to&#32;let&#32;the&#32;consumer&#32;of&#32;the&#32;SalesData&#32;class&#32;even&#32;know&#32;that&#32;it&#32;requires&#32;a&#32;Database,&#32;much&#32;less&#32;open&#32;the&#32;door&#32;to&#32;be&#32;provided&#32;one&#32;within&#32;the&#32;constructor.&#38;nbsp&#59;&#32;In&#32;some&#32;ways,&#32;to&#32;me,&#32;it&#32;seems&#32;like&#32;it&#32;works&#32;against&#32;the&#32;idea&#32;of&#32;abstraction&#32;and&#32;separation&#32;of&#32;the&#32;layers,&#32;because&#32;now,&#32;the&#32;consumer&#32;of&#32;SalesData&#32;&#38;quot&#59;knows&#32;more&#32;about&#38;quot&#59;&#32;the&#32;SalesData&#32;class&#32;and&#32;it&#32;becomes&#32;less&#32;of&#32;a&#32;black&#32;box.&#32;&#32;I&#32;also&#32;see&#32;your&#32;point&#32;about&#32;the&#32;dependency&#32;on&#32;Unity&#32;&#40;when&#32;using&#32;Resolve&#40;&#41;&#41;&#32;but&#32;I&#32;guess&#32;I&#32;figured&#32;that&#32;if&#32;I&#32;put&#32;effort&#32;into&#32;creating&#32;config&#32;files&#32;or&#32;reading&#32;the&#32;configuration&#32;from&#32;the&#32;database,&#32;that&#32;I&#32;was&#32;thinking&#32;that&#32;Unity&#32;was&#32;more&#32;or&#32;less&#32;a&#32;non-negotiable&#32;dependency,&#32;being&#32;used&#32;throughout&#32;the&#32;whole&#32;application&#32;and&#32;the&#32;likelihood&#32;of&#32;wanting&#32;to&#32;replace&#32;it&#32;with&#32;another&#32;DI&#32;provider&#32;later&#32;on&#32;was&#32;small.&#38;nbsp&#59;&#32;&#40;I&#32;should&#32;never&#32;say&#32;never,&#32;I&#32;guess&#41;&#38;nbsp&#59;&#32;8-&#41;&#32;&#32;I&#32;guess&#32;my&#32;first&#32;understanding&#32;of&#32;Unity&#32;was&#32;that&#32;it&#32;provided&#32;me&#32;a&#32;way&#32;to&#32;dynamically&#32;change&#32;the&#32;class&#32;that&#32;implements&#32;an&#32;interface.&#38;nbsp&#59;&#32;Perhaps&#32;I&#32;am&#32;missing&#32;some&#32;additional&#32;benefits,&#32;when&#32;it&#32;is&#32;used&#32;properly.&#32;&#32;I&#39;d&#32;appreciate&#32;some&#32;more&#32;comments&#32;to&#32;help&#32;me&#32;fully&#32;understand&#32;Unity....&#32;I&#32;think&#32;I&#39;m&#32;getting&#32;closer,&#32;but&#32;not&#32;quite&#32;there&#32;yet.&#32;&#32;Thx&#32;&#32;&#32;">
        Ok, some good stuff there.<br>
<br>
As for my usage, I am trying to prototype a large application: ASP.NET using MVP, WCF business service with DAL.&nbsp; My first implementation uses Resolve&lt;IDAL&gt; in the business layer, to resolve which DAL is going to be used, an Entity Framework version
 or an ADO.NET version (that uses Data Access Application block).&nbsp; I then started expanding the search through the layers, looking for other appropriate places to make use of Unity.&nbsp; I came across a David Hayden example for MVP, and planned to try
 to work that in as well.<br>
<br>
I see your point about using the constructor and being able to read/infer the dependencies without looking at the code.&nbsp; But I am a bit confused too.&nbsp; When a component takes a dependency in the constructor, it &quot;exposes&quot; some of the secrets
 of that component.&nbsp; For instance, the Quickstarts have a sample where the SalesData class has a constructor:<br>
<br>
SalesData([Dependency]Database db)<br>
<br>
It seems a bit counterintuitive to me to let the consumer of the SalesData class even know that it requires a Database, much less open the door to be provided one within the constructor.&nbsp; In some ways, to me, it seems like it works against the idea of
 abstraction and separation of the layers, because now, the consumer of SalesData &quot;knows more about&quot; the SalesData class and it becomes less of a black box.<br>
<br>
I also see your point about the dependency on Unity (when using Resolve()) but I guess I figured that if I put effort into creating config files or reading the configuration from the database, that I was thinking that Unity was more or less a non-negotiable
 dependency, being used throughout the whole application and the likelihood of wanting to replace it with another DI provider later on was small.&nbsp; (I should never say never, I guess)&nbsp; 8-)<br>
<br>
I guess my first understanding of Unity was that it provided me a way to dynamically change the class that implements an interface.&nbsp; Perhaps I am missing some additional benefits, when it is used properly.<br>
<br>
I'd appreciate some more comments to help me fully understand Unity.... I think I'm getting closer, but not quite there yet.<br>
<br>
Thx<br>
<br>
<br>

        
    </td>
    <td style="vertical-align: top; width: 134px;" class="Post ">
        
        <div id="Options_123301" class="Options" >
            
        </div>
        
    </td>
</tr>

        <tr><td colspan="3"><div class="PostSeparator"></div></td></tr>
        

<tr id="PostPanel" class="Post" d:forid="123307">
    <td id="PostDetailsCell_123307" style="vertical-align: top; border: solid #BBB 1px; border-bottom: none; border-left: none; border-top: none; width: 114px" class="Post">
        <div class="Details">
            <a name="post123307"></a>
            <div class="UserName" style="white-space: pre-wrap; word-wrap: break-word;"><a class="UserProfileLink" href="http://www.codeplex.com/site/users/view/RayHenry">RayHenry</a></div>
            <div class="UserRole"></div>
            <div style="white-space: normal" class="SubText"><span class="smartDate" title="10/6/2008 9:08:08 PM" LocalTimeTicks="1223352488">Oct 6, 2008 at 9:08 PM</span></div>
            
        </div>
    </td>
    <td id="PostContent_123307" style="width: 100%; vertical-align: top;" 
        class=" discussionPost discussionListContent WordWrapBreakWord Post " 
        data-markdown="Yeah,&#32;I&#32;agree&#32;that&#32;having&#32;the&#32;component&#32;expose&#32;its&#32;dependencies&#32;is&#32;a&#32;bit&#32;counter-intuitive&#32;and&#32;seems&#32;to&#32;go&#32;against&#32;&#38;quot&#59;abstraction&#38;quot&#59;.&#32;But&#32;consider&#32;that&#32;you&#32;are&#32;letting&#32;the&#32;container&#32;manager&#32;the&#32;dependencies&#32;-&#32;you&#32;will&#32;never&#32;call&#32;the&#32;constructor,&#32;so&#32;the&#32;application&#32;does&#32;not&#32;need&#32;to&#32;know&#32;about&#32;the&#32;dependencies&#59;&#32;it&#39;s&#32;still&#32;a&#32;black&#32;box.&#32;If&#32;dependencies&#32;change&#32;later,&#32;then&#32;you&#32;update&#32;your&#32;component&#32;and&#32;the&#32;&#40;small&#41;&#32;bit&#32;of&#32;code&#32;that&#32;configures&#32;the&#32;container&#32;and&#32;there&#32;are&#32;no&#32;changes&#32;to&#32;the&#32;application&#32;&#40;in&#32;theory&#41;.&#32;&#32;And&#32;you&#32;are&#32;right,&#32;if&#32;you&#32;intend&#32;to&#32;have&#32;complete&#32;control&#32;of&#32;all&#32;your&#32;layers,&#32;then&#38;nbsp&#59;making&#32;dependencies&#32;on&#32;Unity&#32;is&#32;not&#32;so&#32;bad,&#32;but&#32;you&#32;know&#32;at&#32;some&#32;point&#32;someone&#32;is&#32;going&#32;to&#32;ask&#32;you&#32;if&#32;you&#32;can&#32;bundle&#32;up&#32;some&#32;of&#32;your&#32;functionality&#32;and&#32;let&#32;them&#32;use&#32;it&#32;as&#32;a&#32;component.&#32;Then&#32;you&#39;ll&#32;appreciate&#32;minimizing&#32;the&#32;coupling.&#32;&#32;Ray&#32;">
        Yeah, I agree that having the component expose its dependencies is a bit counter-intuitive and seems to go against &quot;abstraction&quot;. But consider that you are letting the container manager the dependencies - you will never call the constructor,
 so the application does not need to know about the dependencies; it's still a black box. If dependencies change later, then you update your component and the (small) bit of code that configures the container and there are no changes to the application (in
 theory).<br>
<br>
And you are right, if you intend to have complete control of all your layers, then&nbsp;making dependencies on Unity is not so bad, but you know at some point someone is going to ask you if you can bundle up some of your functionality and let them use it as
 a component. Then you'll appreciate minimizing the coupling.<br>
<br>
Ray 
        
    </td>
    <td style="vertical-align: top; width: 134px;" class="Post ">
        
        <div id="Options_123307" class="Options" >
            
        </div>
        
    </td>
</tr>

        <tr><td colspan="3"><div class="PostSeparator"></div></td></tr>
        

<tr id="PostPanel" class="Post" d:forid="123330">
    <td id="PostDetailsCell_123330" style="vertical-align: top; border: solid #BBB 1px; border-bottom: none; border-left: none; border-top: none; width: 114px" class="Post">
        <div class="Details">
            <a name="post123330"></a>
            <div class="UserName" style="white-space: pre-wrap; word-wrap: break-word;"><a class="UserProfileLink" href="http://www.codeplex.com/site/users/view/ctavares">ctavares</a></div>
            <div class="UserRole"></div>
            <div style="white-space: normal" class="SubText"><span class="smartDate" title="10/6/2008 10:18:15 PM" LocalTimeTicks="1223356695">Oct 6, 2008 at 10:18 PM</span></div>
            
        </div>
    </td>
    <td id="PostContent_123330" style="width: 100%; vertical-align: top;" 
        class=" discussionPost discussionListContent WordWrapBreakWord Post " 
        data-markdown="You&#39;re&#32;basically&#32;looking&#32;at&#32;Unity&#32;as&#32;a&#32;Service&#32;Locator,&#32;which&#32;is&#32;one&#32;way&#32;to&#32;use&#32;it.&#32;Have&#32;you&#32;looked&#32;at&#32;Fowler&#39;s&#32;Dependency&#32;Injection&#32;vs.&#32;Service&#32;Locator&#32;piece&#63;&#32;It&#32;might&#32;help&#32;clear&#32;up&#32;some&#32;of&#32;the&#32;confusion.&#32;&#32;It&#32;is&#32;fairly&#32;well&#32;known&#32;that&#32;the&#32;DI&#32;style&#32;violates&#32;encapsulation.&#32;Yes,&#32;your&#32;consumer&#32;now&#32;knows&#32;that&#32;SalesData&#32;needs&#32;a&#32;database.&#32;&#40;BTW,&#32;the&#32;&#91;Dependency&#93;&#32;attribute&#32;on&#32;the&#32;parameter&#32;is&#32;unnecessary&#32;unless&#32;you&#39;re&#32;resolving&#32;a&#32;named&#32;registration&#41;.&#32;But&#32;think&#32;about&#32;it&#32;this&#32;way&#32;-&#32;how&#32;would&#32;you&#32;write&#32;a&#32;unit&#32;test&#32;for&#32;SalesData&#32;if&#32;the&#32;dependency&#32;on&#32;Database&#32;wasn&#39;t&#32;exposed&#63;&#32;If&#32;you&#39;re&#32;new-ing&#32;up&#32;the&#32;Database&#32;internally,&#32;you&#32;can&#39;t&#32;test&#32;that&#32;class&#32;without&#32;having&#32;a&#32;live&#32;database&#32;on&#32;the&#32;other&#32;end.&#32;And&#32;the&#32;only&#32;way&#32;to&#32;know&#32;that&#32;is&#32;by&#32;reading&#32;the&#32;internals&#32;of&#32;the&#32;code.&#32;&#32;Exposing&#32;the&#32;dependencies&#32;this&#32;way&#32;is&#32;a&#32;great&#32;way&#32;of&#32;increasing&#32;the&#32;isolation&#32;of&#32;your&#32;units.&#32;That&#32;makes&#32;them&#32;easier&#32;to&#32;test&#32;and&#32;you&#32;often&#32;end&#32;up&#32;with&#32;a&#32;better&#32;design&#32;in&#32;the&#32;end.&#32;&#32;">
        You're basically looking at Unity as a Service Locator, which is one way to use it. Have you looked at
<a href="http://martinfowler.com/articles/injection.html" rel="nofollow">Fowler's Dependency Injection vs. Service Locator</a> piece? It might help clear up some of the confusion.<br>
<br>
It is fairly well known that the DI style violates encapsulation. Yes, your consumer now knows that SalesData needs a database. (BTW, the [Dependency] attribute on the parameter is unnecessary unless you're resolving a named registration). But think about it
 this way - how would you write a unit test for SalesData if the dependency on Database wasn't exposed? If you're new-ing up the Database internally, you can't test that class without having a live database on the other end. And the only way to know that is
 by reading the internals of the code.<br>
<br>
Exposing the dependencies this way is a great way of increasing the isolation of your units. That makes them easier to test and you often end up with a better design in the end.<br>
<br>

        
    </td>
    <td style="vertical-align: top; width: 134px;" class="Post ">
        
        <div id="Options_123330" class="Options" >
            
        </div>
        
    </td>
</tr>

        <tr><td colspan="3"><div class="PostSeparator"></div></td></tr>
        

<tr id="PostPanel" class="Post" d:forid="123478">
    <td id="PostDetailsCell_123478" style="vertical-align: top; border: solid #BBB 1px; border-bottom: none; border-left: none; border-top: none; width: 114px" class="Post">
        <div class="Details">
            <a name="post123478"></a>
            <div class="UserName" style="white-space: pre-wrap; word-wrap: break-word;"><a class="UserProfileLink" href="http://www.codeplex.com/site/users/view/Lefty">Lefty</a></div>
            <div class="UserRole"></div>
            <div style="white-space: normal" class="SubText"><span class="smartDate" title="10/7/2008 2:59:30 PM" LocalTimeTicks="1223416770">Oct 7, 2008 at 2:59 PM</span></div>
            
        </div>
    </td>
    <td id="PostContent_123478" style="width: 100%; vertical-align: top;" 
        class=" discussionPost discussionListContent WordWrapBreakWord Post " 
        data-markdown="Ok,&#32;good,&#32;I&#32;think&#32;I&#39;m&#32;getting&#32;it.&#38;nbsp&#59;&#32;Now&#32;to&#32;push&#32;it&#32;a&#32;bit&#32;further.&#38;nbsp&#59;&#32;Your&#32;point&#32;about&#32;being&#32;more&#32;testable&#32;is&#32;good.&#38;nbsp&#59;&#32;I&#32;have&#32;not&#32;worked&#32;with&#32;coded&#32;unit&#32;tests&#32;before,&#32;but&#32;I&#32;plan&#32;to&#32;with&#32;this&#32;project.&#38;nbsp&#59;&#32;As&#32;a&#32;result,&#32;my&#32;knowledge&#32;of&#32;test&#32;frameworks&#32;is&#32;minimal&#32;at&#32;this&#32;point,&#32;as&#32;I&#32;haven&#39;t&#32;dug&#32;into&#32;that&#32;area&#32;of&#32;things&#32;just&#32;yet.&#38;nbsp&#59;&#32;I&#39;d&#32;appreciate&#32;your&#32;advice&#32;on&#32;best&#32;use&#32;of&#32;constructor&#32;injectors,&#32;using&#32;another&#32;example.&#32;&#32;The&#32;IDAL&#32;implementation&#32;I&#32;mentioned&#32;earlier&#32;has&#32;three&#32;distinct&#32;parts.&#32;&#32;&#32;Adapter&#32;-&#32;this&#32;class&#32;exposes&#32;the&#32;DAL&#32;functionality&#32;to&#32;the&#32;consumer&#32;&#40;ie.&#32;LoadCustomerById&#40;&#41;&#41;&#32;-&#32;it&#32;acts&#32;like&#32;a&#32;manager&#32;within&#32;the&#32;DAL&#32;&#32;&#32;DataAction&#32;-&#32;this&#32;class&#32;is&#32;internal&#32;to&#32;the&#32;DAL&#32;and&#32;is&#32;used&#32;by&#32;the&#32;Adapter&#32;&#40;adapter&#32;depends&#32;on&#32;dataaction&#41;&#32;-&#32;this&#32;also&#32;exposes&#32;a&#32;LoadCustomerById&#32;and&#32;is&#32;responsible&#32;for&#32;the&#32;actual&#32;query&#32;execution&#32;and&#32;returns&#32;a&#32;DataTable&#32;&#40;or&#32;another&#32;appropriate&#32;container&#32;-&#32;for&#32;the&#32;Entity&#32;Framework&#32;DAL,&#32;this&#32;would&#32;return&#32;an&#32;Entity&#32;Framework&#32;Model&#32;Customer&#32;object&#41;&#32;&#32;&#32;Mapper&#32;-&#32;also&#32;internal&#32;to&#32;the&#32;DAL,&#32;also&#32;used&#32;by&#32;the&#32;Adapter&#32;&#40;adapter&#32;depends&#32;on&#32;Mapper&#41;&#32;-&#32;this&#32;performs&#32;object&#32;translation&#32;to&#32;the&#32;common&#32;return&#32;type&#32;defined&#32;by&#32;the&#32;IDAL,&#32;so&#32;for&#32;this&#32;method,&#32;it&#32;would&#32;accept&#32;the&#32;DataTable&#32;and&#32;instantiate&#32;and&#32;populate&#32;a&#32;Business&#32;Entity&#32;Customer&#32;object&#32;to&#32;be&#32;returned&#32;by&#32;the&#32;Adapter&#32;&#40;or&#32;convert&#32;the&#32;EF&#32;Model&#32;entity&#32;to&#32;a&#32;Business&#32;Entity&#32;Customer&#41;&#32;&#32;So&#32;in&#32;my&#32;case&#32;above,&#32;the&#32;DataAction&#32;class&#32;has&#32;a&#32;dependency&#32;on&#32;the&#32;Database&#32;class&#32;&#40;Data&#32;Access&#32;Application&#32;Block&#41;.&#38;nbsp&#59;&#32;Now&#32;I&#32;can&#32;add&#32;the&#32;Database&#32;class&#32;to&#32;the&#32;DataAction&#32;constructor,&#32;for&#32;use&#32;with&#32;DI.&#38;nbsp&#59;&#32;However,&#32;this&#32;probably&#32;won&#39;t&#32;fully&#32;help&#32;me&#32;with&#32;testability&#32;will&#32;it&#63;&#32;Since&#32;my&#32;tests&#32;would&#32;likely&#32;create&#32;an&#32;Adapter&#32;object,&#32;not&#32;a&#32;DataAction&#32;object.&#38;nbsp&#59;&#32;If&#32;I&#32;create&#32;an&#32;Adapter&#32;object&#32;within&#32;a&#32;test,&#32;and&#32;wanted&#32;to&#32;substitute&#32;the&#32;Database&#32;for&#32;a&#32;mock&#32;database&#32;instead&#32;of&#32;a&#32;real&#32;one,&#32;what&#32;would&#32;be&#32;the&#32;best&#32;DI&#32;architecture&#32;to&#32;support&#32;that&#63;&#32;&#32;Should&#32;I&#32;chain&#32;everything&#32;together,&#32;where&#58;&#32;Adapter&#40;DataAction&#32;da,&#32;Mapper&#32;m&#41;&#32;DataAction&#40;Database&#32;d&#41;&#32;&#32;So&#32;Adapter&#32;depends&#32;on&#32;both&#32;and&#32;DataAction&#32;depends&#32;on&#32;Database&#63;&#38;nbsp&#59;&#32;&#32;&#32;Would&#32;this&#32;allow&#32;me,&#32;in&#32;a&#32;test,&#32;to&#32;create&#32;a&#32;real&#32;Adapter&#32;and&#32;a&#32;real&#32;Mapper&#32;and&#32;a&#32;real&#32;DataAction,&#32;and&#32;sub&#32;in&#32;a&#32;mock&#32;Database&#63;&#38;nbsp&#59;&#32;My&#32;inexperience&#32;with&#32;the&#32;testing&#32;frameworks&#32;is&#32;glaring&#32;here.&#38;nbsp&#59;&#32;&#32;&#32;Also,&#32;it&#32;seems&#32;a&#32;bit&#32;of&#32;overkill&#32;to&#32;use&#32;DI&#32;for&#32;Mapper,&#32;since&#32;I&#32;don&#39;t&#32;see&#32;the&#32;need&#32;to&#32;dynamically&#32;locate&#32;that&#32;service...&#32;switching&#32;the&#32;IDAL&#32;from&#32;EF&#32;to&#32;ADO.NET&#32;makes&#32;sense,&#32;but&#32;within&#32;the&#32;ADO.NET&#32;DAL,&#32;swapping&#32;the&#32;Mapper&#32;from&#32;one&#32;to&#32;another&#32;seems&#32;unlikely.&#38;nbsp&#59;&#32;Maybe&#32;I&#32;should&#32;remove&#32;the&#32;Mapper&#32;from&#32;the&#32;Adapter&#32;constructor&#63;&#32;&#32;Thoughts&#63;&#32;&#32;&#32;&#32;&#32;">
        Ok, good, I think I'm getting it.&nbsp; Now to push it a bit further.&nbsp; Your point about being more testable is good.&nbsp; I have not worked with coded unit tests before, but I plan to with this project.&nbsp; As a result, my knowledge of test frameworks
 is minimal at this point, as I haven't dug into that area of things just yet.&nbsp; I'd appreciate your advice on best use of constructor injectors, using another example.<br>
<br>
The IDAL implementation I mentioned earlier has three distinct parts.<br>
<br>
<ul>
<li>Adapter - this class exposes the DAL functionality to the consumer (ie. LoadCustomerById()) - it acts like a manager within the DAL
</li></ul>
<ul>
<li>DataAction - this class is internal to the DAL and is used by the Adapter (adapter depends on dataaction) - this also exposes a LoadCustomerById and is responsible for the actual query execution and returns a DataTable (or another appropriate container
 - for the Entity Framework DAL, this would return an Entity Framework Model Customer object)
</li></ul>
<ul>
<li>Mapper - also internal to the DAL, also used by the Adapter (adapter depends on Mapper) - this performs object translation to the common return type defined by the IDAL, so for this method, it would accept the DataTable and instantiate and populate a Business
 Entity Customer object to be returned by the Adapter (or convert the EF Model entity to a Business Entity Customer)
</li></ul>
So in my case above, the DataAction class has a dependency on the Database class (Data Access Application Block).&nbsp; Now I can add the Database class to the DataAction constructor, for use with DI.&nbsp; However, this probably won't fully help me with testability
 will it? Since my tests would likely create an Adapter object, not a DataAction object.&nbsp; If I create an Adapter object within a test, and wanted to substitute the Database for a mock database instead of a real one, what would be the best DI architecture
 to support that?<br>
<br>
Should I chain everything together, where:<br>
<blockquote>Adapter(DataAction da, Mapper m)<br>
DataAction(Database d)<br>
</blockquote>
<br>
So Adapter depends on both and DataAction depends on Database?&nbsp; <br>
<br>
Would this allow me, in a test, to create a real Adapter and a real Mapper and a real DataAction, and sub in a mock Database?&nbsp; My inexperience with the testing frameworks is glaring here.&nbsp;
<br>
<br>
Also, it seems a bit of overkill to use DI for Mapper, since I don't see the need to dynamically locate that service... switching the IDAL from EF to ADO.NET makes sense, but within the ADO.NET DAL, swapping the Mapper from one to another seems unlikely.&nbsp;
 Maybe I should remove the Mapper from the Adapter constructor?<br>
<br>
Thoughts?<br>
<br>
<br>
<br>
<br>

        
    </td>
    <td style="vertical-align: top; width: 134px;" class="Post ">
        
        <div id="Options_123478" class="Options" >
            
        </div>
        
    </td>
</tr>

</table>
    </div>

    
        <div class="StandardMarginTop">
            <a id="SignInToAddCommentLink" href="https://www.codeplex.com/site/login?RedirectUrl=http%3a%2f%2funity.codeplex.com%2fdiscussions%2f37142">
                Sign in to post message or set email notifications
            </a>
        </div>
    


    <div id="PostEditorContainer">
        <a name="editor"></a>
        <div id="Editor" style="display: none;">
            

<div class="MarkdownEditor" data-options-id="fffd1c27-d22c-4df3-bb68-880b6269f24f">
    <script class="options" defer="defer" id="fffd1c27-d22c-4df3-bb68-880b6269f24f" type="application/json">{"maxLength":10000,"styleSheetLocation":""}</script>

    <div class="MarkdownEditorControls">
        <a href="#" tabindex="-1" class="control md_help" title="Markdown Syntax Guide"></a>
        <div class="control md_divider"></div>
        <a href="#" tabindex="-1" class="control md_header" title="Insert Header (CTRL + H)"></a>
        <a href="#" tabindex="-1" class="control md_code" title="Insert Code (CTRL + K)"></a>
        <a href="#" tabindex="-1" class="control md_quote" title="Insert Quote (CTRL + Q)"></a>
        <a href="#" tabindex="-1" class="control md_img" title="Insert Img (CTRL + G)"></a>
        <a href="#" tabindex="-1" class="control md_link" title="Insert Link (CTRL + L)"></a>
        <a href="#" tabindex="-1" class="control md_ulist" title="Unordered List (CTRL + U)"></a>
        <a href="#" tabindex="-1" class="control md_olist" title="Ordered List (CTRL + O)"></a>
        <a href="#" tabindex="-1" class="control md_italics" title="Italic Text (CTRL + I)"></a>
        <a href="#" tabindex="-1" class="control md_bold" title="Bold Text (CTRL + B)"></a>
    </div>

    

<div class="tab_control">
    <!-- Generate the basic HTML for the tabs. -->
    
        <div id="Compose"
              class="tab selected"
              data-custom-header-id=""
              data-tab-contents-id="compose_contents_f0193834-406b-4d10-84e4-4d62510cf9b2">
            Compose
        </div>
    
        <div id="Preview"
              class="tab "
              data-custom-header-id=""
              data-tab-contents-id="preview_contents_0c305b1d-cc9d-4ce2-8142-9b75d4fd5ff2">
            Preview
        </div>
    
    <div class="clear"></div>
</div>


    <div id="compose_contents_f0193834-406b-4d10-84e4-4d62510cf9b2" class="compose_tab_content">
        <textarea class=" MarkdownEditorDimensions" cols="20" id="MarkdownEditor" name="content" rows="2">
</textarea>
        <div class="ClearBoth"></div>

        <div class="markdownGuide" style="display: none">
            <table>
                <tr>
                    <td class="markdownGuideColumn">
                        <h1>Text Formatting</h1>
                        <div># Header 1</div>
                        <div>## Header 2</div>
                        <br />
                        <div>*italics* (or _italics_)</div>
                        <div>**bold** (or __bold__)</div>
                    </td>
                    <td class="markdownGuideColumn">
                        <h1>Lists</h1>
                        <div>* Unordered List</div>
                        <div>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp * SubItem</div>
                        <br />
                        <div>1. Ordered List</div>
                        <div>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp 1. SubItem</div>
                    </td>
                    <td class="markdownGuideColumn">
                        <h1>Quotes</h1>
                        <div>> Lorem ipsum</div>
                        <div>dolor sitamet </div>
                        <div>non. Lectus at</div>
                        <div>nam nunc...</div>
                    </td>
                    <td class="markdownGuideColumn">
                        <h1>Code</h1>
                        <div>`Inline Code`</div>
                        <br />
                        <div>``` C#</div>
                        <div>if (foo==bar)</div>
                        <div>&nbsp&nbsp&nbsp&nbsp&nbsp&nbspbar++</div>
                        <div>```</div>
                    </td>
                    <td class="markdownGuideColumn">
                        <h1>References</h1>
                        <div>[Link Text](URL)</div>
                        <br />
                        <div>![Image](URL)</div>
                        <br />
                        <a class="Reference" target="_blank" href="http://codeplex.codeplex.com/wikipage?title=Markdown&referringTitle=Documentation">Markdown Reference</a>
                    </td>
                </tr>
            </table>
        </div>
    </div>
    <div id="preview_contents_0c305b1d-cc9d-4ce2-8142-9b75d4fd5ff2" class="preview_tab_content markDownOutput">
        
            <div></div>
        
    </div>
    <div class="clear"></div>
</div>

            
            <div class="row" id="recaptcha_row">
                
<script type="text/javascript">
    $(document).ready(function () {
        $('#recaptcha_reload').attr('src', '../assets/recaptcha_refresh.png');
        $('#recaptcha_switch_audio').attr('src', '../assets/recaptcha_audio.png');
        $('#recaptcha_switch_img').attr('src', '../assets/recaptcha_text.png');
        $('#recaptcha_whatsthis').attr('src', '../assets/recaptcha_help.png');
        $('#recaptcha_area tr:first').attr('height', '35');
    });
</script>

                <div class="clear"></div>
                <span id="ReCaptchaError"></span>
            </div>
            <div style="padding-top: 6px;">
                <input type="button" id="SaveButton" value="Save" class="ok" />
                <input type="button" id="CancelButton" value="Cancel" class="cancel" />
                <div class="clear"></div>
            </div>
        </div>
    </div>
</div>

<div id="DeletePostPanel" class="modal" style="display:none">
    <div class="row">
        <h2>Delete Post <a href="javascript:return false;" class="close">X</a></h2>
    </div>
    <div class="modal_info">
        <p>Are you sure you want to delete this post? You will not be able to recover it later.</p>
        <p class="modal_buttons">
            <input type="button" id="ClosePostCancel" value="Cancel" class="cancel" />
            <input type="button" id="ClosePostOk" value="Delete" class="ok" />
        </p>
        <div class="ClearBoth"></div>
    </div>
</div>
        
            <!-- Email notification / Subscription details -->
            
    </div>
</div>
    
<div id="DeleteThreadPanel" class="modal" style="display:none">
    <div class="row">
        <h2>Delete Thread <a href="javascript:return false;" class="close">X</a></h2>
    </div>
    <div class="modal_info">
        <p>Are you sure you want to delete this thread? You will not be able to recover it later.</p>
        <p class="modal_buttons">
            <input type="button" id="CloseThreadCancel" value="Cancel" class="cancel" />
            <input type="button" id="CloseThreadOk" value="Delete" class="ok" />
        </p>
        <div class="ClearBoth"></div>
    </div>
</div>

<script type="text/javascript" language="javascript">
    $(function () {

        $('#recaptcha_response_field')
            .bind('keypress', function (event) { return $submitKeyPressElement(this, event); });


        if ($('#DeleteThreadLink')) {
            $('#DeleteThreadLink').click(function () {
                OpenDialog('#DeleteThreadPanel', true, '41em');
            });
        }
        
        $('#DeleteThreadPanel #CloseThreadOk').click(function () {
            var url = 'http://unity.codeplex.com/discussions/37142';
            $.ajax({
                url: url,
                type: 'DELETE',
                success: function (x) {
                    location.href = x.RedirectUrl;
                }
            });
        });
    });

    workItemMention = new codeplex.ui.WorkItemMention();
    workItemMention.addLinks(".discussionPost");
</script>


        
        
                
                <div class="clear"></div>
                
                <div id="footer">
                    <div class="row">
                        <hr />
                        <ul>
                            <li>Â© 2006-2017 Microsoft</li>
                            <li><a href="http://www.codeplex.com/site/help">Get Help</a></li>
                            <li><a href="/site/legal/privacy">Privacy Statement</a></li>
                            <li><a href="http://www.codeplex.com/site/legal/terms">Terms of Use</a></li>
                            <li><a href="http://www.codeplex.com/site/legal/conduct">Code of Conduct</a></li>
                            <li><a href="http://developermedia.com/" target="_blank">Advertise With Us</a></li>
                            <li>Version 2017.10.3.21062</li>
                        </ul>
                    </div>
                </div>
            </div>
        </form>
    </body>

</html>