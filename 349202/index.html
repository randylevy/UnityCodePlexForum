

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" class="" prefix="og: http://ogp.me/ns# profile: http://ogp.me/ns/profile#">
    
    
    
    

    
    <head>
        <meta id="CompatabilityMode" http-equiv="X-UA-Compatible" content="IE=edge" />
	    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link href="../assets/StyleSheet.css" id="MasterCss" rel="stylesheet" type="text/css" />
        <link rel="SHORTCUT ICON" href="../assets/favicon.ico" />
        <title>patterns &#38; practices - Unity - Examine content of IMethodReturn for auditing AOP</title>
        
       
                    <script src="../assets/mscc-0.3.6.min.js"></script>
        
                    <link rel="stylesheet" type="text/css" href="../assets/mscc-0.3.6.min.css" />
        
            <script type="text/javascript">
                var msccHadCookieBannerAtPageStart = true;
            </script>
        

        <!--
        Third party scripts and code linked to or referenced from this website are licensed to you by the parties that own such code,
        not by Microsoft.  See ASP.NET Ajax CDN Terms of Use â€“ http://www.asp.net/ajaxlibrary/CDN.ashx.
        -->
        <script src="https://ajax.aspnetcdn.com/ajax/jquery/jquery-1.4.4.min.js" type="text/javascript"></script>
        
        <script type="text/javascript">
            if (typeof jQuery === 'undefined') {
                document.write(unescape("%3Cscript src='https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js' type='text/javascript'%3E%3C/script%3E"));
            }
        </script>

        <script src="https://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.6/jquery-ui.min.js" type="text/javascript"></script>
        
        <script type="text/javascript">
            if (typeof jQuery.ui === 'undefined') {
                document.write(unescape("%3Cscript src='https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.6/jquery-ui.min.js' type='text/javascript'%3E%3C/script%3E"));
            }
        </script>

        
    <style type="text/css">.SideBar, .SideBarPadding{display:none;}.MainContent{width:auto;}.SiteContentTable{width:100%;}</style>
    <style id="ProjectStyles" type="text/css">
        .SiteHeader, .SiteHeaderLeft {
            height:45px !important;
            overflow:hidden;
        }
        .SiteContent 
        {
            padding: 0 0 1em 0;
            margin-top:0;
            min-height:225px;
            border-right: 1px solid lightgrey;
            border-left: 1px solid lightgrey;
            border-bottom: 1px solid lightgrey;
        }
        .IE table.MinWidthContent
        {
	        table-layout: auto !important;	
        }
    </style>
    
    
    <meta name="ROBOTS" content="NOINDEX, NOFOLLOW">

    
    
    <meta id="WTProjectName" name="WT.pi" content="unity"/>
    

    <link rel="EditURI" type="application/rsd+xml" title="RSD" href='http://unity.codeplex.com/rsd' />
    <link rel="wlwmanifest" type="application/wlwmanifest+xml" title="WLWManifest" href='/wlwmanifest.xml' />
    
    
        <link rel="alternate" type="application/rss+xml" title="patterns&#32;&#38;&#32;practices&#32;-&#32;Unity" url="http://unity.codeplex.com/project/feeds/rss"/>
    
        
        <link rel="alternate" type="application/rss+xml" title="patterns&#32;&#38;&#32;practices&#32;-&#32;Unity&#32;-&#32;Discussions" url="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fforum%2funity"/>
        
        <link rel="alternate" type="application/rss+xml" title="patterns&#32;&#38;&#32;practices&#32;-&#32;Unity&#32;-&#32;Issues" url="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fworkitem%2funity"/>
        
        <link rel="alternate" type="application/rss+xml" title="patterns&#32;&#38;&#32;practices&#32;-&#32;Unity&#32;-&#32;Downloads" url="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2frelease%2funity"/>
        <link rel="alternate" type="application/rss+xml" title="patterns&#32;&#38;&#32;practices&#32;-&#32;Unity&#32;-&#32;Reviews" url="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2freview%2funity"/>
        
    
        <link rel="alternate" type="application/rss+xml" title="patterns&#32;&#38;&#32;practices&#32;-&#32;Unity&#32;-&#32;Source&#32;code" url="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fsourcecontrol%2funity"/>
        <link rel="alternate" type="application/rss+xml" title="patterns&#32;&#38;&#32;practices&#32;-&#32;Unity&#32;-&#32;Wiki" url="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fwiki%2funity"/>
    
        
    
        <meta content="summary" name="twitter:card" /><meta content="@CodePlex" name="twitter:site" /><meta content="http://unity.codeplex.com/discussions/349202?ProjectName=unity" name="twitter:url" /><meta content="patterns &amp;#38; practices - Unity" name="twitter:title" /><meta content="The Unity Application Block &amp;#40;Unity&amp;#41; is officially under new ownership.&amp;#13;&amp;#10;https&amp;#58;&amp;#47;&amp;#47;github.com&amp;#47;unitycontainer&amp;#47;unity" name="twitter:description" /><meta content="http://www.codeplex.com/Images/codeplex.png" name="twitter:image" /><meta content="CodePlex" property="og:site_name" /><meta content="http://unity.codeplex.com/discussions/349202?ProjectName=unity" property="og:url" /><meta content="object" property="og:type" /><meta content="patterns &amp;#38; practices - Unity" property="og:title" /><meta content="The Unity Application Block &amp;#40;Unity&amp;#41; is officially under new ownership.&amp;#13;&amp;#10;https&amp;#58;&amp;#47;&amp;#47;github.com&amp;#47;unitycontainer&amp;#47;unity" property="og:description" /><meta content="http://www.codeplex.com/Images/codeplex.png" property="og:image" />
        

    </head>
    
    <body>
         
            
        <script src="../assets/ScriptLoader.js" type="text/javascript"></script>
        <form id="aspnetForm" autocomplete="off" method="POST" enctype="multipart/form-data">
            <input name="__RequestVerificationToken" type="hidden" value="6zfdwU6tKCsIYS_TaBVLkkGBLN7UD55P7bxmDXr0CsMBjyunI_3eJNEXkSU98U5hjmw7y8ybVNDxUczrFIJY6K8wcueftC6tnO1EOTcK6jucQMzoge3QEmkMAKr0bK0jgSzBpw2" /><input name="__RequestVerificationToken2" type="hidden" value="__RequestVerificationToken2c6343e35-f31a-4060-8642-46c220803b07" />
            
            <div id="UpdateProgressPanel" class="loading_animation" style="display:none;">
                <div class="row">
                    <h2 class="anim_h2">
                        <span id="UpdateProgressText">Updating...</span>
                        <span id="animatedLoadingIconContainer">
                            <img id="animatedLoadingIcon" src="../assets/loading_animation.gif" class="anim_img"/>
                        </span>
                    </h2>
                </div>
            </div>
            
            <div style="display:none;">
                
                <img id="BlankImage" style="width:0;height:0;" src="../assets/blank.png" onload="self.logoImageLoaded=true;"/>

                <script language="javascript" type="text/javascript">
                    var date = new Date();
                    var timezoneOffset = date.getTimezoneOffset() / 60 * -1;
                    var timezoneOffsetCookie = getCookie("TimezoneOffset");
                    var firstTimeSetTimezoneCookie = false;

                    if (timezoneOffsetCookie == null || timezoneOffsetCookie != timezoneOffset) {
                        firstTimeSetTimezoneCookie = true;
                        document.cookie = "TimezoneOffset=" + timezoneOffset + '; domain=.codeplex.com;expires=Wed, 10 Oct 2018 05:26:18 UTC';
                    }
                </script>
            </div>
            
            
            <div id="banner">
                <div id="message"><strong>This is an archived copy of the original CodePlex Unity Discussion Forum</strong><br />Unity is now on <a href="https://github.com/unitycontainer/">GitHub</a>
                    
                </div>
            </div>
            

            <div id="header">
                <div id="header_wrap" class="row">
                    <p id="logo"><a href="http://www.codeplex.com">Code<span class="semi">Plex</span></a><span id="tagline">Project Hosting for Open Source Software</span></p>
                    

<ul id="nav">

    <li><a href="/site/register/new" id="registerLink" class="ZoomFix">Register</a></li>
    <li ><a class="SignInLink" href="https://www.codeplex.com/site/login?RedirectUrl=http%3a%2f%2funity.codeplex.com%2fdiscussions%2f349202" id="signInLink">Sign In</a></li>
  
    <li class="last"><a class="rss_site_icon" href="http://www.codeplex.com/site/feeds/rss" type="application/rss+xml" rel="Alternate" title="CodePlex Site Activity"></a></li>
</ul>
                    <input id="searchsite" name="searchsite" maxlength="500" type="text" value="" /><span id="search_mag"><a id="submitSearch" name="submitSearch" class="magnify" title="Search" href="#"></a></span>
                    <script>
	$(document).ready(function() {
    var searchButton = $('#submitSearch'),
        searchBar = $('#searchsite');

    // Register our own handler for the search event while we wait for the SearchBox script to load.
    searchButton.bind('click.backupSearchBox', doProjectSearch);
    searchBar.bind('keypress.backupSearchBox', function(e) { if ($keyCode(e) === 13) { doProjectSearch(); return false; } });

    function cleanupSearchEvents() {
        // If the SearchBox was loaded, unregister our handlers.
        if (epx_loaded) {
            searchButton.unbind('.backupSearchBox');
            searchBar.unbind('.backupSearchBox');
        }
    }

    $loadScript('http://i4.services.social.microsoft.com/search/Widgets/SearchBox.jss?appid=1000&scopeid=1&boxId=searchsite&btnId=submitSearch&watermark=Search%20all%20projects&overrideWatermark=true&searchLocation=%2fsite%2fsearch&allowEmptySearch=true&focusOnInit=False&minimumTermLength=3', cleanupSearchEvents);
})
function doProjectSearch() {
    
    var url = '/site/search';

    //If search term is not same as watermark
    if($('#searchsite').val() != 'Search all projects')    
    {        
        url = url + '?query=' + encodeURIComponent($('#searchsite').val());
    }

    
    var callback = '';
    if (callback.length > 0 && eval('typeof ' + callback) != 'undefined')
        url += eval(callback + '()');

    window.location.href = url;
    return false;
}
</script>
                </div>
            </div>
            
            <div id="wrap">
                
    <div id="sub_heading" class="row">
        
        <div id="ProjectHeader">
            <div id="project_title_row" class="row">
                <div id="project_logo">
                    
<a id="AffiliateLink" href="http://msdn.microsoft.com/practices">
    <img id="AffiliateImage" src="../assets/pnp_logo.png" title="patterns&#32;&#38;&#32;practices" />
</a>

    
    <h1 class="text_only"><a href="http://unity.codeplex.com/" id="ProjectTitle1"><div>patterns &#38; practices - Unity</div></a></h1>

                </div>
            </div>
        </div>
        
        <div id="ProjectDetailsDiv">
            
        </div>
		<div class="clear"></div>
        

<ul id="page_box_links">
	<li id="homeTabCell" style="width: 63px;"><a id="homeTab" href="http://unity.codeplex.com/" class="box_home">home</a><div></div></li>
    
	<li id="sourceTabCell" style="width:113px;"><a id="sourceTab" href="http://unity.codeplex.com/SourceControl/latest" class="box_source">source code</a><div></div></li>
    
	<li id="releasesTabCell" style="width:105px;"><a id="releasesTab" href="http://unity.codeplex.com/releases" class="box_downloads">downloads</a><div></div></li>
    
    <li id="documentationTabCell" style="width:143px;"><a id="documentationTab" href="http://unity.codeplex.com/documentation" class="box_documentation">documentation</a><div></div></li>
    
	<li id="discussionTabCell" style="width:112px;"><a id="discussionTab" href="../index.html" class="discussions_active">discussions</a><div></div></li>
    
	<li id="workItemsTabCell" style="width:70px;"><a id="workItemsTab" href="http://unity.codeplex.com/workitem/list/basic" class="box_issue">issues</a><div></div></li>
    
	<li id="peopleTabCell" style="width:70px;"><a id="peopleTab" href="http://unity.codeplex.com/team/view" class="box_people">people</a><div></div></li>
	<li id="licenseTabCell" style="width:70px;"><a id="licenseTab" href="http://unity.codeplex.com/license" class="box_license">license</a><div></div></li>
    
    <span class="stretch"></span>
</ul>

<script type="text/javascript">
    $(document).ready(function () {
        $('#page_box_links').applyLastClassToList();
    });
</script>
		    <div class="clear"></div>
            
     <td>
       

<div>
    
    <div id="actionBar" class="action_bar">
        <ul id="actionBar_ul" class="actionBar_sublinks subtab_right" style="vertical-align: middle;">

            

                <li id="li_actionbar_creatediscussion" data-action-id="actionbar_creatediscussion" data-action-type="Navigate" class="actionBar_sublinks" data-options-id="32e35513-1c80-4480-a419-77eaadea8e1d">
                
                    <script class="options" defer="defer" id="32e35513-1c80-4480-a419-77eaadea8e1d" type="application/json">{"navigate-url":"http://unity.codeplex.com/discussions/create"}</script> 
                    
                    <div class="actionBar_custom_content"></div>

                    <a href="#" id="actionbar_creatediscussion" title="Start a New Thread" class="action_bar_item_link">
                        <img id="img_actionbar_creatediscussion" class="action_bar_item_image" src="../assets/actionbar_newitem.png" style="vertical-align: middle" />
                        New Thread
                    </a>

                </li>

            

                <li id="li_actionbar_subscribe" data-action-id="actionbar_subscribe" data-action-type="PopUp" class="actionBar_sublinks" data-options-id="d2e00ec9-6686-4b05-8f9f-30582ca9bb99">
                
                    <script class="options" defer="defer" id="d2e00ec9-6686-4b05-8f9f-30582ca9bb99" type="application/json">{}</script> 
                    
                    <div class="actionBar_custom_content">

<div id="rssHoverDiv" class="HoverPanel LeftHoverWidth" style="display: none">
        <ul id="3_FeedsPanel" class="RssFeedsPanel">
            <li>
                <a id="ProjectRssLink" href="http://unity.codeplex.com/project/feeds/rss" class="ArrowSmall NoUnderline">All Project Updates</a>
            </li>
            
            <li>
                <a id="DiscussionRssLink" href="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fforum%2funity" class="ArrowSmall NoUnderline">Discussions</a>
            </li>
            
            <li>
                <a id="IssueTrackerRssLink" href="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fworkitem%2funity" class="ArrowSmall NoUnderline">Issue Tracker</a>
            </li>
            
            <li>
                <a id="ReleasesRssLink" href="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2frelease%2funity" class="ArrowSmall NoUnderline">Downloads</a>
            </li>
            <li>
                <a id="ReviewsRssLink" href="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2freview%2funity" class="ArrowSmall NoUnderline">Reviews</a>
            </li>
            
            <li>
                <a id="SourceControlRssLink" href="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fsourcecontrol%2funity" class="ArrowSmall NoUnderline">Source Code</a>
            </li>
            <li>
                <a id="WikiRssLink" href="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fwiki%2funity" class="ArrowSmall NoUnderline">Wiki &amp; Documentation</a>
            </li>
        </ul>
</div></div>

                    <a href="#" id="actionbar_subscribe" title="Subscribe to project updates in RSS feeds." class="action_bar_item_link">
                        <img id="img_actionbar_subscribe" class="action_bar_item_image" src="../assets/actionbar_subscribe.png" style="vertical-align: middle" />
                        Subscribe
                    </a>

                </li>

            
        </ul>
    </div>
</div>
     </td>

        

    </div>
    
    
<div class="Threads">
    <div class="ViewThread">
        
        
        
            <h1 class="page_title WordWrapBreakWord">
                Examine content of IMethodReturn for auditing AOP
            </h1>

            <!-- Private Discussion header -->
            

            <!-- Posts List Header: Topics and Wiki Link -->
            <table class="PostsListHeader">
                <tr>
                    <td>
                     
                    </td>
                    <td>
                        <div class="WikiLink">
                            <span title="Paste this into a wiki page to link to this discussion">
                                Wiki Link: [discussion:349202]
                            </span>
                        </div>
                    </td>
                </tr>
            </table>

            <!-- The list of posts -->
            

<div id="discussionsPostList" data-options-id="c797400f-ead3-4164-94d1-b96e5e403b6f">
    <script class="options" defer="defer" id="c797400f-ead3-4164-94d1-b96e5e403b6f" type="application/json">{"threadUrl":"http://unity.codeplex.com/discussions/349202","showEditor":false,"checkImageUrl":"../assets/check_answer.png"}</script>

    <div class="Posts" style="margin-top: 10px;">
    

<table cellpadding="0" cellspacing="0" style="width: 100%; margin-bottom: 0px; table-layout:fixed">
    

<tr id="PostPanel" class="Post" d:forid="812572">
    <td id="PostDetailsCell_812572" style="vertical-align: top; border: solid #BBB 1px; border-bottom: none; border-left: none; border-top: none; width: 114px" class="Post">
        <div class="Details">
            <a name="post812572"></a>
            <div class="UserName" style="white-space: pre-wrap; word-wrap: break-word;"><a class="UserProfileLink" href="http://www.codeplex.com/site/users/view/Denler">Denler</a></div>
            <div class="UserRole"></div>
            <div style="white-space: normal" class="SubText"><span class="smartDate" title="3/19/2012 4:44:38 PM" LocalTimeTicks="1332200678">Mar 19, 2012 at 4:44 PM</span></div>
            
        </div>
    </td>
    <td id="PostContent_812572" style="width: 100%; vertical-align: top;" 
        class=" discussionPost discussionListContent WordWrapBreakWord Post " 
        data-markdown="&#32;I&#32;have&#32;implemented&#32;a&#32;container&#32;on&#32;an&#32;interface&#32;to&#32;our&#32;repository.&#32;I&#32;have&#32;configured&#32;the&#32;container&#32;with&#32;interception&#32;and&#32;injected&#32;a&#32;class&#32;in&#32;the&#32;chain&#32;that&#32;inherits&#32;IInterceptionBehavior.&#32;This&#32;all&#32;works&#32;as&#32;expected.&#32;The&#32;intercepted&#32;methods&#32;all&#32;return&#32;complex&#32;objects&#32;with&#32;a&#32;custom&#32;attribute&#32;on&#32;the&#32;properties&#32;that&#32;require&#32;an&#32;entry&#32;in&#32;an&#32;audit&#32;repository.&#32;&#40;See&#32;objects&#32;below&#41;.&#32;What&#32;I&#32;need&#32;to&#32;do&#32;is&#32;extract&#32;each&#32;property&#32;and&#32;the&#32;content&#32;of&#32;it&#32;as&#32;well&#32;as&#32;the&#32;properties&#32;on&#32;the&#32;base&#32;class&#32;that&#32;also&#32;have&#32;the&#32;attribute.&#32;Each&#32;property&#32;needs&#32;to&#32;be&#32;checked&#32;for&#32;the&#32;presence&#32;of&#32;an&#32;attribute&#32;modifier&#32;to&#32;suppress&#32;the&#32;audit&#32;when&#32;appropriate.&#32;Any&#32;guidance&#32;on&#32;how&#32;to&#32;approach&#32;this&#32;via&#32;access&#32;to&#32;the&#32;object&#32;contained&#32;within&#32;the&#32;IMethodReturn.ReturnValue&#32;will&#32;be&#32;appreciated.&#32;This&#32;is&#32;part&#32;of&#38;nbsp&#59;one&#32;possible&#32;method&#32;response&#32;object&#32;&#38;nbsp&#59;&#38;nbsp&#59;&#32;&#91;DataContract&#93;&#32;&#38;nbsp&#59;&#38;nbsp&#59;&#32;public&#32;class&#32;GetResponseBase&#32;&#38;nbsp&#59;&#38;nbsp&#59;&#32;&#123;&#32;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#32;&#38;nbsp&#59;&#91;DataMember&#40;Name&#32;&#61;&#32;&#38;quot&#59;TotalQueryRows&#38;quot&#59;&#41;&#93;&#32;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#32;&#38;nbsp&#59;public&#32;int&#32;TotalQueryRows&#32;&#123;&#32;get&#59;&#32;set&#59;&#32;&#125;&#32;&#38;nbsp&#59;&#38;nbsp&#59;&#32;&#125;&#32;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#32;&#91;DataContract&#93;&#32;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#32;public&#32;class&#32;GetCompanyResponse&#32;&#58;&#32;GetResponseBase&#32;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#32;&#123;&#32;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#32;&#91;DataMember&#40;Name&#32;&#61;&#32;&#38;quot&#59;CompanyList&#38;quot&#59;&#41;&#93;&#32;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#32;public&#32;IEnumerable&#38;lt&#59;Company&#38;gt&#59;&#32;CompanyList&#32;&#123;&#32;get&#59;&#32;set&#59;&#32;&#125;&#32;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#32;&#125;&#32;&#38;nbsp&#59;This&#32;is&#32;part&#32;of&#32;the&#32;object&#32;contained&#32;in&#32;the&#32;List&#32;of&#32;objects&#32;returned&#32;by&#32;the&#32;method&#32;&#38;nbsp&#59;&#38;nbsp&#59;&#32;&#91;DataContract&#93;&#32;&#38;nbsp&#59;&#38;nbsp&#59;&#32;public&#32;class&#32;DataEntityBase&#32;&#38;nbsp&#59;&#38;nbsp&#59;&#32;&#123;&#32;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#32;&#91;DataMember&#93;&#32;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#32;&#91;XmlElement&#40;&#38;quot&#59;UserAccessing&#38;quot&#59;&#41;&#93;&#32;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#32;&#91;ScaffoldColumn&#40;false&#41;&#93;&#32;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#32;&#91;AuditThis&#93;&#32;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#32;public&#32;int&#32;UserAccessing&#32;&#123;&#32;get&#59;&#32;set&#59;&#32;&#125;&#32;&#38;nbsp&#59;&#38;nbsp&#59;&#32;&#125;&#32;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#32;&#91;DataContract&#93;&#32;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#32;public&#32;partial&#32;class&#32;Company&#32;&#58;&#32;DataEntityBase&#32;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#32;&#123;&#32;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#32;&#91;DataMember&#93;&#32;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#32;&#32;&#38;nbsp&#59;&#91;AuditThis&#40;SuppressAudit&#32;&#61;&#32;true&#32;&#41;&#93;&#32;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#32;public&#32;Int32&#63;&#32;CompanyCode&#32;&#123;&#32;get&#59;&#32;set&#59;&#32;&#125;&#32;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#32;&#91;DataMember&#93;&#32;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#32;public&#32;string&#32;CompanyName&#32;&#123;&#32;get&#59;&#32;set&#59;&#32;&#125;&#32;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#32;&#125;&#32;&#38;nbsp&#59;&#32;This&#32;is&#32;the&#32;audit&#32;attribute&#32;declaration&#32;for&#32;selected&#32;properties.&#32;The&#32;default&#32;is&#32;to&#32;audit&#32;everything&#32;and&#32;the&#32;Boolean&#32;on&#32;each&#32;property&#32;allows&#32;for&#32;conscious&#32;suppression&#32;of&#32;an&#32;audit&#32;to&#32;suppress&#32;&#38;lsquo&#59;noise&#38;rsquo&#59;&#32;when&#32;appropriate.&#32;&#38;nbsp&#59;&#38;nbsp&#59;&#32;&#91;AttributeUsage&#40;AttributeTargets.All&#41;&#93;&#32;&#38;nbsp&#59;&#38;nbsp&#59;&#32;public&#32;class&#32;AuditThis&#58;&#32;Attribute&#32;&#38;nbsp&#59;&#38;nbsp&#59;&#32;&#123;&#32;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#32;public&#32;bool&#32;SuppressAudit&#123;get&#59;set&#59;&#125;&#32;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#32;public&#32;string&#32;PropertyNameOverride&#32;&#123;&#32;get&#59;&#32;set&#59;&#32;&#125;&#32;&#38;nbsp&#59;&#38;nbsp&#59;&#32;&#125;&#32;">
        
<p>I have implemented a container on an interface to our repository. I have configured the container with interception and injected a class in the chain that inherits IInterceptionBehavior. This all works as expected.</p>
<p>The intercepted methods all return complex objects with a custom attribute on the properties that require an entry in an audit repository. (See objects below).</p>
<p>What I need to do is extract each property and the content of it as well as the properties on the base class that also have the attribute. Each property needs to be checked for the presence of an attribute modifier to suppress the audit when appropriate.</p>
<p>Any guidance on how to approach this via access to the object contained within the IMethodReturn.ReturnValue will be appreciated.</p>
<p>This is part of&nbsp;one possible method response object</p>
<p>&nbsp;&nbsp; [DataContract]<br>
&nbsp;&nbsp; public class GetResponseBase<br>
&nbsp;&nbsp; {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;[DataMember(Name = &quot;TotalQueryRows&quot;)]<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;public int TotalQueryRows { get; set; }<br>
&nbsp;&nbsp; }</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [DataContract]<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public class GetCompanyResponse : GetResponseBase<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [DataMember(Name = &quot;CompanyList&quot;)]<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public IEnumerable&lt;Company&gt; CompanyList { get; set; }<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
<p>&nbsp;This is part of the object contained in the List of objects returned by the method</p>
<p>&nbsp;&nbsp; [DataContract]<br>
&nbsp;&nbsp; public class DataEntityBase<br>
&nbsp;&nbsp; {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [DataMember]<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [XmlElement(&quot;UserAccessing&quot;)]<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [ScaffoldColumn(false)]<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong> [AuditThis]</strong><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public int UserAccessing { get; set; }<br>
&nbsp;&nbsp; }</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [DataContract]<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public partial class Company : DataEntityBase<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [DataMember]<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>
&nbsp;[AuditThis<span style="font-family:Consolas; font-size:x-small"><span style="font-family:Consolas; font-size:x-small"><span style="font-family:Consolas; font-size:x-small">(SuppressAudit =
</span></span></span><span style="font-family:Consolas; color:#0000ff; font-size:x-small"><span style="font-family:Consolas; color:#0000ff; font-size:x-small"><span style="font-family:Consolas; color:#0000ff; font-size:x-small">true</span></span></span><span style="font-family:Consolas; font-size:x-small">
<span style="font-family:Consolas; font-size:x-small">)</span></span>]</strong><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public Int32? CompanyCode { get; set; }<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [DataMember]<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public string CompanyName { get; set; }<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>
&nbsp;</p>
<p>This is the audit attribute declaration for selected properties. The default is to audit everything and the Boolean on each property allows for conscious suppression of an audit to suppress &lsquo;noise&rsquo; when appropriate.</p>
<p>&nbsp;&nbsp; [AttributeUsage(AttributeTargets.All)]<br>
&nbsp;&nbsp; public class AuditThis: Attribute</p>
<p>&nbsp;&nbsp; {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public bool SuppressAudit{get;set;}<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public string PropertyNameOverride { get; set; }</p>
<p>&nbsp;&nbsp; }</p>

        
    </td>
    <td style="vertical-align: top; width: 134px;" class="Post ">
        
        <div id="Options_812572" class="Options" >
            
        </div>
        
    </td>
</tr>

        <tr><td colspan="3"><div class="PostSeparator"></div></td></tr>
        

<tr id="PostPanel" class="Post" d:forid="812787">
    <td id="PostDetailsCell_812787" style="vertical-align: top; border: solid #BBB 1px; border-bottom: none; border-left: none; border-top: none; width: 114px" class="Post">
        <div class="Details">
            <a name="post812787"></a>
            <div class="UserName" style="white-space: pre-wrap; word-wrap: break-word;"><a class="UserProfileLink" href="http://www.codeplex.com/site/users/view/randylevy">randylevy</a></div>
            <div class="UserRole"></div>
            <div style="white-space: normal" class="SubText"><span class="smartDate" title="3/20/2012 4:07:06 AM" LocalTimeTicks="1332241626">Mar 20, 2012 at 4:07 AM</span></div>
            
        </div>
    </td>
    <td id="PostContent_812787" style="width: 100%; vertical-align: top;" 
        class=" discussionPost discussionListContent WordWrapBreakWord Post " 
        data-markdown="You&#32;should&#32;be&#32;able&#32;to&#32;do&#32;this.&#32;&#38;nbsp&#59;I&#32;think&#32;you&#32;are&#32;talking&#32;about&#32;doing&#32;something&#32;like&#32;the&#32;following&#58;&#32;&#32;IMethodReturn&#32;ICallHandler.Invoke&#40;IMethodInvocation&#32;input,&#32;GetNextHandlerDelegate&#32;getNext&#41;&#32;&#123;&#32;IMethodReturn&#32;result&#32;&#61;&#32;getNext&#40;&#41;&#40;input,&#32;getNext&#41;&#59;&#32;foreach&#32;&#40;var&#32;property&#32;in&#32;result.ReturnValue.GetType&#40;&#41;.GetProperties&#40;&#41;&#41;&#32;&#123;&#32;var&#32;auditAttribute&#32;&#61;&#32;property.GetCustomAttributes&#40;typeof&#40;AuditThis&#41;,&#32;true&#41;&#59;&#32;if&#32;&#40;auditAttribute&#32;&#33;&#61;&#32;null&#32;&#38;amp&#59;&#38;amp&#59;&#32;auditAttribute.Count&#40;&#41;&#32;&#61;&#61;&#32;1&#41;&#32;&#123;&#32;if&#32;&#40;&#40;&#40;AuditThis&#41;auditAttribute&#91;0&#93;&#41;.SuppressAudit&#41;&#32;&#123;&#32;Console.WriteLine&#40;&#34;Supressing&#32;Audit&#32;for&#32;property&#32;&#34;&#32;&#43;&#32;property.Name&#41;&#59;&#32;&#125;&#32;else&#32;&#123;&#32;Console.WriteLine&#40;&#34;Auditing&#32;property&#32;&#34;&#32;&#43;&#32;property.Name&#32;&#43;&#32;&#34;.&#32;The&#32;value&#32;is&#32;&#34;&#32;&#43;&#32;property.GetValue&#40;result.ReturnValue,&#32;null&#41;&#32;&#63;&#63;&#32;&#34;&#34;&#41;&#59;&#32;&#125;&#32;&#125;&#32;else&#32;&#123;&#32;Console.WriteLine&#40;&#34;No&#32;Audit&#32;Attribute&#32;for&#32;property&#32;&#34;&#32;&#43;&#32;property.Name&#41;&#59;&#32;&#125;&#32;&#125;&#32;return&#32;result&#59;&#32;&#125;&#32;&#32;&#32;The&#32;above&#32;example&#32;uses&#32;is&#32;based&#32;on&#32;a&#32;CallHandler&#32;but&#32;should&#32;be&#32;virtually&#32;the&#32;same&#32;for&#38;nbsp&#59;IInterceptionBehavior.&#38;nbsp&#59;&#32;The&#32;inheritance&#32;tree&#32;is&#32;already&#32;checked&#32;but&#32;you&#32;will&#32;have&#32;to&#32;account&#32;for&#32;the&#32;return&#32;object&#32;containing&#32;other&#32;objects&#32;that&#32;must&#32;also&#32;be&#32;checked&#32;for&#32;the&#32;Audit&#32;attribute&#32;or&#32;if&#32;there&#32;are&#32;properties&#32;that&#32;have&#32;indexers&#38;nbsp&#59;etc.&#32;&#38;nbsp&#59;&#32;--Randy&#32;LevyEnterprise&#32;Library&#32;support&#32;engineerentlib.support&#64;live.com&#38;nbsp&#59;">
        
<p>You should be able to do this. &nbsp;I think you are talking about doing something like the following:</p>
<div style="color:black; background-color:white">
<pre>IMethodReturn ICallHandler.Invoke(IMethodInvocation input, GetNextHandlerDelegate getNext)
{
    IMethodReturn result = getNext()(input, getNext);

    <span style="color:blue">foreach</span> (<span style="color:blue">var</span> property <span style="color:blue">in</span> result.ReturnValue.GetType().GetProperties())
    {
        <span style="color:blue">var</span> auditAttribute = property.GetCustomAttributes(<span style="color:blue">typeof</span>(AuditThis), <span style="color:blue">true</span>);

        <span style="color:blue">if</span> (auditAttribute != <span style="color:blue">null</span> &amp;&amp; auditAttribute.Count() == 1)
        {
            <span style="color:blue">if</span> (((AuditThis)auditAttribute[0]).SuppressAudit)
            {
                Console.WriteLine(<span style="color:#a31515">&quot;Supressing Audit for property &quot;</span> &#43; property.Name);
            }
            <span style="color:blue">else</span>
            {
                Console.WriteLine(<span style="color:#a31515">&quot;Auditing property &quot;</span> &#43; property.Name &#43; <span style="color:#a31515">&quot;.   The value is &quot;</span> &#43; 
                    property.GetValue(result.ReturnValue, <span style="color:blue">null</span>) ?? <span style="color:#a31515">&quot;&quot;</span>);                        
            }
        }
        <span style="color:blue">else</span>
        {
            Console.WriteLine(<span style="color:#a31515">&quot;No Audit Attribute for property &quot;</span> &#43; property.Name);
        }
    }

    <span style="color:blue">return</span> result;
}
</pre>
</div>
<p>The above example uses is based on a CallHandler but should be virtually the same for&nbsp;<span>IInterceptionBehavior.</span>&nbsp;</p>
<p>The inheritance tree is already checked but you will have to account for the return object containing other objects that must also be checked for the Audit attribute or if there are properties that have indexers&nbsp;etc. &nbsp;</p>
<p>--<br>
Randy Levy<br>
Enterprise Library support engineer<br>
<a href="mailto:entlib.support@live.com" rel="nofollow">entlib.support@live.com</a>&nbsp;</p>

        
    </td>
    <td style="vertical-align: top; width: 134px;" class="Post ">
        
        <div id="Options_812787" class="Options" >
            
        </div>
        
    </td>
</tr>

        <tr><td colspan="3"><div class="PostSeparator"></div></td></tr>
        

<tr id="PostPanel" class="Post" d:forid="813200">
    <td id="PostDetailsCell_813200" style="vertical-align: top; border: solid #BBB 1px; border-bottom: none; border-left: none; border-top: none; width: 114px" class="Post">
        <div class="Details">
            <a name="post813200"></a>
            <div class="UserName" style="white-space: pre-wrap; word-wrap: break-word;"><a class="UserProfileLink" href="http://www.codeplex.com/site/users/view/Denler">Denler</a></div>
            <div class="UserRole"></div>
            <div style="white-space: normal" class="SubText"><span class="smartDate" title="3/20/2012 8:27:54 PM" LocalTimeTicks="1332300474">Mar 20, 2012 at 8:27 PM</span></div>
            
        </div>
    </td>
    <td id="PostContent_813200" style="width: 100%; vertical-align: top;" 
        class=" discussionPost discussionListContent WordWrapBreakWord Post " 
        data-markdown="Randy,&#32;Thanks&#32;so&#32;much&#32;for&#32;the&#32;quick&#32;response.&#32;I&#32;was&#32;able&#32;to&#32;use&#32;your&#32;example&#32;to&#32;make&#32;some&#32;progress.&#32;The&#32;issue&#32;I&#32;am&#32;having&#32;is&#32;to&#32;get&#32;deeper&#32;into&#32;the&#32;ReturnValue.&#32;It&#32;appears&#32;that&#32;IMethodReturn&#32;always&#32;has&#32;three&#32;properties&#32;&#40;&#38;ldquo&#59;Capacity&#38;rdquo&#59;&#91;Int32&#93;,&#32;&#38;ldquo&#59;Count&#38;rdquo&#59;&#91;Int32&#93;,&#32;and&#32;&#38;ldquo&#59;Item&#38;rdquo&#59;&#91;MyObject&#93;&#41;.&#32;&#38;lsquo&#59;Item&#38;rsquo&#59;&#32;has&#32;the&#32;complex&#32;object&#32;I&#32;need&#32;to&#32;extract&#32;the&#32;content&#32;from.&#32;It&#32;is&#32;not&#32;clear&#32;to&#32;me&#32;if&#32;I&#32;can&#32;get&#32;the&#32;values&#32;from&#32;the&#32;properties&#32;within&#32;the&#32;objects&#32;contained&#32;in&#32;the&#32;&#39;Item&#39;&#32;property&#32;of&#32;the&#32;IMethodReturn.&#32;I&#32;am&#32;currently&#32;digging&#32;into&#32;the&#32;properties&#32;of&#32;the&#32;&#39;properties&#32;to&#32;see&#32;if&#32;thre&#32;is&#32;a&#32;way&#32;to&#32;discriminate&#32;the&#32;complex&#32;objects&#32;from&#32;the&#32;simple&#32;one&#32;without&#32;too&#32;much&#32;code.&#32;IsPrimitive&#38;nbsp&#59;&#32;does&#32;not&#32;work&#38;nbsp&#59;universally&#32;since&#32;Int32&#32;return&#32;true&#32;but&#32;a&#32;nullable&#32;Int32&#32;returns&#32;false.&#32;Anyway,&#32;hopefullyI&#32;can&#32;get&#32;the&#32;desired&#32;behavior.&#32;I&#39;ll&#32;follow&#32;up&#32;with&#32;progress.&#32;Thanks&#32;again">
        
<p>Randy,</p>
<p>Thanks so much for the quick response.</p>
<p>I was able to use your example to make some progress.</p>
<p>The issue I am having is to get deeper into the ReturnValue. It appears that IMethodReturn always has three properties (&ldquo;Capacity&rdquo;[Int32], &ldquo;Count&rdquo;[Int32], and &ldquo;Item&rdquo;[MyObject]).</p>
<p><span style="font-size:11pt">&lsquo;Item&rsquo; has the complex object I need to extract the content from. It is not clear to me if I can get the values from the properties within the objects contained in the 'Item' property of the IMethodReturn. I am currently
 digging into the properties of the 'properties to see if thre is a way to discriminate the complex objects from the simple one without too much code. Is<span style="color:black; font-size:11pt">Primitive&nbsp;</span> does not work&nbsp;universally since Int32
 return true but a nullable Int32 returns false. Anyway, hopefullyI can get the desired behavior. I'll follow up with progress.</span></p>
<p><span style="font-size:11pt">Thanks again</span></p>

        
    </td>
    <td style="vertical-align: top; width: 134px;" class="Post ">
        
        <div id="Options_813200" class="Options" >
            
        </div>
        
    </td>
</tr>

        <tr><td colspan="3"><div class="PostSeparator"></div></td></tr>
        

<tr id="PostPanel" class="Post" d:forid="813245">
    <td id="PostDetailsCell_813245" style="vertical-align: top; border: solid #BBB 1px; border-bottom: none; border-left: none; border-top: none; width: 114px" class="Post">
        <div class="Details">
            <a name="post813245"></a>
            <div class="UserName" style="white-space: pre-wrap; word-wrap: break-word;"><a class="UserProfileLink" href="http://www.codeplex.com/site/users/view/randylevy">randylevy</a></div>
            <div class="UserRole"></div>
            <div style="white-space: normal" class="SubText"><span class="smartDate" title="3/20/2012 10:00:12 PM" LocalTimeTicks="1332306012">Mar 20, 2012 at 10:00 PM</span></div>
            
        </div>
    </td>
    <td id="PostContent_813245" style="width: 100%; vertical-align: top;" 
        class=" discussionPost discussionListContent WordWrapBreakWord Post " 
        data-markdown="IMethodReturn&#38;nbsp&#59;returns&#32;four&#32;properties&#58;&#32;Exception,&#32;InvocationContext,&#32;Outputs,&#32;and&#32;ReturnValue.&#32;The&#32;ReturnValue&#32;is&#32;what&#32;you&#32;are&#32;interested&#32;in&#32;&#40;I&#32;think&#41;&#32;and&#32;it&#32;will&#32;be&#32;whatever&#32;type&#32;the&#32;object&#32;the&#32;method&#32;is&#32;returning&#32;is.&#32;&#38;nbsp&#59;I&#32;think&#32;you&#32;will&#32;have&#32;to&#32;walk&#32;the&#32;object&#32;graph&#32;to&#32;extract&#32;all&#32;potential&#32;properties&#32;that&#32;can&#32;be&#32;audited.&#32;--Randy&#32;LevyEnterprise&#32;Library&#32;support&#32;engineerentlib.support&#64;live.com&#38;nbsp&#59;">
        
<p><a href="http://msdn.microsoft.com/en-us/library/microsoft.practices.unity.interceptionextension.imethodreturn_members(v=pandp.20).aspx" target="_blank" rel="nofollow">IMethodReturn</a>&nbsp;returns four properties: Exception, InvocationContext, Outputs, and ReturnValue.</p>
<p>The <a href="http://msdn.microsoft.com/en-us/library/microsoft.practices.unity.interceptionextension.imethodreturn.returnvalue(v=pandp.20).aspx" target="_blank" rel="nofollow">
ReturnValue</a> is what you are interested in (I think) and it will be whatever type the object the method is returning is. &nbsp;I think you will have to walk the object graph to extract all potential properties that can be audited.</p>
<p><span>--</span><br>
<span>Randy Levy</span><br>
<span>Enterprise Library support engineer</span><br>
<a href="mailto:entlib.support@live.com" rel="nofollow">entlib.support@live.com</a><span>&nbsp;</span></p>

        
    </td>
    <td style="vertical-align: top; width: 134px;" class="Post ">
        
        <div id="Options_813245" class="Options" >
            
        </div>
        
    </td>
</tr>

        <tr><td colspan="3"><div class="PostSeparator"></div></td></tr>
        

<tr id="PostPanel" class="Post" d:forid="813284">
    <td id="PostDetailsCell_813284" style="vertical-align: top; border: solid #BBB 1px; border-bottom: none; border-left: none; border-top: none; width: 114px" class="Post">
        <div class="Details">
            <a name="post813284"></a>
            <div class="UserName" style="white-space: pre-wrap; word-wrap: break-word;"><a class="UserProfileLink" href="http://www.codeplex.com/site/users/view/denler">denler</a></div>
            <div class="UserRole"></div>
            <div style="white-space: normal" class="SubText"><span class="smartDate" title="3/20/2012 11:42:54 PM" LocalTimeTicks="1332312174">Mar 20, 2012 at 11:42 PM</span></div>
            
        </div>
    </td>
    <td id="PostContent_813284" style="width: 100%; vertical-align: top;" 
        class=" discussionPost discussionListContent WordWrapBreakWord Post " 
        data-markdown="Randy,&#32;I&#32;misspoke.&#32;When&#32;I&#32;said&#32;IMethodReturn,&#32;I&#32;meant&#32;the&#32;ReturnValue&#32;property&#32;of&#32;IMethodReturn,&#38;nbsp&#59;which&#32;has&#32;the&#32;three&#32;properties&#32;I&#32;referred&#32;to.&#32;Processing&#32;the&#32;tree&#32;is&#32;not&#32;the&#32;proble.&#32;That&#32;should&#32;be&#32;able&#32;to&#32;be&#32;done&#32;recursively.&#32;The&#32;issues&#32;I&#32;am&#32;having&#32;with&#32;the&#32;object&#32;graph&#32;is&#32;that,&#32;as&#32;I&#32;indicated,&#32;it&#32;does&#32;not&#32;appear&#32;trivial&#32;to&#32;identify&#32;a&#32;basic&#32;property&#32;in&#32;the&#32;graph&#32;from&#32;which&#32;to&#32;extract&#32;tyhe&#32;value&#32;for&#32;auditing.&#32;Things&#32;like&#32;IsPrimitive&#32;do&#32;not&#32;yield&#32;the&#32;same&#32;result&#32;when&#32;a&#32;reference&#32;type&#32;like&#32;Int32&#32;is&#32;not&#32;the&#32;seen&#32;as&#32;the&#32;same&#32;as&#32;a&#32;nullable&#32;Int32.&#32;So,&#32;is&#32;there&#32;any&#32;uncomplicated&#32;way&#32;to&#32;identify&#32;the&#32;&#39;primitive&#39;&#32;properties&#32;in&#32;the&#32;object&#32;graph,&#32;or&#32;do&#32;I&#32;need&#32;to&#32;do&#32;a&#32;lot&#32;of&#32;type&#32;interrogation&#32;in&#32;traversing&#32;the&#32;graph&#63;&#32;Thanks&#32;again&#32;for&#32;your&#32;help.&#32;It&#32;has&#32;saved&#32;me&#32;time&#32;and&#32;I&#32;appreciate&#32;it.">
        
<p>Randy,</p>
<p>I misspoke. When I said IMethodReturn, I meant the ReturnValue property of IMethodReturn,&nbsp;which has the three properties I referred to.</p>
<p>Processing the tree is not the proble. That should be able to be done <span style="color:black; font-size:10pt">
recursively</span>. The issues I am having with the object graph is that, as I <span style="color:black; font-size:10pt">
indicated</span>, it does not appear <span style="color:black; font-size:10pt">trivial
</span>to identify a basic property in the graph from which to extract tyhe value for auditing. Things like IsPrimitive do not yield the same result when a reference type like Int32 is not the seen as the same as a nullable Int32. So, is there any uncomplicated
 way to identify the 'primitive' properties in the object graph, or do I need to do a lot of type
<span style="color:black; font-size:10pt">interrogation </span>in traversing the graph?</p>
<p>Thanks again for your help. It has saved me time and I appreciate it.</p>

        
    </td>
    <td style="vertical-align: top; width: 134px;" class="Post ">
        
        <div id="Options_813284" class="Options" >
            
        </div>
        
    </td>
</tr>

</table>
    </div>

    
        <div class="StandardMarginTop">
            <a id="SignInToAddCommentLink" href="https://www.codeplex.com/site/login?RedirectUrl=http%3a%2f%2funity.codeplex.com%2fdiscussions%2f349202">
                Sign in to post message or set email notifications
            </a>
        </div>
    


    <div id="PostEditorContainer">
        <a name="editor"></a>
        <div id="Editor" style="display: none;">
            

<div class="MarkdownEditor" data-options-id="2908c023-b4cc-4cc9-ac88-8d92baf1fa69">
    <script class="options" defer="defer" id="2908c023-b4cc-4cc9-ac88-8d92baf1fa69" type="application/json">{"maxLength":10000,"styleSheetLocation":""}</script>

    <div class="MarkdownEditorControls">
        <a href="#" tabindex="-1" class="control md_help" title="Markdown Syntax Guide"></a>
        <div class="control md_divider"></div>
        <a href="#" tabindex="-1" class="control md_header" title="Insert Header (CTRL + H)"></a>
        <a href="#" tabindex="-1" class="control md_code" title="Insert Code (CTRL + K)"></a>
        <a href="#" tabindex="-1" class="control md_quote" title="Insert Quote (CTRL + Q)"></a>
        <a href="#" tabindex="-1" class="control md_img" title="Insert Img (CTRL + G)"></a>
        <a href="#" tabindex="-1" class="control md_link" title="Insert Link (CTRL + L)"></a>
        <a href="#" tabindex="-1" class="control md_ulist" title="Unordered List (CTRL + U)"></a>
        <a href="#" tabindex="-1" class="control md_olist" title="Ordered List (CTRL + O)"></a>
        <a href="#" tabindex="-1" class="control md_italics" title="Italic Text (CTRL + I)"></a>
        <a href="#" tabindex="-1" class="control md_bold" title="Bold Text (CTRL + B)"></a>
    </div>

    

<div class="tab_control">
    <!-- Generate the basic HTML for the tabs. -->
    
        <div id="Compose"
              class="tab selected"
              data-custom-header-id=""
              data-tab-contents-id="compose_contents_db94daed-8edd-4c36-9f5f-21e6c897db14">
            Compose
        </div>
    
        <div id="Preview"
              class="tab "
              data-custom-header-id=""
              data-tab-contents-id="preview_contents_e973d73e-412e-463f-af0d-45d274b2b675">
            Preview
        </div>
    
    <div class="clear"></div>
</div>


    <div id="compose_contents_db94daed-8edd-4c36-9f5f-21e6c897db14" class="compose_tab_content">
        <textarea class=" MarkdownEditorDimensions" cols="20" id="MarkdownEditor" name="content" rows="2">
</textarea>
        <div class="ClearBoth"></div>

        <div class="markdownGuide" style="display: none">
            <table>
                <tr>
                    <td class="markdownGuideColumn">
                        <h1>Text Formatting</h1>
                        <div># Header 1</div>
                        <div>## Header 2</div>
                        <br />
                        <div>*italics* (or _italics_)</div>
                        <div>**bold** (or __bold__)</div>
                    </td>
                    <td class="markdownGuideColumn">
                        <h1>Lists</h1>
                        <div>* Unordered List</div>
                        <div>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp * SubItem</div>
                        <br />
                        <div>1. Ordered List</div>
                        <div>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp 1. SubItem</div>
                    </td>
                    <td class="markdownGuideColumn">
                        <h1>Quotes</h1>
                        <div>> Lorem ipsum</div>
                        <div>dolor sitamet </div>
                        <div>non. Lectus at</div>
                        <div>nam nunc...</div>
                    </td>
                    <td class="markdownGuideColumn">
                        <h1>Code</h1>
                        <div>`Inline Code`</div>
                        <br />
                        <div>``` C#</div>
                        <div>if (foo==bar)</div>
                        <div>&nbsp&nbsp&nbsp&nbsp&nbsp&nbspbar++</div>
                        <div>```</div>
                    </td>
                    <td class="markdownGuideColumn">
                        <h1>References</h1>
                        <div>[Link Text](URL)</div>
                        <br />
                        <div>![Image](URL)</div>
                        <br />
                        <a class="Reference" target="_blank" href="http://codeplex.codeplex.com/wikipage?title=Markdown&referringTitle=Documentation">Markdown Reference</a>
                    </td>
                </tr>
            </table>
        </div>
    </div>
    <div id="preview_contents_e973d73e-412e-463f-af0d-45d274b2b675" class="preview_tab_content markDownOutput">
        
            <div></div>
        
    </div>
    <div class="clear"></div>
</div>

            
            <div class="row" id="recaptcha_row">
                
<script type="text/javascript">
    $(document).ready(function () {
        $('#recaptcha_reload').attr('src', '../assets/recaptcha_refresh.png');
        $('#recaptcha_switch_audio').attr('src', '../assets/recaptcha_audio.png');
        $('#recaptcha_switch_img').attr('src', '../assets/recaptcha_text.png');
        $('#recaptcha_whatsthis').attr('src', '../assets/recaptcha_help.png');
        $('#recaptcha_area tr:first').attr('height', '35');
    });
</script>

                <div class="clear"></div>
                <span id="ReCaptchaError"></span>
            </div>
            <div style="padding-top: 6px;">
                <input type="button" id="SaveButton" value="Save" class="ok" />
                <input type="button" id="CancelButton" value="Cancel" class="cancel" />
                <div class="clear"></div>
            </div>
        </div>
    </div>
</div>

<div id="DeletePostPanel" class="modal" style="display:none">
    <div class="row">
        <h2>Delete Post <a href="javascript:return false;" class="close">X</a></h2>
    </div>
    <div class="modal_info">
        <p>Are you sure you want to delete this post? You will not be able to recover it later.</p>
        <p class="modal_buttons">
            <input type="button" id="ClosePostCancel" value="Cancel" class="cancel" />
            <input type="button" id="ClosePostOk" value="Delete" class="ok" />
        </p>
        <div class="ClearBoth"></div>
    </div>
</div>
        
            <!-- Email notification / Subscription details -->
            
    </div>
</div>
    
<div id="DeleteThreadPanel" class="modal" style="display:none">
    <div class="row">
        <h2>Delete Thread <a href="javascript:return false;" class="close">X</a></h2>
    </div>
    <div class="modal_info">
        <p>Are you sure you want to delete this thread? You will not be able to recover it later.</p>
        <p class="modal_buttons">
            <input type="button" id="CloseThreadCancel" value="Cancel" class="cancel" />
            <input type="button" id="CloseThreadOk" value="Delete" class="ok" />
        </p>
        <div class="ClearBoth"></div>
    </div>
</div>

<script type="text/javascript" language="javascript">
    $(function () {

        $('#recaptcha_response_field')
            .bind('keypress', function (event) { return $submitKeyPressElement(this, event); });


        if ($('#DeleteThreadLink')) {
            $('#DeleteThreadLink').click(function () {
                OpenDialog('#DeleteThreadPanel', true, '41em');
            });
        }
        
        $('#DeleteThreadPanel #CloseThreadOk').click(function () {
            var url = 'http://unity.codeplex.com/discussions/349202';
            $.ajax({
                url: url,
                type: 'DELETE',
                success: function (x) {
                    location.href = x.RedirectUrl;
                }
            });
        });
    });

    workItemMention = new codeplex.ui.WorkItemMention();
    workItemMention.addLinks(".discussionPost");
</script>


        
        
                
                <div class="clear"></div>
                
                <div id="footer">
                    <div class="row">
                        <hr />
                        <ul>
                            <li>Â© 2006-2017 Microsoft</li>
                            <li><a href="http://www.codeplex.com/site/help">Get Help</a></li>
                            <li><a href="/site/legal/privacy">Privacy Statement</a></li>
                            <li><a href="http://www.codeplex.com/site/legal/terms">Terms of Use</a></li>
                            <li><a href="http://www.codeplex.com/site/legal/conduct">Code of Conduct</a></li>
                            <li><a href="http://developermedia.com/" target="_blank">Advertise With Us</a></li>
                            <li>Version 2017.10.3.21062</li>
                        </ul>
                    </div>
                </div>
            </div>
        </form>
    </body>

</html>