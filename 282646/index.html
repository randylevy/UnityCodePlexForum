

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" class="" prefix="og: http://ogp.me/ns# profile: http://ogp.me/ns/profile#">
    
    
    
    

    
    <head>
        <meta id="CompatabilityMode" http-equiv="X-UA-Compatible" content="IE=edge" />
	    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link href="../assets/StyleSheet.css" id="MasterCss" rel="stylesheet" type="text/css" />
        <link rel="SHORTCUT ICON" href="../assets/favicon.ico" />
        <title>patterns &#38; practices - Unity - How to apply Unity with WCF Services&#63;</title>
        
       
                    <script src="../assets/mscc-0.3.6.min.js"></script>
        
                    <link rel="stylesheet" type="text/css" href="../assets/mscc-0.3.6.min.css" />
        
            <script type="text/javascript">
                var msccHadCookieBannerAtPageStart = true;
            </script>
        

        <!--
        Third party scripts and code linked to or referenced from this website are licensed to you by the parties that own such code,
        not by Microsoft.  See ASP.NET Ajax CDN Terms of Use â€“ http://www.asp.net/ajaxlibrary/CDN.ashx.
        -->
        <script src="https://ajax.aspnetcdn.com/ajax/jquery/jquery-1.4.4.min.js" type="text/javascript"></script>
        
        <script type="text/javascript">
            if (typeof jQuery === 'undefined') {
                document.write(unescape("%3Cscript src='https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js' type='text/javascript'%3E%3C/script%3E"));
            }
        </script>

        <script src="https://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.6/jquery-ui.min.js" type="text/javascript"></script>
        
        <script type="text/javascript">
            if (typeof jQuery.ui === 'undefined') {
                document.write(unescape("%3Cscript src='https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.6/jquery-ui.min.js' type='text/javascript'%3E%3C/script%3E"));
            }
        </script>

        
    <style type="text/css">.SideBar, .SideBarPadding{display:none;}.MainContent{width:auto;}.SiteContentTable{width:100%;}</style>
    <style id="ProjectStyles" type="text/css">
        .SiteHeader, .SiteHeaderLeft {
            height:45px !important;
            overflow:hidden;
        }
        .SiteContent 
        {
            padding: 0 0 1em 0;
            margin-top:0;
            min-height:225px;
            border-right: 1px solid lightgrey;
            border-left: 1px solid lightgrey;
            border-bottom: 1px solid lightgrey;
        }
        .IE table.MinWidthContent
        {
	        table-layout: auto !important;	
        }
    </style>
    
    
    <meta name="ROBOTS" content="NOINDEX, NOFOLLOW">

    
    
    <meta id="WTProjectName" name="WT.pi" content="unity"/>
    

    <link rel="EditURI" type="application/rsd+xml" title="RSD" href='http://unity.codeplex.com/rsd' />
    <link rel="wlwmanifest" type="application/wlwmanifest+xml" title="WLWManifest" href='/wlwmanifest.xml' />
    
    
        <link rel="alternate" type="application/rss+xml" title="patterns&#32;&#38;&#32;practices&#32;-&#32;Unity" url="http://unity.codeplex.com/project/feeds/rss"/>
    
        
        <link rel="alternate" type="application/rss+xml" title="patterns&#32;&#38;&#32;practices&#32;-&#32;Unity&#32;-&#32;Discussions" url="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fforum%2funity"/>
        
        <link rel="alternate" type="application/rss+xml" title="patterns&#32;&#38;&#32;practices&#32;-&#32;Unity&#32;-&#32;Issues" url="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fworkitem%2funity"/>
        
        <link rel="alternate" type="application/rss+xml" title="patterns&#32;&#38;&#32;practices&#32;-&#32;Unity&#32;-&#32;Downloads" url="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2frelease%2funity"/>
        <link rel="alternate" type="application/rss+xml" title="patterns&#32;&#38;&#32;practices&#32;-&#32;Unity&#32;-&#32;Reviews" url="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2freview%2funity"/>
        
    
        <link rel="alternate" type="application/rss+xml" title="patterns&#32;&#38;&#32;practices&#32;-&#32;Unity&#32;-&#32;Source&#32;code" url="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fsourcecontrol%2funity"/>
        <link rel="alternate" type="application/rss+xml" title="patterns&#32;&#38;&#32;practices&#32;-&#32;Unity&#32;-&#32;Wiki" url="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fwiki%2funity"/>
    
        
    
        <meta content="summary" name="twitter:card" /><meta content="@CodePlex" name="twitter:site" /><meta content="http://unity.codeplex.com/discussions/282646?ProjectName=unity" name="twitter:url" /><meta content="patterns &amp;#38; practices - Unity" name="twitter:title" /><meta content="The Unity Application Block &amp;#40;Unity&amp;#41; is officially under new ownership.&amp;#13;&amp;#10;https&amp;#58;&amp;#47;&amp;#47;github.com&amp;#47;unitycontainer&amp;#47;unity" name="twitter:description" /><meta content="http://www.codeplex.com/Images/codeplex.png" name="twitter:image" /><meta content="CodePlex" property="og:site_name" /><meta content="http://unity.codeplex.com/discussions/282646?ProjectName=unity" property="og:url" /><meta content="object" property="og:type" /><meta content="patterns &amp;#38; practices - Unity" property="og:title" /><meta content="The Unity Application Block &amp;#40;Unity&amp;#41; is officially under new ownership.&amp;#13;&amp;#10;https&amp;#58;&amp;#47;&amp;#47;github.com&amp;#47;unitycontainer&amp;#47;unity" property="og:description" /><meta content="http://www.codeplex.com/Images/codeplex.png" property="og:image" />
        

    </head>
    
    <body>
         
            
        <script src="../assets/ScriptLoader.js" type="text/javascript"></script>
        <form id="aspnetForm" autocomplete="off" method="POST" enctype="multipart/form-data">
            <input name="__RequestVerificationToken" type="hidden" value="e5xVWilpFRAA8xhpHn_8j-JrrKQUKfp38yB9r_2Pv2vZUODu3pzfNfhXT02iKlWzvxYQCcxNyrOcvf_4c-3yn2sZ5uLhhSmIICjhnSLFtVfT8OB3kWFZ8ZMyPafZf32P4zSO0g2" /><input name="__RequestVerificationToken2" type="hidden" value="__RequestVerificationToken2751ba430-99e0-40e9-b336-b987dbdc0a9f" />
            
            <div id="UpdateProgressPanel" class="loading_animation" style="display:none;">
                <div class="row">
                    <h2 class="anim_h2">
                        <span id="UpdateProgressText">Updating...</span>
                        <span id="animatedLoadingIconContainer">
                            <img id="animatedLoadingIcon" src="../assets/loading_animation.gif" class="anim_img"/>
                        </span>
                    </h2>
                </div>
            </div>
            
            <div style="display:none;">
                
                <img id="BlankImage" style="width:0;height:0;" src="../assets/blank.png" onload="self.logoImageLoaded=true;"/>

                <script language="javascript" type="text/javascript">
                    var date = new Date();
                    var timezoneOffset = date.getTimezoneOffset() / 60 * -1;
                    var timezoneOffsetCookie = getCookie("TimezoneOffset");
                    var firstTimeSetTimezoneCookie = false;

                    if (timezoneOffsetCookie == null || timezoneOffsetCookie != timezoneOffset) {
                        firstTimeSetTimezoneCookie = true;
                        document.cookie = "TimezoneOffset=" + timezoneOffset + '; domain=.codeplex.com;expires=Wed, 10 Oct 2018 05:26:25 UTC';
                    }
                </script>
            </div>
            
            
            <div id="banner">
                <div id="message"><strong>This is an archived copy of the original CodePlex Unity Discussion Forum</strong><br />Unity is now on <a href="https://github.com/unitycontainer/">GitHub</a>
                    
                </div>
            </div>
            

            <div id="header">
                <div id="header_wrap" class="row">
                    <p id="logo"><a href="http://www.codeplex.com">Code<span class="semi">Plex</span></a><span id="tagline">Project Hosting for Open Source Software</span></p>
                    

<ul id="nav">

    <li><a href="/site/register/new" id="registerLink" class="ZoomFix">Register</a></li>
    <li ><a class="SignInLink" href="https://www.codeplex.com/site/login?RedirectUrl=http%3a%2f%2funity.codeplex.com%2fdiscussions%2f282646" id="signInLink">Sign In</a></li>
  
    <li class="last"><a class="rss_site_icon" href="http://www.codeplex.com/site/feeds/rss" type="application/rss+xml" rel="Alternate" title="CodePlex Site Activity"></a></li>
</ul>
                    <input id="searchsite" name="searchsite" maxlength="500" type="text" value="" /><span id="search_mag"><a id="submitSearch" name="submitSearch" class="magnify" title="Search" href="#"></a></span>
                    <script>
	$(document).ready(function() {
    var searchButton = $('#submitSearch'),
        searchBar = $('#searchsite');

    // Register our own handler for the search event while we wait for the SearchBox script to load.
    searchButton.bind('click.backupSearchBox', doProjectSearch);
    searchBar.bind('keypress.backupSearchBox', function(e) { if ($keyCode(e) === 13) { doProjectSearch(); return false; } });

    function cleanupSearchEvents() {
        // If the SearchBox was loaded, unregister our handlers.
        if (epx_loaded) {
            searchButton.unbind('.backupSearchBox');
            searchBar.unbind('.backupSearchBox');
        }
    }

    $loadScript('https://i4.services.social.microsoft.com/search/Widgets/SearchBox.jss?appid=1000&scopeid=1&boxId=searchsite&btnId=submitSearch&watermark=Search%20all%20projects&overrideWatermark=true&searchLocation=%2fsite%2fsearch&allowEmptySearch=true&focusOnInit=False&minimumTermLength=3', cleanupSearchEvents);
})
function doProjectSearch() {
    
    var url = '/site/search';

    //If search term is not same as watermark
    if($('#searchsite').val() != 'Search all projects')    
    {        
        url = url + '?query=' + encodeURIComponent($('#searchsite').val());
    }

    
    var callback = '';
    if (callback.length > 0 && eval('typeof ' + callback) != 'undefined')
        url += eval(callback + '()');

    window.location.href = url;
    return false;
}
</script>
                </div>
            </div>
            
            <div id="wrap">
                
    <div id="sub_heading" class="row">
        
        <div id="ProjectHeader">
            <div id="project_title_row" class="row">
                <div id="project_logo">
                    
<a id="AffiliateLink" href="http://msdn.microsoft.com/practices">
    <img id="AffiliateImage" src="../assets/pnp_logo.png" title="patterns&#32;&#38;&#32;practices" />
</a>

    
    <h1 class="text_only"><a href="http://unity.codeplex.com/" id="ProjectTitle1"><div>patterns &#38; practices - Unity</div></a></h1>

                </div>
            </div>
        </div>
        
        <div id="ProjectDetailsDiv">
            
        </div>
		<div class="clear"></div>
        

<ul id="page_box_links">
	<li id="homeTabCell" style="width: 63px;"><a id="homeTab" href="http://unity.codeplex.com/" class="box_home">home</a><div></div></li>
    
	<li id="sourceTabCell" style="width:113px;"><a id="sourceTab" href="http://unity.codeplex.com/SourceControl/latest" class="box_source">source code</a><div></div></li>
    
	<li id="releasesTabCell" style="width:105px;"><a id="releasesTab" href="http://unity.codeplex.com/releases" class="box_downloads">downloads</a><div></div></li>
    
    <li id="documentationTabCell" style="width:143px;"><a id="documentationTab" href="http://unity.codeplex.com/documentation" class="box_documentation">documentation</a><div></div></li>
    
	<li id="discussionTabCell" style="width:112px;"><a id="discussionTab" href="../index.html" class="discussions_active">discussions</a><div></div></li>
    
	<li id="workItemsTabCell" style="width:70px;"><a id="workItemsTab" href="http://unity.codeplex.com/workitem/list/basic" class="box_issue">issues</a><div></div></li>
    
	<li id="peopleTabCell" style="width:70px;"><a id="peopleTab" href="http://unity.codeplex.com/team/view" class="box_people">people</a><div></div></li>
	<li id="licenseTabCell" style="width:70px;"><a id="licenseTab" href="http://unity.codeplex.com/license" class="box_license">license</a><div></div></li>
    
    <span class="stretch"></span>
</ul>

<script type="text/javascript">
    $(document).ready(function () {
        $('#page_box_links').applyLastClassToList();
    });
</script>
		    <div class="clear"></div>
            
     <td>
       

<div>
    
    <div id="actionBar" class="action_bar">
        <ul id="actionBar_ul" class="actionBar_sublinks subtab_right" style="vertical-align: middle;">

            

                <li id="li_actionbar_creatediscussion" data-action-id="actionbar_creatediscussion" data-action-type="Navigate" class="actionBar_sublinks" data-options-id="29fb9882-7016-42a4-872c-0fbcbd317237">
                
                    <script class="options" defer="defer" id="29fb9882-7016-42a4-872c-0fbcbd317237" type="application/json">{"navigate-url":"http://unity.codeplex.com/discussions/create"}</script> 
                    
                    <div class="actionBar_custom_content"></div>

                    <a href="#" id="actionbar_creatediscussion" title="Start a New Thread" class="action_bar_item_link">
                        <img id="img_actionbar_creatediscussion" class="action_bar_item_image" src="../assets/actionbar_newitem.png" style="vertical-align: middle" />
                        New Thread
                    </a>

                </li>

            

                <li id="li_actionbar_subscribe" data-action-id="actionbar_subscribe" data-action-type="PopUp" class="actionBar_sublinks" data-options-id="c6cecc47-abfb-43d9-88fe-33616293c26b">
                
                    <script class="options" defer="defer" id="c6cecc47-abfb-43d9-88fe-33616293c26b" type="application/json">{}</script> 
                    
                    <div class="actionBar_custom_content">

<div id="rssHoverDiv" class="HoverPanel LeftHoverWidth" style="display: none">
        <ul id="3_FeedsPanel" class="RssFeedsPanel">
            <li>
                <a id="ProjectRssLink" href="http://unity.codeplex.com/project/feeds/rss" class="ArrowSmall NoUnderline">All Project Updates</a>
            </li>
            
            <li>
                <a id="DiscussionRssLink" href="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fforum%2funity" class="ArrowSmall NoUnderline">Discussions</a>
            </li>
            
            <li>
                <a id="IssueTrackerRssLink" href="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fworkitem%2funity" class="ArrowSmall NoUnderline">Issue Tracker</a>
            </li>
            
            <li>
                <a id="ReleasesRssLink" href="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2frelease%2funity" class="ArrowSmall NoUnderline">Downloads</a>
            </li>
            <li>
                <a id="ReviewsRssLink" href="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2freview%2funity" class="ArrowSmall NoUnderline">Reviews</a>
            </li>
            
            <li>
                <a id="SourceControlRssLink" href="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fsourcecontrol%2funity" class="ArrowSmall NoUnderline">Source Code</a>
            </li>
            <li>
                <a id="WikiRssLink" href="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fwiki%2funity" class="ArrowSmall NoUnderline">Wiki &amp; Documentation</a>
            </li>
        </ul>
</div></div>

                    <a href="#" id="actionbar_subscribe" title="Subscribe to project updates in RSS feeds." class="action_bar_item_link">
                        <img id="img_actionbar_subscribe" class="action_bar_item_image" src="../assets/actionbar_subscribe.png" style="vertical-align: middle" />
                        Subscribe
                    </a>

                </li>

            
        </ul>
    </div>
</div>
     </td>

        

    </div>
    
    
<div class="Threads">
    <div class="ViewThread">
        
        
        
            <h1 class="page_title WordWrapBreakWord">
                How to apply Unity with WCF Services&#63;
            </h1>

            <!-- Private Discussion header -->
            

            <!-- Posts List Header: Topics and Wiki Link -->
            <table class="PostsListHeader">
                <tr>
                    <td>
                     
                    </td>
                    <td>
                        <div class="WikiLink">
                            <span title="Paste this into a wiki page to link to this discussion">
                                Wiki Link: [discussion:282646]
                            </span>
                        </div>
                    </td>
                </tr>
            </table>

            <!-- The list of posts -->
            

<div id="discussionsPostList" data-options-id="3318f54c-331b-46e8-862b-4e6df26b94f9">
    <script class="options" defer="defer" id="3318f54c-331b-46e8-862b-4e6df26b94f9" type="application/json">{"threadUrl":"http://unity.codeplex.com/discussions/282646","showEditor":false,"checkImageUrl":"../assets/check_answer.png"}</script>

    <div class="Posts" style="margin-top: 10px;">
    

<table cellpadding="0" cellspacing="0" style="width: 100%; margin-bottom: 0px; table-layout:fixed">
    

<tr id="PostPanel" class="Post" d:forid="710891">
    <td id="PostDetailsCell_710891" style="vertical-align: top; border: solid #BBB 1px; border-bottom: none; border-left: none; border-top: none; width: 114px" class="Post">
        <div class="Details">
            <a name="post710891"></a>
            <div class="UserName" style="white-space: pre-wrap; word-wrap: break-word;"><a class="UserProfileLink" href="http://www.codeplex.com/site/users/view/MaherJendoubi">MaherJendoubi</a></div>
            <div class="UserRole"></div>
            <div style="white-space: normal" class="SubText"><span class="smartDate" title="12/12/2011 12:53:03 PM" LocalTimeTicks="1323723183">Dec 12, 2011 at 12:53 PM</span></div>
            
        </div>
    </td>
    <td id="PostContent_710891" style="width: 100%; vertical-align: top;" 
        class=" discussionPost discussionListContent WordWrapBreakWord Post " 
        data-markdown="&#32;Hello,&#32;It&#32;is&#32;the&#32;first&#32;time&#32;that&#32;I&#32;use&#32;Unity&#32;IoC.&#32;I&#32;have&#32;a&#32;WCF&#32;service&#32;that&#32;sends&#32;data&#32;to&#32;another&#32;WCF&#32;service.&#32;I&#32;choose&#32;Unity&#32;as&#32;my&#32;IoC&#32;container&#32;to&#32;apply&#32;Dependency&#32;Injection&#32;Principle.&#32;How&#32;to&#32;use&#32;Unity&#32;to&#32;solve&#32;that&#32;issue&#63;&#32;Another&#32;problem&#32;is&#32;that&#32;my&#32;WCF&#32;services&#32;are&#32;calling&#32;another&#32;layer&#32;&#58;&#32;Domain&#32;Layer&#38;nbsp&#59;&#32;How&#32;to&#32;solve&#32;that&#32;issue&#63;&#32;Thank&#32;you&#32;in&#32;advance,&#32;Best&#32;regards.&#32;Maher&#32;Jendoubi&#32;">
        
<p>Hello,</p>
<p>It is the first time that I use Unity IoC.</p>
<p>I have a WCF service that sends data to another WCF service. I choose Unity as my IoC container to apply Dependency Injection Principle.</p>
<p>How to use Unity to solve that issue?</p>
<p>Another problem is that my WCF services are calling another layer : Domain Layer&nbsp;</p>
<p>How to solve that issue?</p>
<p>Thank you in advance,</p>
<p>Best regards.</p>
<p>Maher Jendoubi</p>

        
    </td>
    <td style="vertical-align: top; width: 134px;" class="Post ">
        
        <div id="Options_710891" class="Options" >
            
        </div>
        
    </td>
</tr>

        <tr><td colspan="3"><div class="PostSeparator"></div></td></tr>
        

<tr id="PostPanel" class="Post" d:forid="710901">
    <td id="PostDetailsCell_710901" style="vertical-align: top; border: solid #BBB 1px; border-bottom: none; border-left: none; border-top: none; width: 114px" class="Post">
        <div class="Details">
            <a name="post710901"></a>
            <div class="UserName" style="white-space: pre-wrap; word-wrap: break-word;"><a class="UserProfileLink" href="http://www.codeplex.com/site/users/view/weberse">weberse</a></div>
            <div class="UserRole"></div>
            <div style="white-space: normal" class="SubText"><span class="smartDate" title="12/12/2011 1:14:22 PM" LocalTimeTicks="1323724462">Dec 12, 2011 at 1:14 PM</span></div>
            
        </div>
    </td>
    <td id="PostContent_710901" style="width: 100%; vertical-align: top;" 
        class=" discussionPost discussionListContent WordWrapBreakWord Post " 
        data-markdown="Could&#32;you&#32;please&#32;elaborate&#32;on&#32;your&#32;scenario&#63;&#32;&#32;What&#32;host&#32;do&#32;you&#32;use&#32;for&#32;your&#32;WCF&#32;services&#63;&#32;IIS&#63;&#32;WAS&#63;&#32;Windows&#32;Service&#63;&#32;Self&#32;hosting&#63;&#32;What&#32;is&#32;your&#32;problem&#32;with&#32;calling&#32;the&#32;Domain&#32;Layer&#32;from&#32;a&#32;WCF&#32;service&#63;&#32;Finding&#32;the&#32;right&#32;part&#32;of&#32;your&#32;Domain&#32;Layer&#32;to&#32;call&#63;&#32;Can&#32;you&#32;give&#32;an&#32;outline&#32;of&#32;your&#32;system&#32;architecture&#63;&#32;">
        
<p>Could you please elaborate on your scenario?</p>
<ul>
<li>What host do you use for your WCF services? IIS? WAS? Windows Service? Self hosting?
</li><li>What is your problem with calling the Domain Layer from a WCF service? Finding the right part of your Domain Layer to call?
</li><li>Can you give an outline of your system architecture? </li></ul>

        
    </td>
    <td style="vertical-align: top; width: 134px;" class="Post ">
        
        <div id="Options_710901" class="Options" >
            
        </div>
        
    </td>
</tr>

        <tr><td colspan="3"><div class="PostSeparator"></div></td></tr>
        

<tr id="PostPanel" class="Post" d:forid="710990">
    <td id="PostDetailsCell_710990" style="vertical-align: top; border: solid #BBB 1px; border-bottom: none; border-left: none; border-top: none; width: 114px" class="Post">
        <div class="Details">
            <a name="post710990"></a>
            <div class="UserName" style="white-space: pre-wrap; word-wrap: break-word;"><a class="UserProfileLink" href="http://www.codeplex.com/site/users/view/MaherJendoubi">MaherJendoubi</a></div>
            <div class="UserRole"></div>
            <div style="white-space: normal" class="SubText"><span class="smartDate" title="12/12/2011 4:18:31 PM" LocalTimeTicks="1323735511">Dec 12, 2011 at 4:18 PM</span></div>
            
        </div>
    </td>
    <td id="PostContent_710990" style="width: 100%; vertical-align: top;" 
        class=" discussionPost discussionListContent WordWrapBreakWord Post " 
        data-markdown="Thank&#32;you&#32;for&#32;the&#32;reply,&#38;nbsp&#59;&#32;&#32;I&#32;use&#32;Windows&#32;Service&#32;as&#32;a&#32;host&#32;for&#32;my&#32;WCF&#32;services.&#32;I&#32;am&#32;looking&#32;for&#32;a&#32;sample&#32;of&#32;code&#32;that&#32;use&#32;Unity&#32;IoC&#32;container,&#32;that&#32;all&#32;WCF&#32;services&#32;send&#32;some&#32;data&#32;to&#32;one&#32;WCF&#32;Service&#32;in&#32;the&#32;WCF&#32;Layer&#32;using&#32;dependency&#32;injection&#40;DI&#41;,&#32;and&#32;using&#32;DI&#32;for&#32;the&#32;other&#32;layers.&#32;My&#32;problem&#32;is&#32;where&#32;and&#32;how&#32;to&#32;put&#32;dependency&#32;injection&#32;snippet&#32;codes&#32;into&#32;such&#32;a&#32;layer&#32;as&#32;I&#32;described&#32;in&#32;the&#32;following&#32;line&#58;&#32;My&#32;system&#32;architecture&#32;is&#32;made&#32;up&#32;of&#32;a&#32;DAL,&#32;a&#32;BLL,&#32;a&#32;WCF&#32;Service&#32;Layer&#32;&#40;5&#32;WCF&#32;services&#32;independent&#32;and&#32;hosted&#32;as&#32;Windows&#32;Services&#41;,&#32;a&#32;ClientProxy&#32;Layer&#32;and&#32;GUI&#32;using&#32;Winforms.&#32;&#32;I&#32;hope&#32;my&#32;answer&#32;is&#32;clearer&#32;now.&#32;Thank&#32;you&#32;in&#32;advance,&#32;Kindest&#32;regards.&#32;Maher&#32;Jendoubi.">
        
<p>Thank you for the reply,&nbsp;</p>
<ul>
<li>I use Windows Service as a host for my WCF services. </li><li>I am looking for a sample of code that use Unity IoC container, that all WCF services send some data to one WCF Service in the WCF Layer using dependency injection(DI), and using DI for the other layers. My problem is where and how to put dependency injection
 snippet codes into such a layer as I described in the following line: </li><li>My system architecture is made up of a DAL, a BLL, a WCF Service Layer (5 WCF services independent and hosted as Windows Services), a ClientProxy Layer and GUI using Winforms.
</li></ul>
<p>I hope my answer is clearer now.</p>
<p>Thank you in advance,</p>
<p>Kindest regards.</p>
<p>Maher Jendoubi.</p>

        
    </td>
    <td style="vertical-align: top; width: 134px;" class="Post ">
        
        <div id="Options_710990" class="Options" >
            
        </div>
        
    </td>
</tr>

        <tr><td colspan="3"><div class="PostSeparator"></div></td></tr>
        

<tr id="PostPanel" class="Post" d:forid="711082">
    <td id="PostDetailsCell_711082" style="vertical-align: top; border: solid #BBB 1px; border-bottom: none; border-left: none; border-top: none; width: 114px" class="Post">
        <div class="Details">
            <a name="post711082"></a>
            <div class="UserName" style="white-space: pre-wrap; word-wrap: break-word;"><a class="UserProfileLink" href="http://www.codeplex.com/site/users/view/weberse">weberse</a></div>
            <div class="UserRole"></div>
            <div style="white-space: normal" class="SubText"><span class="smartDate" title="12/12/2011 7:30:25 PM" LocalTimeTicks="1323747025">Dec 12, 2011 at 7:30 PM</span></div>
            
            <div style="white-space: normal" class="SubText" id="UpdatedDiv">Edited <span class="smartDate" title="12/13/2011 5:46:54 AM" LocalTimeTicks="1323784014">Dec 13, 2011 at 5:46 AM</span></div>
            
        </div>
    </td>
    <td id="PostContent_711082" style="width: 100%; vertical-align: top;" 
        class=" discussionPost discussionListContent WordWrapBreakWord Post " 
        data-markdown="For&#32;Windows&#32;Services&#32;I&#32;prefer&#32;to&#32;use&#32;&#32;TopShelf&#32;it&#32;makes&#32;handling&#32;services&#32;much&#32;easier.&#32;Nuget&#32;allows&#32;you&#32;to&#32;add&#32;references&#32;to&#32;TopShelf&#32;and&#32;Unity&#32;with&#32;just&#32;a&#32;few&#32;clicks.&#32;The&#32;Contract&#58;&#32;&#38;nbsp&#59;&#32;&#32;&#91;ServiceContract&#93;&#32;public&#32;interface&#32;IWcfService&#32;&#123;&#32;&#91;OperationContract&#93;&#32;string&#32;Reverse&#40;string&#32;value&#41;&#59;&#32;&#125;&#32;&#32;&#32;&#38;nbsp&#59;&#32;The&#32;Server&#32;side.&#32;The&#32;project&#32;is&#32;a&#32;console&#32;application.&#32;You&#32;wire&#32;up&#32;the&#32;container&#32;in&#32;the&#32;Main&#40;&#41;&#32;method&#32;and&#32;then&#32;tell&#32;TopShelf&#32;to&#32;launch&#32;the&#32;service.&#32;Notice&#32;the&#32;ConstructUsing&#40;&#41;&#32;lambda.&#32;It&#32;uses&#32;the&#32;UnityContainer&#32;to&#32;construct&#32;the&#32;service.&#32;&#38;nbsp&#59;&#32;&#32;public&#32;class&#32;Program&#32;&#123;&#32;public&#32;static&#32;void&#32;Main&#40;string&#91;&#93;&#32;args&#41;&#32;&#123;&#32;var&#32;container&#32;&#61;&#32;new&#32;UnityContainer&#40;&#41;&#59;&#32;container.RegisterType&#38;lt&#59;IWcfService,&#32;WcfService&#38;gt&#59;&#40;&#41;&#59;&#32;container.RegisterType&#38;lt&#59;IRepository,&#32;Repository&#38;gt&#59;&#40;&#41;&#59;&#32;container.RegisterType&#38;lt&#59;WindowsService&#38;gt&#59;&#40;&#32;new&#32;InjectionConstructor&#40;typeof&#40;IWcfService&#41;,&#32;new&#91;&#93;&#32;&#123;&#32;new&#32;Uri&#40;&#34;http&#58;&#47;&#47;localhost&#47;myservice&#34;&#41;&#32;&#125;&#41;&#41;&#59;&#32;HostFactory.Run&#40;x&#32;&#61;&#38;gt&#59;&#32;&#123;&#32;x.Service&#38;lt&#59;WindowsService&#38;gt&#59;&#40;s&#32;&#61;&#38;gt&#59;&#32;&#123;&#32;s.SetServiceName&#40;&#34;mysvc&#34;&#41;&#59;&#32;s.ConstructUsing&#40;&#40;&#41;&#32;&#61;&#38;gt&#59;&#32;container.Resolve&#38;lt&#59;WindowsService&#38;gt&#59;&#40;&#41;&#41;&#59;&#32;s.WhenStarted&#40;svc&#32;&#61;&#38;gt&#59;&#32;svc.Start&#40;&#41;&#41;&#59;&#32;s.WhenStopped&#40;svc&#32;&#61;&#38;gt&#59;&#32;svc.Stop&#40;&#41;&#41;&#59;&#32;&#125;&#41;&#59;&#32;x.RunAsLocalSystem&#40;&#41;&#59;&#32;x.SetDescription&#40;&#34;WCF&#32;Unity&#32;Sample&#34;&#41;&#59;&#32;x.SetDisplayName&#40;&#34;Some&#32;Display&#32;Name&#34;&#41;&#59;&#32;x.SetServiceName&#40;&#34;Some&#32;Service&#32;Name&#34;&#41;&#59;&#32;&#125;&#41;&#59;&#32;&#125;&#32;&#125;&#32;&#32;&#32;&#38;nbsp&#59;&#32;The&#32;WindowsService&#32;is&#32;a&#32;more&#32;or&#32;less&#32;empty&#32;shell&#32;that&#32;starts&#32;a&#32;WCF&#32;ServiceHost&#32;&#38;nbsp&#59;&#32;&#32;public&#32;class&#32;WindowsService&#32;&#123;&#32;private&#32;readonly&#32;IWcfService&#32;svc&#59;&#32;private&#32;readonly&#32;Uri&#91;&#93;&#32;baseAddresses&#59;&#32;private&#32;ServiceHost&#32;host&#59;&#32;public&#32;WindowsService&#40;IWcfService&#32;svc,&#32;Uri&#91;&#93;&#32;baseAddresses&#41;&#32;&#123;&#32;this.svc&#32;&#61;&#32;svc&#59;&#32;this.baseAddresses&#32;&#61;&#32;baseAddresses&#59;&#32;&#125;&#32;public&#32;void&#32;Start&#40;&#41;&#32;&#123;&#32;if&#32;&#40;this.host&#32;&#33;&#61;&#32;null&#41;&#32;&#123;&#32;this.host.Close&#40;&#41;&#59;&#32;&#125;&#32;this.host&#32;&#61;&#32;new&#32;ServiceHost&#40;this.svc,&#32;this.baseAddresses&#41;&#59;&#32;this.host.Open&#40;&#41;&#59;&#32;Console.WriteLine&#40;&#34;WCF&#32;Host&#32;running...&#34;&#41;&#59;&#32;&#125;&#32;public&#32;void&#32;Stop&#40;&#41;&#32;&#123;&#32;if&#32;&#40;this.host&#32;&#33;&#61;&#32;null&#41;&#32;&#123;&#32;this.host.Close&#40;&#41;&#59;&#32;this.host&#32;&#61;&#32;null&#59;&#32;&#125;&#32;&#125;&#32;&#125;&#32;&#32;&#32;The&#32;other&#32;server&#32;side&#32;classes&#32;go&#32;without&#32;comments,&#32;they&#32;are&#32;just&#32;there&#32;for&#32;demonstration&#32;purposes.&#32;&#38;nbsp&#59;&#32;&#38;nbsp&#59;&#32;&#32;&#91;ServiceBehavior&#40;InstanceContextMode&#32;&#61;&#32;InstanceContextMode.Single&#41;&#93;&#32;public&#32;class&#32;WcfService&#32;&#58;&#32;IWcfService&#32;&#123;&#32;private&#32;readonly&#32;IRepository&#32;repository&#59;&#32;public&#32;WcfService&#40;IRepository&#32;repository&#41;&#32;&#123;&#32;this.repository&#32;&#61;&#32;repository&#59;&#32;&#125;&#32;public&#32;string&#32;Reverse&#40;string&#32;name&#41;&#32;&#123;&#32;var&#32;domain&#32;&#61;&#32;this.repository.LoadByName&#40;name&#41;&#59;&#32;string&#32;result&#32;&#61;&#32;domain.DoIt&#40;&#41;&#59;&#32;return&#32;result&#59;&#32;&#125;&#32;&#125;&#32;public&#32;interface&#32;IRepository&#32;&#123;&#32;DomainObject&#32;LoadByName&#40;string&#32;name&#41;&#59;&#32;&#125;&#32;public&#32;class&#32;Repository&#32;&#58;&#32;IRepository&#32;&#123;&#32;public&#32;DomainObject&#32;LoadByName&#40;string&#32;name&#41;&#32;&#123;&#32;return&#32;new&#32;DomainObject&#32;&#123;&#32;Name&#32;&#61;&#32;name&#32;&#125;&#59;&#32;&#125;&#32;&#125;&#32;public&#32;class&#32;DomainObject&#32;&#123;&#32;public&#32;string&#32;Name&#32;&#123;&#32;get&#59;&#32;set&#59;&#32;&#125;&#32;public&#32;string&#32;DoIt&#40;&#41;&#32;&#123;&#32;return&#32;new&#32;string&#40;this.Name.Reverse&#40;&#41;.ToArray&#40;&#41;&#41;&#59;&#32;&#125;&#32;&#125;&#32;&#32;&#32;&#38;nbsp&#59;&#32;To&#32;start&#32;the&#32;windows&#32;service&#32;just&#32;launch&#32;the&#32;console&#32;project.&#32;The&#32;client&#32;is&#32;another&#32;console&#32;application.&#32;Again&#32;you&#32;wire&#32;up&#32;Unity&#32;in&#32;the&#32;Main&#40;&#41;&#32;method&#32;&#40;same&#32;goes&#32;for&#32;a&#32;WinForms&#32;client&#41;.&#32;&#38;nbsp&#59;&#32;&#32;class&#32;Program&#32;&#123;&#32;static&#32;void&#32;Main&#40;string&#91;&#93;&#32;args&#41;&#32;&#123;&#32;var&#32;container&#32;&#61;&#32;new&#32;UnityContainer&#40;&#41;&#59;&#32;container.RegisterType&#38;lt&#59;IWcfService&#38;gt&#59;&#40;&#32;new&#32;InjectionFactory&#40;&#32;c&#32;&#61;&#38;gt&#59;&#32;&#123;&#32;BasicHttpBinding&#32;binding&#32;&#61;&#32;new&#32;BasicHttpBinding&#40;&#41;&#59;&#32;EndpointAddress&#32;address&#32;&#61;&#32;new&#32;EndpointAddress&#40;&#34;http&#58;&#47;&#47;localhost&#47;myservice&#34;&#41;&#59;&#32;ChannelFactory&#38;lt&#59;IWcfService&#38;gt&#59;&#32;cf&#32;&#61;&#32;new&#32;ChannelFactory&#38;lt&#59;IWcfService&#38;gt&#59;&#40;binding,&#32;address&#41;&#59;&#32;var&#32;channel&#32;&#61;&#32;cf.CreateChannel&#40;&#41;&#59;&#32;return&#32;channel&#59;&#32;&#125;&#41;&#41;&#59;&#32;Console.WriteLine&#40;&#34;Enter&#32;name&#32;to&#32;send&#32;to&#32;service&#58;&#34;&#41;&#59;&#32;string&#32;name&#32;&#61;&#32;Console.ReadLine&#40;&#41;&#59;&#32;var&#32;proxy&#32;&#61;&#32;container.Resolve&#38;lt&#59;IWcfService&#38;gt&#59;&#40;&#41;&#59;&#32;var&#32;result&#32;&#61;&#32;proxy.Reverse&#40;name&#41;&#59;&#32;Console.WriteLine&#40;result&#41;&#59;&#32;Console.WriteLine&#40;&#34;Press&#32;ENTER&#34;&#41;&#59;&#32;Console.ReadLine&#40;&#41;&#59;&#32;&#125;&#32;&#125;&#32;&#32;&#32;I&#32;don&#39;t&#32;like&#32;generated&#32;proxies&#32;so&#32;I&#32;use&#32;the&#32;ChannelFactory&#32;to&#32;create&#32;a&#32;proxy&#32;at&#32;runtime.&#32;There&#32;is&#32;a&#32;sample&#32;on&#32;how&#32;to&#32;integrate&#32;the&#32;ChannelFactory&#32;smoothly&#32;with&#32;Unity&#32;in&#32;the&#32;TecX&#32;project&#32;&#40;TecX.ServiceModel.AutoMagic&#41;.&#32;It&#32;can&#32;also&#32;use&#32;WCF&#32;Discovery&#32;to&#32;find&#32;and&#32;use&#32;Discovery&#32;enabled&#32;services&#32;without&#32;any&#32;configuration&#32;on&#32;the&#32;client&#32;side.&#32;There&#32;are&#32;some&#32;tests&#32;that&#32;show&#32;how&#32;it&#32;is&#32;used.&#32;&#38;nbsp&#59;&#32;Hope&#32;this&#32;helps.">
        
<p>For Windows Services I prefer to use <a title="TopShelf" href="http://topshelf-project.com/" target="_blank" rel="nofollow">
TopShelf</a> it makes handling services much easier. Nuget allows you to add references to TopShelf and Unity with just a few clicks.</p>
<p>The Contract:</p>
<p>&nbsp;</p>
<div style="color:black; background-color:white">
<pre>[ServiceContract]
<span style="color:blue">public</span> <span style="color:blue">interface</span> IWcfService
{
  [OperationContract]
  <span style="color:blue">string</span> Reverse(<span style="color:blue">string</span> value);
}
</pre>
</div>
<p>&nbsp;</p>
<p>The Server side. The project is a console application. You wire up the container in the Main() method and then tell TopShelf to launch the service. Notice the
<em>ConstructUsing()</em> lambda. It uses the <em>UnityContainer </em>to construct the service.</p>
<p>&nbsp;</p>
<div style="color:black; background-color:white">
<pre><span style="color:blue">public</span> <span style="color:blue">class</span> Program
{
  <span style="color:blue">public</span> <span style="color:blue">static</span> <span style="color:blue">void</span> Main(<span style="color:blue">string</span>[] args)
  {
    <span style="color:blue">var</span> container = <span style="color:blue">new</span> UnityContainer();
    container.RegisterType&lt;IWcfService, WcfService&gt;();
    container.RegisterType&lt;IRepository, Repository&gt;();
    container.RegisterType&lt;WindowsService&gt;(
      <span style="color:blue">new</span> InjectionConstructor(<span style="color:blue">typeof</span>(IWcfService), <span style="color:blue">new</span>[] { <span style="color:blue">new</span> Uri(<span style="color:#a31515">&quot;http://localhost/myservice&quot;</span>) }));

    HostFactory.Run(x =&gt;
      {
        x.Service&lt;WindowsService&gt;(s =&gt;
          {
            s.SetServiceName(<span style="color:#a31515">&quot;mysvc&quot;</span>);
            s.ConstructUsing(() =&gt; container.Resolve&lt;WindowsService&gt;());
            s.WhenStarted(svc =&gt; svc.Start());
            s.WhenStopped(svc =&gt; svc.Stop());
          });
        x.RunAsLocalSystem();
        x.SetDescription(<span style="color:#a31515">&quot;WCF Unity Sample&quot;</span>);
        x.SetDisplayName(<span style="color:#a31515">&quot;Some Display Name&quot;</span>);
        x.SetServiceName(<span style="color:#a31515">&quot;Some Service Name&quot;</span>);
      });
  }
}
</pre>
</div>
<p>&nbsp;</p>
<p>The WindowsService is a more or less empty shell that starts a WCF ServiceHost</p>
<p>&nbsp;</p>
<div style="color:black; background-color:white">
<pre><span style="color:blue">public</span> <span style="color:blue">class</span> WindowsService
{
  <span style="color:blue">private</span> <span style="color:blue">readonly</span> IWcfService svc;
  <span style="color:blue">private</span> <span style="color:blue">readonly</span> Uri[] baseAddresses;
  <span style="color:blue">private</span> ServiceHost host;
  <span style="color:blue">public</span> WindowsService(IWcfService svc, Uri[] baseAddresses)
  {
    <span style="color:blue">this</span>.svc = svc;
    <span style="color:blue">this</span>.baseAddresses = baseAddresses;
  }
  <span style="color:blue">public</span> <span style="color:blue">void</span> Start()
  {
    <span style="color:blue">if</span> (<span style="color:blue">this</span>.host != <span style="color:blue">null</span>)
    {
      <span style="color:blue">this</span>.host.Close();
    }
    <span style="color:blue">this</span>.host = <span style="color:blue">new</span> ServiceHost(<span style="color:blue">this</span>.svc, <span style="color:blue">this</span>.baseAddresses);
    <span style="color:blue">this</span>.host.Open();
    Console.WriteLine(<span style="color:#a31515">&quot;WCF Host running...&quot;</span>);
  }
  <span style="color:blue">public</span> <span style="color:blue">void</span> Stop()
  {
    <span style="color:blue">if</span> (<span style="color:blue">this</span>.host != <span style="color:blue">null</span>)
    {
      <span style="color:blue">this</span>.host.Close();
      <span style="color:blue">this</span>.host = <span style="color:blue">null</span>;
    }
  }
}
</pre>
</div>
<p>The other server side classes go without comments, they are just there for demonstration purposes.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<div style="color:black; background-color:white">
<pre>[ServiceBehavior(InstanceContextMode = InstanceContextMode.Single)]
<span style="color:blue">public</span> <span style="color:blue">class</span> WcfService : IWcfService
{
  <span style="color:blue">private</span> <span style="color:blue">readonly</span> IRepository repository;
  <span style="color:blue">public</span> WcfService(IRepository repository)
  {
    <span style="color:blue">this</span>.repository = repository;
  }
  <span style="color:blue">public</span> <span style="color:blue">string</span> Reverse(<span style="color:blue">string</span> name)
  {
    <span style="color:blue">var</span> domain = <span style="color:blue">this</span>.repository.LoadByName(name);
    <span style="color:blue">string</span> result = domain.DoIt();
    <span style="color:blue">return</span> result;
  }
}
<span style="color:blue">public</span> <span style="color:blue">interface</span> IRepository
{
  DomainObject LoadByName(<span style="color:blue">string</span> name);
}
<span style="color:blue">public</span> <span style="color:blue">class</span> Repository : IRepository
{
  <span style="color:blue">public</span> DomainObject LoadByName(<span style="color:blue">string</span> name)
  {
    <span style="color:blue">return</span> <span style="color:blue">new</span> DomainObject { Name = name };
  }
}
<span style="color:blue">public</span> <span style="color:blue">class</span> DomainObject
{
  <span style="color:blue">public</span> <span style="color:blue">string</span> Name { <span style="color:blue">get</span>; <span style="color:blue">set</span>; }
  <span style="color:blue">public</span> <span style="color:blue">string</span> DoIt()
  {
    <span style="color:blue">return</span> <span style="color:blue">new</span> <span style="color:blue">string</span>(<span style="color:blue">this</span>.Name.Reverse().ToArray());
  }
}
</pre>
</div>
<p>&nbsp;</p>
<p>To start the windows service just launch the console project.</p>
<p>The client is another console application. Again you wire up Unity in the Main() method (same goes for a WinForms client).</p>
<p>&nbsp;</p>
<div style="color:black; background-color:white">
<pre><span style="color:blue">class</span> Program
{
  <span style="color:blue">static</span> <span style="color:blue">void</span> Main(<span style="color:blue">string</span>[] args)
  {
    <span style="color:blue">var</span> container = <span style="color:blue">new</span> UnityContainer();
    container.RegisterType&lt;IWcfService&gt;(
      <span style="color:blue">new</span> InjectionFactory(
        c =&gt;
          {
            BasicHttpBinding binding = <span style="color:blue">new</span> BasicHttpBinding();
            EndpointAddress address = <span style="color:blue">new</span> EndpointAddress(<span style="color:#a31515">&quot;http://localhost/myservice&quot;</span>);
            ChannelFactory&lt;IWcfService&gt; cf = <span style="color:blue">new</span> ChannelFactory&lt;IWcfService&gt;(binding, address);
            <span style="color:blue">var</span> channel = cf.CreateChannel();
            <span style="color:blue">return</span> channel;
          }));
    Console.WriteLine(<span style="color:#a31515">&quot;Enter name to send to service:&quot;</span>);
    <span style="color:blue">string</span> name = Console.ReadLine();
    <span style="color:blue">var</span> proxy = container.Resolve&lt;IWcfService&gt;();
    <span style="color:blue">var</span> result = proxy.Reverse(name);
    Console.WriteLine(result);
    Console.WriteLine(<span style="color:#a31515">&quot;Press ENTER&quot;</span>);
    Console.ReadLine();
  }
}
</pre>
</div>
<p>I don't like generated proxies so I use the ChannelFactory to create a proxy at runtime. There is a sample on how to integrate the ChannelFactory smoothly with Unity in the
<a title="TecX" href="http://tecx.codeplex.com/" rel="nofollow">TecX</a> project (<em>TecX.ServiceModel.AutoMagic</em>). It can also use WCF Discovery to find and use Discovery enabled services without any configuration on the client side. There are some tests that show how
 it is used.</p>
<p>&nbsp;</p>
<p>Hope this helps.</p>

        
    </td>
    <td style="vertical-align: top; width: 134px;" class="Post ">
        
        <div id="Options_711082" class="Options" >
            
        </div>
        
    </td>
</tr>

        <tr><td colspan="3"><div class="PostSeparator"></div></td></tr>
        

<tr id="PostPanel" class="Post" d:forid="711166">
    <td id="PostDetailsCell_711166" style="vertical-align: top; border: solid #BBB 1px; border-bottom: none; border-left: none; border-top: none; width: 114px" class="Post">
        <div class="Details">
            <a name="post711166"></a>
            <div class="UserName" style="white-space: pre-wrap; word-wrap: break-word;"><a class="UserProfileLink" href="http://www.codeplex.com/site/users/view/randylevy">randylevy</a></div>
            <div class="UserRole"></div>
            <div style="white-space: normal" class="SubText"><span class="smartDate" title="12/12/2011 11:17:04 PM" LocalTimeTicks="1323760624">Dec 12, 2011 at 11:17 PM</span></div>
            
            <div style="white-space: normal" class="SubText" id="UpdatedDiv">Edited <span class="smartDate" title="12/12/2011 11:17:54 PM" LocalTimeTicks="1323760674">Dec 12, 2011 at 11:17 PM</span></div>
            
        </div>
    </td>
    <td id="PostContent_711166" style="width: 100%; vertical-align: top;" 
        class=" discussionPost discussionListContent WordWrapBreakWord Post " 
        data-markdown="&#64;weberse&#32;has&#32;given&#32;a&#32;good&#32;example&#32;of&#32;creating&#32;the&#32;proxy&#32;objects.&#32;I&#39;ll&#32;add&#32;that&#32;it&#39;s&#32;also&#32;possible&#32;to&#32;perform&#32;injection&#32;of&#32;the&#32;WCF&#32;services&#32;themselves.&#32;&#38;nbsp&#59;There&#32;are&#32;many&#32;good&#32;articles&#32;to&#32;read&#58;&#32;http&#58;&#47;&#47;blogs.microsoft.co.il&#47;blogs&#47;gadib&#47;archive&#47;2010&#47;11&#47;30&#47;wcf-and-unity-2-0.aspx&#32;http&#58;&#47;&#47;weblogs.asp.net&#47;fabio&#47;archive&#47;2009&#47;03&#47;24&#47;inversion-of-control-with-wcf-and-unity.aspx&#32;http&#58;&#47;&#47;www.neovolve.com&#47;post&#47;2010&#47;05&#47;15&#47;Unity-dependency-injection-for-WCF-services-e28093-Part-1.aspx&#32;http&#58;&#47;&#47;avingtonsolutions.com&#47;blog&#47;Uisng-Unity-with-a-WCF-Service&#32;http&#58;&#47;&#47;www.forkcan.com&#47;viewcode&#47;296&#47;WCF-Service-factory-for-using-Microsoft-Unity-20-to-create-an-instance-of-a-Service&#32;&#38;nbsp&#59;&#32;Basically&#32;the&#32;approach&#32;is&#32;to&#32;create&#32;an&#32;IInstanceProvider&#32;for&#32;Unity&#32;to&#32;instantiate&#32;the&#32;UnityContainer,&#32;create&#32;a&#32;Unity&#32;Service&#32;Behavior,&#32;create&#32;a&#32;Unity&#32;Service&#32;Host,&#32;and&#32;create&#32;a&#32;Unity&#32;Service&#32;Host&#32;Factory.&#32;In&#32;terms&#32;of&#32;the&#32;domain&#32;layer&#32;you&#32;can&#32;just&#32;register&#32;your&#32;types&#32;with&#32;the&#32;container.&#32;&#38;nbsp&#59;Are&#32;there&#32;any&#32;specific&#32;issues&#32;or&#32;questions&#32;you&#32;have&#63;&#32;&#38;nbsp&#59;&#38;nbsp&#59;In&#32;order&#32;to&#32;work&#32;with&#32;your&#32;DAL&#32;and&#32;BLL&#32;classes&#32;you&#32;would&#32;just&#32;use&#32;the&#32;typical&#32;Unity&#32;approach.&#32;&#38;nbsp&#59;I&#32;recommend&#32;reading&#58;&#32;&#38;nbsp&#59;Using&#32;Unity&#32;in&#32;Applications.&#32;&#38;nbsp&#59;&#32;--&#32;&#32;Randy&#32;Levy&#32;Enterprise&#32;Library&#32;support&#32;engineer&#32;entlib.support&#64;live.com">
        
<p>@weberse has given a good example of creating the proxy objects.</p>
<p>I'll add that it's also possible to perform injection of the WCF services themselves. &nbsp;There are many good articles to read:</p>
<div><a href="http://blogs.microsoft.co.il/blogs/gadib/archive/2010/11/30/wcf-and-unity-2-0.aspx" target="_blank" rel="nofollow">http://blogs.microsoft.co.il/blogs/gadib/archive/2010/11/30/wcf-and-unity-2-0.aspx</a></div>
<div><a href="http://weblogs.asp.net/fabio/archive/2009/03/24/inversion-of-control-with-wcf-and-unity.aspx" target="_blank" rel="nofollow">http://weblogs.asp.net/fabio/archive/2009/03/24/inversion-of-control-with-wcf-and-unity.aspx</a></div>
<div><a href="http://www.neovolve.com/post/2010/05/15/Unity-dependency-injection-for-WCF-services-e28093-Part-1.aspx" target="_blank" rel="nofollow">http://www.neovolve.com/post/2010/05/15/Unity-dependency-injection-for-WCF-services-e28093-Part-1.aspx</a></div>
<div><a href="http://avingtonsolutions.com/blog/Uisng-Unity-with-a-WCF-Service" target="_blank" rel="nofollow">http://avingtonsolutions.com/blog/Uisng-Unity-with-a-WCF-Service</a></div>
<div><a href="http://www.forkcan.com/viewcode/296/WCF-Service-factory-for-using-Microsoft-Unity-20-to-create-an-instance-of-a-Service" target="_blank" style="text-decoration:none" rel="nofollow">http://www.forkcan.com/viewcode/296/WCF-Service-factory-for-using-Microsoft-Unity-20-to-create-an-instance-of-a-Service</a></div>
<p>&nbsp;</p>
<div>Basically the approach is to create an IInstanceProvider for Unity to instantiate the UnityContainer, create a Unity Service Behavior, create a Unity Service Host, and create a Unity Service Host Factory.</div>
<p>In terms of the domain layer you can just register your types with the container. &nbsp;Are there any specific issues or questions you have? &nbsp;&nbsp;In order to work with your DAL and BLL classes you would just use the typical Unity approach. &nbsp;I
 recommend reading: &nbsp;<a href="http://msdn.microsoft.com/en-us/library/ff660867(v=PandP.20).aspx" target="_blank" style="text-decoration:none" rel="nofollow">Using Unity in Applications</a>. &nbsp;</p>
<p>-- <br>
Randy Levy<br>
Enterprise Library support engineer<br>
<a href="mailto:entlib.support@live.com" style="text-decoration:none" rel="nofollow">entlib.support@live.com</a></p>

        
    </td>
    <td style="vertical-align: top; width: 134px;" class="Post ">
        
        <div id="Options_711166" class="Options" >
            
        </div>
        
    </td>
</tr>

        <tr><td colspan="3"><div class="PostSeparator"></div></td></tr>
        

<tr id="PostPanel" class="Post" d:forid="711331">
    <td id="PostDetailsCell_711331" style="vertical-align: top; border: solid #BBB 1px; border-bottom: none; border-left: none; border-top: none; width: 114px" class="Post">
        <div class="Details">
            <a name="post711331"></a>
            <div class="UserName" style="white-space: pre-wrap; word-wrap: break-word;"><a class="UserProfileLink" href="http://www.codeplex.com/site/users/view/MaherJendoubi">MaherJendoubi</a></div>
            <div class="UserRole"></div>
            <div style="white-space: normal" class="SubText"><span class="smartDate" title="12/13/2011 9:28:43 AM" LocalTimeTicks="1323797323">Dec 13, 2011 at 9:28 AM</span></div>
            
        </div>
    </td>
    <td id="PostContent_711331" style="width: 100%; vertical-align: top;" 
        class=" discussionPost discussionListContent WordWrapBreakWord Post " 
        data-markdown="Thank&#32;you&#32;&#64;weberse,&#32;I&#32;have&#32;tried&#32;your&#32;sample&#32;but&#32;I&#32;find&#32;issue&#32;with&#32;Topshelf&#32;First,&#32;I&#32;created&#32;a&#32;new&#32;Console&#32;project.&#32;I&#32;use&#32;nuget&#32;1.6&#32;to&#32;add&#32;Unity&#32;and&#32;Topshelf&#32;references,&#32;I&#32;add&#32;a&#32;new&#32;WCF&#32;Service&#32;called&#38;nbsp&#59;WcfService&#32;as&#32;you&#32;did,&#32;then&#32;I&#32;update&#32;the&#32;content&#32;of&#32;WcfService&#32;and&#32;IWcfService&#32;with&#32;the&#32;code&#32;that&#32;you&#32;gave&#32;me.&#32;I&#32;added&#32;also&#32;a&#32;new&#32;class&#32;for&#32;WindowsService.&#32;I&#32;build&#32;the&#32;projet&#32;then&#32;I&#32;got&#32;this&#32;error&#58;&#32;Error&#32;1&#32;The&#32;type&#32;or&#32;namespace&#32;name&#32;&#39;Topshelf&#39;&#32;could&#32;not&#32;be&#32;found&#32;&#40;are&#32;you&#32;missing&#32;a&#32;using&#32;directive&#32;or&#32;an&#32;assembly&#32;reference&#63;&#41;&#32;&#32;and&#32;2&#32;warnings&#58;&#32;Warning&#32;3&#32;The&#32;referenced&#32;assembly&#32;&#34;log4net&#34;&#32;could&#32;not&#32;be&#32;resolved&#32;because&#32;it&#32;has&#32;a&#32;dependency&#32;on&#32;&#34;System.Web,&#32;Version&#61;4.0.0.0,&#32;Culture&#61;neutral,&#32;&#32;PublicKeyToken&#61;b03f5f7f11d50a3a&#34;&#32;which&#32;is&#32;not&#32;in&#32;the&#32;currently&#32;targeted&#32;framework&#32;&#34;.NETFramework,Version&#61;v4.0,Profile&#61;Client&#34;.&#32;&#32;Please&#32;remove&#32;references&#32;to&#32;assemblies&#32;not&#32;in&#32;the&#32;targeted&#32;framework&#32;or&#32;consider&#32;retargeting&#32;your&#32;project.&#32;1-WCFandUnity&#32;Warning&#32;2&#32;The&#32;referenced&#32;assembly&#32;&#34;Topshelf&#34;&#32;could&#32;not&#32;be&#32;resolved&#32;because&#32;it&#32;has&#32;a&#32;dependency&#32;on&#32;&#34;System.Web,&#32;Version&#61;4.0.0.0,&#32;Culture&#61;neutral,&#32;&#32;PublicKeyToken&#61;b03f5f7f11d50a3a&#34;&#32;which&#32;is&#32;not&#32;in&#32;the&#32;currently&#32;targeted&#32;framework&#32;&#34;.NETFramework,Version&#61;v4.0,Profile&#61;Client&#34;.&#32;&#32;Please&#32;remove&#32;references&#32;to&#32;assemblies&#32;not&#32;in&#32;the&#32;targeted&#32;framework&#32;or&#32;consider&#32;retargeting&#32;your&#32;project.&#32;1-WCFandUnity&#32;Did&#32;you&#32;get&#32;such&#32;an&#32;error&#32;and&#32;warnings&#32;please&#63;&#32;Best&#32;regards,&#32;Maher&#32;Jendoubi.&#32;">
        
<p>Thank you @weberse, I have tried your sample but I find issue with Topshelf</p>
<p>First, I created a new Console project.</p>
<p>I use nuget 1.6 to add Unity and Topshelf references, I add a new WCF Service called&nbsp;<span style="font-family:Consolas,'Courier New',Courier,monospace; white-space:pre">WcfService as you did, then I update the content of WcfService and IWcfService with
 the code that you gave me. </span><span style="font-family:Consolas,'Courier New',Courier,monospace; white-space:pre">I added also a new class for
</span><span style="font-family:Consolas,'Courier New',Courier,monospace; white-space:pre">WindowsService.</span></p>
<p><span style="font-family:Consolas,'Courier New',Courier,monospace; white-space:pre">I build the projet then I got this error:</span></p>
<p><span style="font-family:Consolas,'Courier New',Courier,monospace; white-space:pre">Error<span>
</span>1<span> </span>The type or namespace name 'Topshelf' could not be found (are you missing a using directive or an assembly reference?)<span>
</span></span></p>
<p><span style="font-family:Consolas,'Courier New',Courier,monospace; white-space:pre">and 2 warnings:</span></p>
<p><span style="font-family:Consolas,'Courier New',Courier,monospace; white-space:pre">Warning<span>
</span>3<span> </span>The referenced assembly &quot;log4net&quot; could not be resolved because it has a dependency on &quot;System.Web, Version=4.0.0.0, Culture=neutral,
</span></p>
<p><span style="font-family:Consolas,'Courier New',Courier,monospace; white-space:pre">PublicKeyToken=b03f5f7f11d50a3a&quot; which is not in the currently targeted framework &quot;.NETFramework,Version=v4.0,Profile=Client&quot;.
</span></p>
<p><span style="font-family:Consolas,'Courier New',Courier,monospace; white-space:pre">Please remove references to assemblies not in the targeted framework or consider retargeting your project.<span>
</span>1-WCFandUnity</span></p>
<p><span style="font-family:Consolas,'Courier New',Courier,monospace; white-space:pre">Warning<span>
</span>2<span> </span>The referenced assembly &quot;Topshelf&quot; could not be resolved because it has a dependency on &quot;System.Web, Version=4.0.0.0, Culture=neutral,
</span></p>
<p><span style="font-family:Consolas,'Courier New',Courier,monospace; white-space:pre">PublicKeyToken=b03f5f7f11d50a3a&quot; which is not in the currently targeted framework &quot;.NETFramework,Version=v4.0,Profile=Client&quot;.
</span></p>
<p><span style="font-family:Consolas,'Courier New',Courier,monospace; white-space:pre">Please remove references to assemblies not in the targeted framework or consider retargeting your project.<span>
</span>1-WCFandUnity</span></p>
<p>Did you get such an error and warnings please?</p>
<p>Best regards,</p>
<p>Maher Jendoubi.</p>
<p><span style="font-family:Consolas,'Courier New',Courier,monospace; white-space:pre"><br>
</span></p>

        
    </td>
    <td style="vertical-align: top; width: 134px;" class="Post ">
        
        <div id="Options_711331" class="Options" >
            
        </div>
        
    </td>
</tr>

        <tr><td colspan="3"><div class="PostSeparator"></div></td></tr>
        

<tr id="PostPanel" class="Post" d:forid="711336">
    <td id="PostDetailsCell_711336" style="vertical-align: top; border: solid #BBB 1px; border-bottom: none; border-left: none; border-top: none; width: 114px" class="Post">
        <div class="Details">
            <a name="post711336"></a>
            <div class="UserName" style="white-space: pre-wrap; word-wrap: break-word;"><a class="UserProfileLink" href="http://www.codeplex.com/site/users/view/weberse">weberse</a></div>
            <div class="UserRole"></div>
            <div style="white-space: normal" class="SubText"><span class="smartDate" title="12/13/2011 9:37:31 AM" LocalTimeTicks="1323797851">Dec 13, 2011 at 9:37 AM</span></div>
            
        </div>
    </td>
    <td id="PostContent_711336" style="width: 100%; vertical-align: top;" 
        class=" discussionPost discussionListContent WordWrapBreakWord Post " 
        data-markdown="The&#32;console&#32;project&#32;targets&#32;the&#32;&#34;.NET&#32;Framework&#32;4&#32;Client&#32;Profile&#34;.&#32;You&#32;need&#32;to&#32;switch&#32;the&#32;&#34;Target&#32;Framework&#34;&#32;to&#32;&#34;.NET&#32;Framework&#32;4&#34;&#32;in&#32;your&#32;projects&#32;properties.&#32;That&#32;should&#32;do&#32;the&#32;trick.">
        
<p>The console project targets the &quot;.NET Framework 4 Client Profile&quot;. You need to switch the &quot;Target Framework&quot; to &quot;.NET Framework 4&quot; in your projects properties. That should do the trick.</p>

        
    </td>
    <td style="vertical-align: top; width: 134px;" class="Post ">
        
        <div id="Options_711336" class="Options" >
            
        </div>
        
    </td>
</tr>

        <tr><td colspan="3"><div class="PostSeparator"></div></td></tr>
        

<tr id="PostPanel" class="Post" d:forid="711340">
    <td id="PostDetailsCell_711340" style="vertical-align: top; border: solid #BBB 1px; border-bottom: none; border-left: none; border-top: none; width: 114px" class="Post">
        <div class="Details">
            <a name="post711340"></a>
            <div class="UserName" style="white-space: pre-wrap; word-wrap: break-word;"><a class="UserProfileLink" href="http://www.codeplex.com/site/users/view/MaherJendoubi">MaherJendoubi</a></div>
            <div class="UserRole"></div>
            <div style="white-space: normal" class="SubText"><span class="smartDate" title="12/13/2011 9:52:41 AM" LocalTimeTicks="1323798761">Dec 13, 2011 at 9:52 AM</span></div>
            
        </div>
    </td>
    <td id="PostContent_711340" style="width: 100%; vertical-align: top;" 
        class=" discussionPost discussionListContent WordWrapBreakWord Post " 
        data-markdown="I&#32;went&#32;to&#32;my&#32;project&#32;properties&#32;and&#32;I&#32;change&#32;my&#32;console&#32;project&#32;target&#32;from&#38;nbsp&#59;&#34;.NET&#32;Framework&#32;4&#32;Client&#32;Profile&#34;&#32;to&#38;nbsp&#59;&#34;.NET&#32;Framework&#32;4&#34;,&#32;the&#32;result&#32;is&#32;that&#32;the&#32;project&#32;can&#39;t&#32;be&#32;loaded&#32;again,&#32;I&#32;try&#32;to&#32;use&#32;an&#32;class&#32;library&#32;to&#32;test&#32;the&#32;project&#32;but&#32;I&#32;don&#39;t&#32;know&#32;how&#32;to&#32;host&#32;it&#32;the&#32;Topshelf&#32;because&#32;I&#32;get&#32;just&#32;dll.">
        
<p>I went to my project properties and I change my console project target from&nbsp;&quot;.NET Framework 4 Client Profile&quot; to&nbsp;&quot;.NET Framework 4&quot;, the result is that the project can't be loaded again,</p>
<p>I try to use an class library to test the project but I don't know how to host it the Topshelf because I get just dll.</p>

        
    </td>
    <td style="vertical-align: top; width: 134px;" class="Post ">
        
        <div id="Options_711340" class="Options" >
            
        </div>
        
    </td>
</tr>

        <tr><td colspan="3"><div class="PostSeparator"></div></td></tr>
        

<tr id="PostPanel" class="Post" d:forid="711342">
    <td id="PostDetailsCell_711342" style="vertical-align: top; border: solid #BBB 1px; border-bottom: none; border-left: none; border-top: none; width: 114px" class="Post">
        <div class="Details">
            <a name="post711342"></a>
            <div class="UserName" style="white-space: pre-wrap; word-wrap: break-word;"><a class="UserProfileLink" href="http://www.codeplex.com/site/users/view/weberse">weberse</a></div>
            <div class="UserRole"></div>
            <div style="white-space: normal" class="SubText"><span class="smartDate" title="12/13/2011 10:02:04 AM" LocalTimeTicks="1323799324">Dec 13, 2011 at 10:02 AM</span></div>
            
        </div>
    </td>
    <td id="PostContent_711342" style="width: 100%; vertical-align: top;" 
        class=" discussionPost discussionListContent WordWrapBreakWord Post " 
        data-markdown="Sorry,&#32;I&#32;don&#39;t&#32;understand&#32;the&#32;setup&#32;of&#32;your&#32;project.&#32;I&#32;don&#39;t&#32;have&#32;the&#32;sample&#32;solution&#32;at&#32;hand&#32;but&#32;as&#32;far&#32;as&#32;I&#32;can&#32;remember&#32;this&#32;is&#32;what&#32;it&#32;looks&#32;like&#32;Project&#32;&#34;Contract&#34;&#32;-&#38;gt&#59;&#32;Class&#32;Library,&#32;contains&#32;IWcfService.cs,&#32;Profile&#32;can&#32;be&#32;&#34;.NET&#32;Framework&#32;4&#32;Client&#32;Profile&#34;&#32;I&#32;think&#32;Project&#32;&#34;Server&#34;&#32;-&#38;gt&#59;&#32;Console&#32;Project,&#32;&#34;.NET&#32;Framework&#32;4&#34;&#32;profile,&#32;TopShelf&#32;and&#32;Unity&#32;initialized&#32;in&#32;Program.cs,&#32;contains&#32;IRepository,&#32;Repository,&#32;WindowsService&#32;and&#32;WcfService&#32;Project&#32;&#34;Client&#34;&#32;-&#38;gt&#59;&#32;Console&#32;Project,&#32;&#34;.NET&#32;Framework&#32;4&#34;&#32;profile,&#32;only&#32;contains&#32;Program.cs&#32;which&#32;wires&#32;up&#32;Unity&#32;and&#32;WCF&#32;&#38;nbsp&#59;&#32;You&#32;need&#32;to&#32;start&#32;both&#32;Console&#32;Projects&#32;&#40;Server&#32;first,&#32;then&#32;Client&#41;.&#32;For&#32;testing&#32;purposes&#32;this&#32;can&#32;be&#32;done&#32;from&#32;Visual&#32;Studio&#32;&#40;right&#32;click&#32;-&#38;gt&#59;&#32;Debug&#32;-&#38;gt&#59;&#32;Start&#32;new&#32;instance&#41;.">
        
<p>Sorry, I don't understand the setup of your project. I don't have the sample solution at hand but as far as I can remember this is what it looks like</p>
<p>Project &quot;Contract&quot; -&gt; Class Library, contains IWcfService.cs, Profile can be &quot;.NET Framework 4 Client Profile&quot; I think</p>
<p>Project &quot;Server&quot; -&gt; Console Project, &quot;.NET Framework 4&quot; profile, TopShelf and Unity initialized in Program.cs, contains IRepository, Repository, WindowsService and WcfService</p>
<p>Project &quot;Client&quot; -&gt; Console Project, &quot;.NET Framework 4&quot; profile, only contains Program.cs which wires up Unity and WCF</p>
<p>&nbsp;</p>
<p>You need to start both Console Projects (Server first, then Client). For testing purposes this can be done from Visual Studio (right click -&gt; Debug -&gt; Start new instance).</p>

        
    </td>
    <td style="vertical-align: top; width: 134px;" class="Post ">
        
        <div id="Options_711342" class="Options" >
            
        </div>
        
    </td>
</tr>

        <tr><td colspan="3"><div class="PostSeparator"></div></td></tr>
        

<tr id="PostPanel" class="Post" d:forid="711346">
    <td id="PostDetailsCell_711346" style="vertical-align: top; border: solid #BBB 1px; border-bottom: none; border-left: none; border-top: none; width: 114px" class="Post">
        <div class="Details">
            <a name="post711346"></a>
            <div class="UserName" style="white-space: pre-wrap; word-wrap: break-word;"><a class="UserProfileLink" href="http://www.codeplex.com/site/users/view/MaherJendoubi">MaherJendoubi</a></div>
            <div class="UserRole"></div>
            <div style="white-space: normal" class="SubText"><span class="smartDate" title="12/13/2011 10:14:34 AM" LocalTimeTicks="1323800074">Dec 13, 2011 at 10:14 AM</span></div>
            
        </div>
    </td>
    <td id="PostContent_711346" style="width: 100%; vertical-align: top;" 
        class=" discussionPost discussionListContent WordWrapBreakWord Post " 
        data-markdown="how&#32;did&#32;you&#32;do&#32;this&#32;please&#32;I&#32;can&#39;t&#32;do&#32;it&#32;with&#32;vs2010&#32;sp1&#38;nbsp&#59;Project&#32;&#34;Client&#34;&#32;-&#38;gt&#59;&#32;Console&#32;Project,&#32;&#34;.NET&#32;Framework&#32;4&#34;&#32;profile,&#32;only&#32;contains&#32;Program.cs&#32;which&#32;wires&#32;up&#32;Unity&#32;and&#32;WCF&#63;">
        
<p>how did you do this please I can't do it with vs2010 sp1&nbsp;Project &quot;Client&quot; -&gt; Console Project, &quot;.NET Framework 4&quot; profile, only contains Program.cs which wires up Unity and WCF?</p>

        
    </td>
    <td style="vertical-align: top; width: 134px;" class="Post ">
        
        <div id="Options_711346" class="Options" >
            
        </div>
        
    </td>
</tr>

        <tr><td colspan="3"><div class="PostSeparator"></div></td></tr>
        

<tr id="PostPanel" class="Post" d:forid="711351">
    <td id="PostDetailsCell_711351" style="vertical-align: top; border: solid #BBB 1px; border-bottom: none; border-left: none; border-top: none; width: 114px" class="Post">
        <div class="Details">
            <a name="post711351"></a>
            <div class="UserName" style="white-space: pre-wrap; word-wrap: break-word;"><a class="UserProfileLink" href="http://www.codeplex.com/site/users/view/MaherJendoubi">MaherJendoubi</a></div>
            <div class="UserRole"></div>
            <div style="white-space: normal" class="SubText"><span class="smartDate" title="12/13/2011 10:25:59 AM" LocalTimeTicks="1323800759">Dec 13, 2011 at 10:25 AM</span></div>
            
        </div>
    </td>
    <td id="PostContent_711351" style="width: 100%; vertical-align: top;" 
        class=" discussionPost discussionListContent WordWrapBreakWord Post " 
        data-markdown="I&#32;find&#32;it&#32;just&#32;I&#32;need&#32;to&#32;reopen&#32;the&#32;project.&#32;Thank&#32;you&#32;&#64;weberse">
        
<p>I find it just I need to reopen the project. Thank you @weberse</p>

        
    </td>
    <td style="vertical-align: top; width: 134px;" class="Post ">
        
        <div id="Options_711351" class="Options" >
            
        </div>
        
    </td>
</tr>

        <tr><td colspan="3"><div class="PostSeparator"></div></td></tr>
        

<tr id="PostPanel" class="Post" d:forid="711365">
    <td id="PostDetailsCell_711365" style="vertical-align: top; border: solid #BBB 1px; border-bottom: none; border-left: none; border-top: none; width: 114px" class="Post">
        <div class="Details">
            <a name="post711365"></a>
            <div class="UserName" style="white-space: pre-wrap; word-wrap: break-word;"><a class="UserProfileLink" href="http://www.codeplex.com/site/users/view/MaherJendoubi">MaherJendoubi</a></div>
            <div class="UserRole"></div>
            <div style="white-space: normal" class="SubText"><span class="smartDate" title="12/13/2011 10:55:05 AM" LocalTimeTicks="1323802505">Dec 13, 2011 at 10:55 AM</span></div>
            
        </div>
    </td>
    <td id="PostContent_711365" style="width: 100%; vertical-align: top;" 
        class=" discussionPost discussionListContent WordWrapBreakWord Post " 
        data-markdown="&#38;nbsp&#59;&#32;&#64;weberse&#32;I&#32;need&#32;the&#32;code&#32;source&#32;for&#32;the&#32;sample&#32;solution&#32;please.&#32;I&#32;have&#32;a&#32;problem&#32;in&#32;the&#32;server&#32;side,&#32;the&#32;server&#32;launch&#32;a&#32;windows&#32;console&#32;and&#32;it&#32;stops&#32;after&#32;2&#32;or&#32;3&#32;seconds&#32;and&#32;when&#32;I&#32;write&#32;in&#32;the&#32;client&#32;console&#32;my&#32;string&#32;to&#32;reverse,&#38;nbsp&#59;&#32;I&#32;get&#32;an&#32;EndpointNotFoundException&#32;at&#32;the&#32;following&#32;line&#32;of&#32;code&#58;&#38;nbsp&#59;&#32;var&#38;nbsp&#59;result&#38;nbsp&#59;&#61;&#38;nbsp&#59;proxy.Reverse&#40;name&#41;&#59;&#32;&#32;and&#32;the&#32;message&#32;of&#32;the&#32;exception&#32;is&#58;&#32;There&#32;was&#32;no&#32;endpoint&#32;listening&#32;at&#32;http&#58;&#47;&#47;localhost&#47;myservice&#32;that&#32;could&#32;accept&#32;the&#32;message.&#32;This&#32;is&#32;often&#32;caused&#32;by&#32;an&#32;incorrect&#32;address&#32;or&#32;SOAP&#32;action.&#32;See&#32;InnerException,&#32;if&#32;present,&#32;for&#32;more&#32;details.">
        
<p>&nbsp;</p>
<p>@weberse I need the code source for the sample solution please. I have a problem in the server side, the server launch a windows console and it stops after 2 or 3 seconds</p>
<p>and when I write in the client console my string to reverse,&nbsp;</p>
<p>I get an EndpointNotFoundException at the following line of code:&nbsp;</p>
<pre><span>var</span>&nbsp;result&nbsp;=&nbsp;proxy.Reverse(name);
</pre>
<pre>and the message of the exception is:</pre>
<p>There was no endpoint listening at http://localhost/myservice that could accept the message. This is often caused by an incorrect address or SOAP action. See InnerException, if present, for more details.</p>

        
    </td>
    <td style="vertical-align: top; width: 134px;" class="Post ">
        
        <div id="Options_711365" class="Options" >
            
        </div>
        
    </td>
</tr>

        <tr><td colspan="3"><div class="PostSeparator"></div></td></tr>
        

<tr id="PostPanel" class="Post" d:forid="711371">
    <td id="PostDetailsCell_711371" style="vertical-align: top; border: solid #BBB 1px; border-bottom: none; border-left: none; border-top: none; width: 114px" class="Post">
        <div class="Details">
            <a name="post711371"></a>
            <div class="UserName" style="white-space: pre-wrap; word-wrap: break-word;"><a class="UserProfileLink" href="http://www.codeplex.com/site/users/view/weberse">weberse</a></div>
            <div class="UserRole"></div>
            <div style="white-space: normal" class="SubText"><span class="smartDate" title="12/13/2011 11:15:21 AM" LocalTimeTicks="1323803721">Dec 13, 2011 at 11:15 AM</span></div>
            
        </div>
    </td>
    <td id="PostContent_711371" style="width: 100%; vertical-align: top;" 
        class=" discussionPost discussionListContent WordWrapBreakWord Post " 
        data-markdown="I&#32;don&#39;t&#32;have&#32;the&#32;source&#32;code&#32;at&#32;hand&#32;but&#32;I&#32;can&#32;mail&#32;it&#32;to&#32;you&#32;tonight&#32;if&#32;you&#32;send&#32;me&#32;a&#32;PM&#32;with&#32;your&#32;email&#32;address.&#32;Do&#32;you&#32;start&#32;Visual&#32;Studio&#32;as&#32;Administrator&#63;&#32;You&#32;need&#32;admin&#32;privileges&#32;to&#32;open&#32;up&#32;a&#32;WCF&#32;endpoint,&#32;otherwise&#32;you&#32;would&#32;get&#32;an&#32;exception.&#32;Do&#32;you&#32;start&#32;the&#32;Service&#32;before&#32;you&#32;start&#32;the&#32;client&#63;&#32;The&#32;Service&#32;needs&#32;some&#32;time&#32;before&#32;it&#32;is&#32;available.">
        
<p>I don't have the source code at hand but I can mail it to you tonight if you send me a PM with your email address.</p>
<p>Do you start Visual Studio as Administrator? You need admin privileges to open up a WCF endpoint, otherwise you would get an exception.</p>
<p>Do you start the Service before you start the client? The Service needs some time before it is available.</p>

        
    </td>
    <td style="vertical-align: top; width: 134px;" class="Post ">
        
        <div id="Options_711371" class="Options" >
            
        </div>
        
    </td>
</tr>

        <tr><td colspan="3"><div class="PostSeparator"></div></td></tr>
        

<tr id="PostPanel" class="Post" d:forid="711388">
    <td id="PostDetailsCell_711388" style="vertical-align: top; border: solid #BBB 1px; border-bottom: none; border-left: none; border-top: none; width: 114px" class="Post">
        <div class="Details">
            <a name="post711388"></a>
            <div class="UserName" style="white-space: pre-wrap; word-wrap: break-word;"><a class="UserProfileLink" href="http://www.codeplex.com/site/users/view/MaherJendoubi">MaherJendoubi</a></div>
            <div class="UserRole"></div>
            <div style="white-space: normal" class="SubText"><span class="smartDate" title="12/13/2011 11:58:10 AM" LocalTimeTicks="1323806290">Dec 13, 2011 at 11:58 AM</span></div>
            
        </div>
    </td>
    <td id="PostContent_711388" style="width: 100%; vertical-align: top;" 
        class=" discussionPost discussionListContent WordWrapBreakWord Post " 
        data-markdown="OK,&#32;I&#32;started&#32;Visual&#32;Studio&#32;as&#32;Administrator&#32;and&#32;I&#32;started&#32;the&#32;Service&#32;before&#32;the&#32;client.&#32;I&#32;sent&#32;you&#32;my&#32;email.&#32;Thank&#32;you,&#32;Regards,&#32;Maher&#32;Jendoubi.">
        
<p>OK, I started Visual Studio as Administrator and I started the Service before the client. I sent you my email.</p>
<p>Thank you,</p>
<p>Regards,</p>
<p>Maher Jendoubi.</p>

        
    </td>
    <td style="vertical-align: top; width: 134px;" class="Post ">
        
        <div id="Options_711388" class="Options" >
            
        </div>
        
    </td>
</tr>

        <tr><td colspan="3"><div class="PostSeparator"></div></td></tr>
        

<tr id="PostPanel" class="Post" d:forid="711431">
    <td id="PostDetailsCell_711431" style="vertical-align: top; border: solid #BBB 1px; border-bottom: none; border-left: none; border-top: none; width: 114px" class="Post">
        <div class="Details">
            <a name="post711431"></a>
            <div class="UserName" style="white-space: pre-wrap; word-wrap: break-word;"><a class="UserProfileLink" href="http://www.codeplex.com/site/users/view/MaherJendoubi">MaherJendoubi</a></div>
            <div class="UserRole"></div>
            <div style="white-space: normal" class="SubText"><span class="smartDate" title="12/13/2011 1:16:13 PM" LocalTimeTicks="1323810973">Dec 13, 2011 at 1:16 PM</span></div>
            
        </div>
    </td>
    <td id="PostContent_711431" style="width: 100%; vertical-align: top;" 
        class=" discussionPost discussionListContent WordWrapBreakWord Post " 
        data-markdown="&#64;randylevy&#38;nbsp&#59;thank&#32;you&#32;for&#32;the&#32;reply&#32;and&#32;the&#32;links,&#32;I&#32;started&#32;with&#32;the&#32;sample&#32;solution&#32;of&#32;&#64;weberse&#32;but&#32;my&#32;system&#32;architecture&#32;is&#32;different.&#32;In&#32;the&#32;Server&#32;projet&#32;I&#32;have&#32;4&#32;WCF&#32;Services.&#32;3&#32;of&#32;my&#32;WCF&#32;Services&#32;send&#32;some&#32;data&#32;to&#32;notify&#32;the&#32;forth&#32;WCF&#32;Service.&#32;So&#32;let&#39;s&#32;forget&#32;the&#32;Client&#32;project.&#32;I&#32;have&#32;one&#32;Server&#32;Project.&#32;Is&#32;this&#32;technically&#32;possible&#32;with&#32;WCF&#63;">
        
<p>@<a href="http://www.codeplex.com/site/users/view/randylevy" rel="nofollow">randylevy</a>&nbsp;thank you for the reply and the links, I started with the sample solution of @weberse but my system architecture is different. In the Server projet I have 4 WCF Services.</p>
<p>3 of my WCF Services send some data to notify the forth WCF Service. So let's forget the Client project. I have one Server Project. Is this technically possible with WCF?</p>

        
    </td>
    <td style="vertical-align: top; width: 134px;" class="Post ">
        
        <div id="Options_711431" class="Options" >
            
        </div>
        
    </td>
</tr>

        <tr><td colspan="3"><div class="PostSeparator"></div></td></tr>
        

<tr id="PostPanel" class="Post" d:forid="711432">
    <td id="PostDetailsCell_711432" style="vertical-align: top; border: solid #BBB 1px; border-bottom: none; border-left: none; border-top: none; width: 114px" class="Post">
        <div class="Details">
            <a name="post711432"></a>
            <div class="UserName" style="white-space: pre-wrap; word-wrap: break-word;"><a class="UserProfileLink" href="http://www.codeplex.com/site/users/view/MaherJendoubi">MaherJendoubi</a></div>
            <div class="UserRole"></div>
            <div style="white-space: normal" class="SubText"><span class="smartDate" title="12/13/2011 1:19:01 PM" LocalTimeTicks="1323811141">Dec 13, 2011 at 1:19 PM</span></div>
            
        </div>
    </td>
    <td id="PostContent_711432" style="width: 100%; vertical-align: top;" 
        class=" discussionPost discussionListContent WordWrapBreakWord Post " 
        data-markdown="It&#32;is&#32;as&#32;if&#32;my&#32;3&#32;WCF&#32;Services&#32;are&#32;client&#32;of&#32;my&#32;server&#32;which&#32;the&#32;forth&#32;WCF&#32;Service.">
        
<p>It is as if my 3 WCF Services are client of my server which the forth WCF Service.</p>

        
    </td>
    <td style="vertical-align: top; width: 134px;" class="Post ">
        
        <div id="Options_711432" class="Options" >
            
        </div>
        
    </td>
</tr>

</table>
    </div>

    
        <div class="StandardMarginTop">
            <a id="SignInToAddCommentLink" href="https://www.codeplex.com/site/login?RedirectUrl=http%3a%2f%2funity.codeplex.com%2fdiscussions%2f282646">
                Sign in to post message or set email notifications
            </a>
        </div>
    


    <div id="PostEditorContainer">
        <a name="editor"></a>
        <div id="Editor" style="display: none;">
            

<div class="MarkdownEditor" data-options-id="a80f437a-68c6-4dc0-a7bc-e61fc9fd5874">
    <script class="options" defer="defer" id="a80f437a-68c6-4dc0-a7bc-e61fc9fd5874" type="application/json">{"maxLength":10000,"styleSheetLocation":""}</script>

    <div class="MarkdownEditorControls">
        <a href="#" tabindex="-1" class="control md_help" title="Markdown Syntax Guide"></a>
        <div class="control md_divider"></div>
        <a href="#" tabindex="-1" class="control md_header" title="Insert Header (CTRL + H)"></a>
        <a href="#" tabindex="-1" class="control md_code" title="Insert Code (CTRL + K)"></a>
        <a href="#" tabindex="-1" class="control md_quote" title="Insert Quote (CTRL + Q)"></a>
        <a href="#" tabindex="-1" class="control md_img" title="Insert Img (CTRL + G)"></a>
        <a href="#" tabindex="-1" class="control md_link" title="Insert Link (CTRL + L)"></a>
        <a href="#" tabindex="-1" class="control md_ulist" title="Unordered List (CTRL + U)"></a>
        <a href="#" tabindex="-1" class="control md_olist" title="Ordered List (CTRL + O)"></a>
        <a href="#" tabindex="-1" class="control md_italics" title="Italic Text (CTRL + I)"></a>
        <a href="#" tabindex="-1" class="control md_bold" title="Bold Text (CTRL + B)"></a>
    </div>

    

<div class="tab_control">
    <!-- Generate the basic HTML for the tabs. -->
    
        <div id="Compose"
              class="tab selected"
              data-custom-header-id=""
              data-tab-contents-id="compose_contents_7fda5a95-2bd8-49f9-aee4-68929bbcc064">
            Compose
        </div>
    
        <div id="Preview"
              class="tab "
              data-custom-header-id=""
              data-tab-contents-id="preview_contents_62e7ab37-fc76-4e77-b8bd-6a12a834b1bb">
            Preview
        </div>
    
    <div class="clear"></div>
</div>


    <div id="compose_contents_7fda5a95-2bd8-49f9-aee4-68929bbcc064" class="compose_tab_content">
        <textarea class=" MarkdownEditorDimensions" cols="20" id="MarkdownEditor" name="content" rows="2">
</textarea>
        <div class="ClearBoth"></div>

        <div class="markdownGuide" style="display: none">
            <table>
                <tr>
                    <td class="markdownGuideColumn">
                        <h1>Text Formatting</h1>
                        <div># Header 1</div>
                        <div>## Header 2</div>
                        <br />
                        <div>*italics* (or _italics_)</div>
                        <div>**bold** (or __bold__)</div>
                    </td>
                    <td class="markdownGuideColumn">
                        <h1>Lists</h1>
                        <div>* Unordered List</div>
                        <div>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp * SubItem</div>
                        <br />
                        <div>1. Ordered List</div>
                        <div>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp 1. SubItem</div>
                    </td>
                    <td class="markdownGuideColumn">
                        <h1>Quotes</h1>
                        <div>> Lorem ipsum</div>
                        <div>dolor sitamet </div>
                        <div>non. Lectus at</div>
                        <div>nam nunc...</div>
                    </td>
                    <td class="markdownGuideColumn">
                        <h1>Code</h1>
                        <div>`Inline Code`</div>
                        <br />
                        <div>``` C#</div>
                        <div>if (foo==bar)</div>
                        <div>&nbsp&nbsp&nbsp&nbsp&nbsp&nbspbar++</div>
                        <div>```</div>
                    </td>
                    <td class="markdownGuideColumn">
                        <h1>References</h1>
                        <div>[Link Text](URL)</div>
                        <br />
                        <div>![Image](URL)</div>
                        <br />
                        <a class="Reference" target="_blank" href="http://codeplex.codeplex.com/wikipage?title=Markdown&referringTitle=Documentation">Markdown Reference</a>
                    </td>
                </tr>
            </table>
        </div>
    </div>
    <div id="preview_contents_62e7ab37-fc76-4e77-b8bd-6a12a834b1bb" class="preview_tab_content markDownOutput">
        
            <div></div>
        
    </div>
    <div class="clear"></div>
</div>

            
            <div class="row" id="recaptcha_row">
                
<script type="text/javascript">
    $(document).ready(function () {
        $('#recaptcha_reload').attr('src', '../assets/recaptcha_refresh.png');
        $('#recaptcha_switch_audio').attr('src', '../assets/recaptcha_audio.png');
        $('#recaptcha_switch_img').attr('src', '../assets/recaptcha_text.png');
        $('#recaptcha_whatsthis').attr('src', '../assets/recaptcha_help.png');
        $('#recaptcha_area tr:first').attr('height', '35');
    });
</script>

                <div class="clear"></div>
                <span id="ReCaptchaError"></span>
            </div>
            <div style="padding-top: 6px;">
                <input type="button" id="SaveButton" value="Save" class="ok" />
                <input type="button" id="CancelButton" value="Cancel" class="cancel" />
                <div class="clear"></div>
            </div>
        </div>
    </div>
</div>

<div id="DeletePostPanel" class="modal" style="display:none">
    <div class="row">
        <h2>Delete Post <a href="javascript:return false;" class="close">X</a></h2>
    </div>
    <div class="modal_info">
        <p>Are you sure you want to delete this post? You will not be able to recover it later.</p>
        <p class="modal_buttons">
            <input type="button" id="ClosePostCancel" value="Cancel" class="cancel" />
            <input type="button" id="ClosePostOk" value="Delete" class="ok" />
        </p>
        <div class="ClearBoth"></div>
    </div>
</div>
        
            <!-- Email notification / Subscription details -->
            
    </div>
</div>
    
<div id="DeleteThreadPanel" class="modal" style="display:none">
    <div class="row">
        <h2>Delete Thread <a href="javascript:return false;" class="close">X</a></h2>
    </div>
    <div class="modal_info">
        <p>Are you sure you want to delete this thread? You will not be able to recover it later.</p>
        <p class="modal_buttons">
            <input type="button" id="CloseThreadCancel" value="Cancel" class="cancel" />
            <input type="button" id="CloseThreadOk" value="Delete" class="ok" />
        </p>
        <div class="ClearBoth"></div>
    </div>
</div>

<script type="text/javascript" language="javascript">
    $(function () {

        $('#recaptcha_response_field')
            .bind('keypress', function (event) { return $submitKeyPressElement(this, event); });


        if ($('#DeleteThreadLink')) {
            $('#DeleteThreadLink').click(function () {
                OpenDialog('#DeleteThreadPanel', true, '41em');
            });
        }
        
        $('#DeleteThreadPanel #CloseThreadOk').click(function () {
            var url = 'http://unity.codeplex.com/discussions/282646';
            $.ajax({
                url: url,
                type: 'DELETE',
                success: function (x) {
                    location.href = x.RedirectUrl;
                }
            });
        });
    });

    workItemMention = new codeplex.ui.WorkItemMention();
    workItemMention.addLinks(".discussionPost");
</script>


        
        
                
                <div class="clear"></div>
                
                <div id="footer">
                    <div class="row">
                        <hr />
                        <ul>
                            <li>Â© 2006-2017 Microsoft</li>
                            <li><a href="http://www.codeplex.com/site/help">Get Help</a></li>
                            <li><a href="/site/legal/privacy">Privacy Statement</a></li>
                            <li><a href="http://www.codeplex.com/site/legal/terms">Terms of Use</a></li>
                            <li><a href="http://www.codeplex.com/site/legal/conduct">Code of Conduct</a></li>
                            <li><a href="http://developermedia.com/" target="_blank">Advertise With Us</a></li>
                            <li>Version 2017.10.3.21062</li>
                        </ul>
                    </div>
                </div>
            </div>
        </form>
    </body>

</html>