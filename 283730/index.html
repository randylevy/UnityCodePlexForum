

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" class="" prefix="og: http://ogp.me/ns# profile: http://ogp.me/ns/profile#">
    
    
    
    

    
    <head>
        <meta id="CompatabilityMode" http-equiv="X-UA-Compatible" content="IE=edge" />
	    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link href="../assets/StyleSheet.css" id="MasterCss" rel="stylesheet" type="text/css" />
        <link rel="SHORTCUT ICON" href="../assets/favicon.ico" />
        <title>patterns &#38; practices - Unity - getting error &#34;The type Database cannot be constructed. You must configure the container to supply this value&#34;</title>
        
       
                    <script src="../assets/mscc-0.3.6.min.js"></script>
        
                    <link rel="stylesheet" type="text/css" href="../assets/mscc-0.3.6.min.css" />
        
            <script type="text/javascript">
                var msccHadCookieBannerAtPageStart = true;
            </script>
        

        <!--
        Third party scripts and code linked to or referenced from this website are licensed to you by the parties that own such code,
        not by Microsoft.  See ASP.NET Ajax CDN Terms of Use â€“ http://www.asp.net/ajaxlibrary/CDN.ashx.
        -->
        <script src="https://ajax.aspnetcdn.com/ajax/jquery/jquery-1.4.4.min.js" type="text/javascript"></script>
        
        <script type="text/javascript">
            if (typeof jQuery === 'undefined') {
                document.write(unescape("%3Cscript src='https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js' type='text/javascript'%3E%3C/script%3E"));
            }
        </script>

        <script src="https://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.6/jquery-ui.min.js" type="text/javascript"></script>
        
        <script type="text/javascript">
            if (typeof jQuery.ui === 'undefined') {
                document.write(unescape("%3Cscript src='https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.6/jquery-ui.min.js' type='text/javascript'%3E%3C/script%3E"));
            }
        </script>

        
    <style type="text/css">.SideBar, .SideBarPadding{display:none;}.MainContent{width:auto;}.SiteContentTable{width:100%;}</style>
    <style id="ProjectStyles" type="text/css">
        .SiteHeader, .SiteHeaderLeft {
            height:45px !important;
            overflow:hidden;
        }
        .SiteContent 
        {
            padding: 0 0 1em 0;
            margin-top:0;
            min-height:225px;
            border-right: 1px solid lightgrey;
            border-left: 1px solid lightgrey;
            border-bottom: 1px solid lightgrey;
        }
        .IE table.MinWidthContent
        {
	        table-layout: auto !important;	
        }
    </style>
    
    
    <meta name="ROBOTS" content="NOINDEX, NOFOLLOW">

    
    
    <meta id="WTProjectName" name="WT.pi" content="unity"/>
    

    <link rel="EditURI" type="application/rsd+xml" title="RSD" href='http://unity.codeplex.com/rsd' />
    <link rel="wlwmanifest" type="application/wlwmanifest+xml" title="WLWManifest" href='/wlwmanifest.xml' />
    
    
        <link rel="alternate" type="application/rss+xml" title="patterns&#32;&#38;&#32;practices&#32;-&#32;Unity" url="http://unity.codeplex.com/project/feeds/rss"/>
    
        
        <link rel="alternate" type="application/rss+xml" title="patterns&#32;&#38;&#32;practices&#32;-&#32;Unity&#32;-&#32;Discussions" url="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fforum%2funity"/>
        
        <link rel="alternate" type="application/rss+xml" title="patterns&#32;&#38;&#32;practices&#32;-&#32;Unity&#32;-&#32;Issues" url="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fworkitem%2funity"/>
        
        <link rel="alternate" type="application/rss+xml" title="patterns&#32;&#38;&#32;practices&#32;-&#32;Unity&#32;-&#32;Downloads" url="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2frelease%2funity"/>
        <link rel="alternate" type="application/rss+xml" title="patterns&#32;&#38;&#32;practices&#32;-&#32;Unity&#32;-&#32;Reviews" url="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2freview%2funity"/>
        
    
        <link rel="alternate" type="application/rss+xml" title="patterns&#32;&#38;&#32;practices&#32;-&#32;Unity&#32;-&#32;Source&#32;code" url="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fsourcecontrol%2funity"/>
        <link rel="alternate" type="application/rss+xml" title="patterns&#32;&#38;&#32;practices&#32;-&#32;Unity&#32;-&#32;Wiki" url="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fwiki%2funity"/>
    
        
    
        <meta content="summary" name="twitter:card" /><meta content="@CodePlex" name="twitter:site" /><meta content="http://unity.codeplex.com/discussions/283730?ProjectName=unity" name="twitter:url" /><meta content="patterns &amp;#38; practices - Unity" name="twitter:title" /><meta content="The Unity Application Block &amp;#40;Unity&amp;#41; is officially under new ownership.&amp;#13;&amp;#10;https&amp;#58;&amp;#47;&amp;#47;github.com&amp;#47;unitycontainer&amp;#47;unity" name="twitter:description" /><meta content="http://www.codeplex.com/Images/codeplex.png" name="twitter:image" /><meta content="CodePlex" property="og:site_name" /><meta content="http://unity.codeplex.com/discussions/283730?ProjectName=unity" property="og:url" /><meta content="object" property="og:type" /><meta content="patterns &amp;#38; practices - Unity" property="og:title" /><meta content="The Unity Application Block &amp;#40;Unity&amp;#41; is officially under new ownership.&amp;#13;&amp;#10;https&amp;#58;&amp;#47;&amp;#47;github.com&amp;#47;unitycontainer&amp;#47;unity" property="og:description" /><meta content="http://www.codeplex.com/Images/codeplex.png" property="og:image" />
        

    </head>
    
    <body>
         
            
        <script src="../assets/ScriptLoader.js" type="text/javascript"></script>
        <form id="aspnetForm" autocomplete="off" method="POST" enctype="multipart/form-data">
            <input name="__RequestVerificationToken" type="hidden" value="9qjDMm9Vi5ely8RoSh0GdkuOMlRQdNPLb5ZY8KmGKOBwFYklFt6Ydeml7lzCkh6DGIHOMSo4qngewPjvORVb71gVVV95aDv1_8S_3UlzqpKN8poEH3jXyIyWfvHoyRFnzet6OA2" /><input name="__RequestVerificationToken2" type="hidden" value="__RequestVerificationToken25ffc641b-174b-416a-81aa-718536ae64bd" />
            
            <div id="UpdateProgressPanel" class="loading_animation" style="display:none;">
                <div class="row">
                    <h2 class="anim_h2">
                        <span id="UpdateProgressText">Updating...</span>
                        <span id="animatedLoadingIconContainer">
                            <img id="animatedLoadingIcon" src="../assets/loading_animation.gif" class="anim_img"/>
                        </span>
                    </h2>
                </div>
            </div>
            
            <div style="display:none;">
                
                <img id="BlankImage" style="width:0;height:0;" src="../assets/blank.png" onload="self.logoImageLoaded=true;"/>

                <script language="javascript" type="text/javascript">
                    var date = new Date();
                    var timezoneOffset = date.getTimezoneOffset() / 60 * -1;
                    var timezoneOffsetCookie = getCookie("TimezoneOffset");
                    var firstTimeSetTimezoneCookie = false;

                    if (timezoneOffsetCookie == null || timezoneOffsetCookie != timezoneOffset) {
                        firstTimeSetTimezoneCookie = true;
                        document.cookie = "TimezoneOffset=" + timezoneOffset + '; domain=.codeplex.com;expires=Wed, 10 Oct 2018 05:26:23 UTC';
                    }
                </script>
            </div>
            
            
            <div id="banner">
                <div id="message"><strong>This is an archived copy of the original CodePlex Unity Discussion Forum</strong><br />Unity is now on <a href="https://github.com/unitycontainer/">GitHub</a>
                    
                </div>
            </div>
            

            <div id="header">
                <div id="header_wrap" class="row">
                    <p id="logo"><a href="http://www.codeplex.com">Code<span class="semi">Plex</span></a><span id="tagline">Project Hosting for Open Source Software</span></p>
                    

<ul id="nav">

    <li><a href="/site/register/new" id="registerLink" class="ZoomFix">Register</a></li>
    <li ><a class="SignInLink" href="https://www.codeplex.com/site/login?RedirectUrl=http%3a%2f%2funity.codeplex.com%2fdiscussions%2f283730" id="signInLink">Sign In</a></li>
  
    <li class="last"><a class="rss_site_icon" href="http://www.codeplex.com/site/feeds/rss" type="application/rss+xml" rel="Alternate" title="CodePlex Site Activity"></a></li>
</ul>
                    <input id="searchsite" name="searchsite" maxlength="500" type="text" value="" /><span id="search_mag"><a id="submitSearch" name="submitSearch" class="magnify" title="Search" href="#"></a></span>
                    <script>
	$(document).ready(function() {
    var searchButton = $('#submitSearch'),
        searchBar = $('#searchsite');

    // Register our own handler for the search event while we wait for the SearchBox script to load.
    searchButton.bind('click.backupSearchBox', doProjectSearch);
    searchBar.bind('keypress.backupSearchBox', function(e) { if ($keyCode(e) === 13) { doProjectSearch(); return false; } });

    function cleanupSearchEvents() {
        // If the SearchBox was loaded, unregister our handlers.
        if (epx_loaded) {
            searchButton.unbind('.backupSearchBox');
            searchBar.unbind('.backupSearchBox');
        }
    }

    $loadScript('http://i4.services.social.microsoft.com/search/Widgets/SearchBox.jss?appid=1000&scopeid=1&boxId=searchsite&btnId=submitSearch&watermark=Search%20all%20projects&overrideWatermark=true&searchLocation=%2fsite%2fsearch&allowEmptySearch=true&focusOnInit=False&minimumTermLength=3', cleanupSearchEvents);
})
function doProjectSearch() {
    
    var url = '/site/search';

    //If search term is not same as watermark
    if($('#searchsite').val() != 'Search all projects')    
    {        
        url = url + '?query=' + encodeURIComponent($('#searchsite').val());
    }

    
    var callback = '';
    if (callback.length > 0 && eval('typeof ' + callback) != 'undefined')
        url += eval(callback + '()');

    window.location.href = url;
    return false;
}
</script>
                </div>
            </div>
            
            <div id="wrap">
                
    <div id="sub_heading" class="row">
        
        <div id="ProjectHeader">
            <div id="project_title_row" class="row">
                <div id="project_logo">
                    
<a id="AffiliateLink" href="http://msdn.microsoft.com/practices">
    <img id="AffiliateImage" src="../assets/pnp_logo.png" title="patterns&#32;&#38;&#32;practices" />
</a>

    
    <h1 class="text_only"><a href="http://unity.codeplex.com/" id="ProjectTitle1"><div>patterns &#38; practices - Unity</div></a></h1>

                </div>
            </div>
        </div>
        
        <div id="ProjectDetailsDiv">
            
        </div>
		<div class="clear"></div>
        

<ul id="page_box_links">
	<li id="homeTabCell" style="width: 63px;"><a id="homeTab" href="http://unity.codeplex.com/" class="box_home">home</a><div></div></li>
    
	<li id="sourceTabCell" style="width:113px;"><a id="sourceTab" href="http://unity.codeplex.com/SourceControl/latest" class="box_source">source code</a><div></div></li>
    
	<li id="releasesTabCell" style="width:105px;"><a id="releasesTab" href="http://unity.codeplex.com/releases" class="box_downloads">downloads</a><div></div></li>
    
    <li id="documentationTabCell" style="width:143px;"><a id="documentationTab" href="http://unity.codeplex.com/documentation" class="box_documentation">documentation</a><div></div></li>
    
	<li id="discussionTabCell" style="width:112px;"><a id="discussionTab" href="../index.html" class="discussions_active">discussions</a><div></div></li>
    
	<li id="workItemsTabCell" style="width:70px;"><a id="workItemsTab" href="http://unity.codeplex.com/workitem/list/basic" class="box_issue">issues</a><div></div></li>
    
	<li id="peopleTabCell" style="width:70px;"><a id="peopleTab" href="http://unity.codeplex.com/team/view" class="box_people">people</a><div></div></li>
	<li id="licenseTabCell" style="width:70px;"><a id="licenseTab" href="http://unity.codeplex.com/license" class="box_license">license</a><div></div></li>
    
    <span class="stretch"></span>
</ul>

<script type="text/javascript">
    $(document).ready(function () {
        $('#page_box_links').applyLastClassToList();
    });
</script>
		    <div class="clear"></div>
            
     <td>
       

<div>
    
    <div id="actionBar" class="action_bar">
        <ul id="actionBar_ul" class="actionBar_sublinks subtab_right" style="vertical-align: middle;">

            

                <li id="li_actionbar_creatediscussion" data-action-id="actionbar_creatediscussion" data-action-type="Navigate" class="actionBar_sublinks" data-options-id="668bd6f8-b48f-4ad3-a649-2a009eb0eaa1">
                
                    <script class="options" defer="defer" id="668bd6f8-b48f-4ad3-a649-2a009eb0eaa1" type="application/json">{"navigate-url":"http://unity.codeplex.com/discussions/create"}</script> 
                    
                    <div class="actionBar_custom_content"></div>

                    <a href="#" id="actionbar_creatediscussion" title="Start a New Thread" class="action_bar_item_link">
                        <img id="img_actionbar_creatediscussion" class="action_bar_item_image" src="../assets/actionbar_newitem.png" style="vertical-align: middle" />
                        New Thread
                    </a>

                </li>

            

                <li id="li_actionbar_subscribe" data-action-id="actionbar_subscribe" data-action-type="PopUp" class="actionBar_sublinks" data-options-id="f6f77a15-b06a-4666-82d0-40dd2b3cabb6">
                
                    <script class="options" defer="defer" id="f6f77a15-b06a-4666-82d0-40dd2b3cabb6" type="application/json">{}</script> 
                    
                    <div class="actionBar_custom_content">

<div id="rssHoverDiv" class="HoverPanel LeftHoverWidth" style="display: none">
        <ul id="3_FeedsPanel" class="RssFeedsPanel">
            <li>
                <a id="ProjectRssLink" href="http://unity.codeplex.com/project/feeds/rss" class="ArrowSmall NoUnderline">All Project Updates</a>
            </li>
            
            <li>
                <a id="DiscussionRssLink" href="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fforum%2funity" class="ArrowSmall NoUnderline">Discussions</a>
            </li>
            
            <li>
                <a id="IssueTrackerRssLink" href="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fworkitem%2funity" class="ArrowSmall NoUnderline">Issue Tracker</a>
            </li>
            
            <li>
                <a id="ReleasesRssLink" href="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2frelease%2funity" class="ArrowSmall NoUnderline">Downloads</a>
            </li>
            <li>
                <a id="ReviewsRssLink" href="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2freview%2funity" class="ArrowSmall NoUnderline">Reviews</a>
            </li>
            
            <li>
                <a id="SourceControlRssLink" href="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fsourcecontrol%2funity" class="ArrowSmall NoUnderline">Source Code</a>
            </li>
            <li>
                <a id="WikiRssLink" href="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fwiki%2funity" class="ArrowSmall NoUnderline">Wiki &amp; Documentation</a>
            </li>
        </ul>
</div></div>

                    <a href="#" id="actionbar_subscribe" title="Subscribe to project updates in RSS feeds." class="action_bar_item_link">
                        <img id="img_actionbar_subscribe" class="action_bar_item_image" src="../assets/actionbar_subscribe.png" style="vertical-align: middle" />
                        Subscribe
                    </a>

                </li>

            
        </ul>
    </div>
</div>
     </td>

        

    </div>
    
    
<div class="Threads">
    <div class="ViewThread">
        
        
        
            <h1 class="page_title WordWrapBreakWord">
                getting error &#34;The type Database cannot be constructed. You must configure the container to supply this value&#34;
            </h1>

            <!-- Private Discussion header -->
            

            <!-- Posts List Header: Topics and Wiki Link -->
            <table class="PostsListHeader">
                <tr>
                    <td>
                     
                    </td>
                    <td>
                        <div class="WikiLink">
                            <span title="Paste this into a wiki page to link to this discussion">
                                Wiki Link: [discussion:283730]
                            </span>
                        </div>
                    </td>
                </tr>
            </table>

            <!-- The list of posts -->
            

<div id="discussionsPostList" data-options-id="ec12568b-09c5-4b9d-93f2-4582b62f50c0">
    <script class="options" defer="defer" id="ec12568b-09c5-4b9d-93f2-4582b62f50c0" type="application/json">{"threadUrl":"http://unity.codeplex.com/discussions/283730","showEditor":false,"checkImageUrl":"../assets/check_answer.png"}</script>

    <div class="Posts" style="margin-top: 10px;">
    

<table cellpadding="0" cellspacing="0" style="width: 100%; margin-bottom: 0px; table-layout:fixed">
    

<tr id="PostPanel" class="Post" d:forid="715389">
    <td id="PostDetailsCell_715389" style="vertical-align: top; border: solid #BBB 1px; border-bottom: none; border-left: none; border-top: none; width: 114px" class="Post">
        <div class="Details">
            <a name="post715389"></a>
            <div class="UserName" style="white-space: pre-wrap; word-wrap: break-word;"><a class="UserProfileLink" href="http://www.codeplex.com/site/users/view/sudhavkiran">sudhavkiran</a></div>
            <div class="UserRole"></div>
            <div style="white-space: normal" class="SubText"><span class="smartDate" title="12/21/2011 10:36:59 AM" LocalTimeTicks="1324492619">Dec 21, 2011 at 10:36 AM</span></div>
            
        </div>
    </td>
    <td id="PostContent_715389" style="width: 100%; vertical-align: top;" 
        class=" discussionPost discussionListContent WordWrapBreakWord Post " 
        data-markdown="&#32;hi&#32;I&#32;do&#32;recently&#32;upgraded&#32;my&#32;entlib&#32;1.0&#32;application&#32;to&#38;nbsp&#59;&#32;entlib5.0&#32;.&#32;after&#32;that&#32;am&#32;getting&#32;error&#32;as&#32;&#38;quot&#59;The&#32;type&#32;Database&#32;cannot&#32;be&#32;constructed.&#32;You&#32;must&#32;configure&#32;the&#32;container&#32;to&#32;supply&#32;this&#32;value&#38;quot&#59;.&#32;please&#32;find&#32;the&#32;code&#32;snippet&#32;below&#58;&#32;&#38;nbsp&#59;&#32;&#32;rotected&#32;DatabaseProviderFactory&#32;ServerDatabaseFactory&#59;&#32;protected&#32;DASDalDatabase&#40;string&#32;serverConfigSection,&#32;System.Security.Principal.WindowsIdentity&#32;windowsIdentity&#41;&#32;&#123;&#32;try&#32;&#123;&#32;string&#32;pagDBConfigFile&#59;&#32;&#35;region&#32;Unused-Commented&#32;code&#32;&#47;&#47;&#32;v-pchett&#32;&#58;&#32;Added&#32;code&#32;to&#32;impersonate&#32;the&#32;actual&#32;user&#32;to&#32;retreive&#32;the&#32;login&#32;id&#32;&#47;&#47;if&#32;&#40;windowsIdentity&#32;&#61;&#61;&#32;null&#41;&#32;&#47;&#47;&#123;&#32;&#47;&#47;&#32;WindowsPrincipal&#32;wp&#32;&#61;&#32;&#40;WindowsPrincipal&#41;Thread.CurrentPrincipal&#59;&#32;&#47;&#47;&#32;WindowsIdentity&#32;wi&#32;&#61;&#32;&#40;WindowsIdentity&#41;wp.Identity&#59;&#32;&#47;&#47;&#32;WindowsImpersonationContext&#32;wc&#32;&#61;&#32;wi.Impersonate&#40;&#41;&#59;&#32;&#47;&#47;&#32;&#47;&#47;&#32;Get&#32;the&#32;current&#32;logged&#32;on&#32;user&#32;User&#32;&#47;&#47;&#32;this.usingIdentity&#32;&#61;&#32;System.Security.Principal.WindowsIdentity.GetCurrent&#40;&#41;&#59;&#32;&#47;&#47;&#32;&#47;&#47;&#32;Undo&#32;the&#32;impersonation&#32;&#32;&#47;&#47;&#32;wc.Undo&#40;&#41;&#59;&#32;&#47;&#47;&#125;&#32;&#47;&#47;else&#32;&#47;&#47;&#123;&#32;&#47;&#47;&#32;usingIdentity&#32;&#61;&#32;windowsIdentity&#59;&#32;&#47;&#47;&#125;&#32;&#35;endregion&#32;&#47;&#47;&#32;We&#32;need&#32;to&#32;locate&#32;this&#32;file.&#32;These&#32;pag&#32;config&#32;files&#32;don&#39;t&#32;seem&#32;to&#32;be&#32;quite&#32;compatible&#32;with&#32;&#47;&#47;&#32;V2&#32;of&#32;the&#32;framework.&#32;Shortest&#32;path&#32;was&#32;to&#32;use&#32;a&#32;third&#32;file&#32;rather&#32;than&#32;figure&#32;out&#32;what&#32;was&#32;&#32;&#47;&#47;&#32;wrong&#32;and&#32;port&#32;the&#32;PAG&#32;configuration&#32;application&#32;blocks.&#32;This&#32;will&#32;find&#32;the&#32;file&#32;&#40;as&#32;long&#32;as&#32;it&#39;s&#32;&#47;&#47;&#32;called&#32;pag.config.&#32;&#38;quot&#59;pag&#38;quot&#59;&#32;is&#32;located&#32;in&#32;app.cofig.&#32;bool&#32;found&#32;&#61;&#32;false&#59;&#32;&#47;&#47;&#32;string&#91;&#93;&#32;keys&#32;&#61;&#32;System.Configuration.ConfigurationSettings.AppSettings.AllKeys&#59;&#32;string&#91;&#93;&#32;keys&#32;&#61;&#32;System.Configuration.ConfigurationManager.AppSettings.AllKeys&#59;&#32;foreach&#32;&#40;string&#32;s&#32;in&#32;keys&#41;&#32;&#123;&#32;if&#32;&#40;s&#32;&#61;&#61;&#32;&#38;quot&#59;pathPag&#38;quot&#59;&#41;&#32;&#123;&#32;found&#32;&#61;&#32;true&#59;&#32;break&#59;&#32;&#125;&#32;&#125;&#32;if&#32;&#40;found&#41;&#32;&#123;&#32;&#47;&#47;&#32;pagDBConfigFile&#32;&#61;&#32;System.Configuration.ConfigurationSettings.AppSettings&#91;&#38;quot&#59;pathPag&#38;quot&#59;&#93;&#59;&#32;pagDBConfigFile&#32;&#61;&#32;System.Configuration.ConfigurationManager.AppSettings&#91;&#38;quot&#59;pathPag&#38;quot&#59;&#93;&#59;&#32;&#125;&#32;else&#32;&#123;&#32;if&#32;&#40;System.Web.HttpContext.Current&#32;&#33;&#61;&#32;null&#41;&#32;&#123;&#32;pagDBConfigFile&#32;&#61;&#32;System.Web.HttpContext.Current.Request.PhysicalApplicationPath&#59;&#32;&#125;&#32;else&#32;&#123;&#32;&#47;&#47;&#32;assume&#32;its&#32;as&#32;winform&#32;pagDBConfigFile&#32;&#61;&#32;Path.GetDirectoryName&#40;this.GetType&#40;&#41;.Module.FullyQualifiedName&#41;&#59;&#32;&#125;&#32;&#125;&#32;if&#32;&#40;pagDBConfigFile.ToCharArray&#40;&#41;&#91;pagDBConfigFile.Length&#32;-&#32;1&#93;&#32;&#33;&#61;&#32;&#39;&#92;&#92;&#39;&#41;&#32;pagDBConfigFile&#32;&#38;&#35;43&#59;&#61;&#32;&#38;quot&#59;&#92;&#92;&#38;quot&#59;&#59;&#32;&#47;&#47;&#32;pagDBConfigFile&#32;&#38;&#35;43&#59;&#61;&#32;System.Configuration.ConfigurationSettings.AppSettings&#91;&#38;quot&#59;pag&#38;quot&#59;&#93;&#59;&#32;pagDBConfigFile&#32;&#38;&#35;43&#59;&#61;&#32;System.Configuration.ConfigurationManager.AppSettings&#91;&#38;quot&#59;pag&#38;quot&#59;&#93;&#59;&#32;string&#32;mapconfigfile&#32;&#61;&#32;&#64;pagDBConfigFile&#59;&#32;&#47;&#47;&#32;This&#32;database&#32;factory&#32;helps&#32;us&#32;create&#32;a&#32;connection&#32;to&#32;a&#32;database&#32;that&#32;doesn&#39;t&#32;happen&#32;to&#32;be&#32;the&#32;default&#32;&#47;&#47;&#32;database.&#32;This&#32;plus&#32;the&#32;string&#32;&#40;next&#32;line&#41;&#32;locate&#32;it&#32;and&#32;build&#32;the&#32;connection&#32;string.&#32;&#47;&#47;kiran-19&#47;12&#47;2011&#32;&#47;&#47;&#32;ServerDatabaseFactory&#32;&#61;&#32;new&#32;PAG.Data.DatabaseProviderFactory&#40;new&#32;ConfigurationContext&#40;pagDBConfigFile&#41;&#41;&#59;&#32;ServerDatabaseFactory&#32;&#61;&#32;new&#32;DatabaseProviderFactory&#40;new&#32;Microsoft.Practices.EnterpriseLibrary.Common.Configuration.FileConfigurationSource&#40;mapconfigfile&#41;&#41;&#59;&#32;&#47;&#47;&#32;This&#32;refers&#32;to&#32;a&#32;string&#32;in&#32;the&#32;pag.config&#32;file&#32;which&#32;identifies&#32;a&#32;section&#32;that&#32;describes&#32;the&#32;server&#32;connection.&#32;&#47;&#47;&#32;It&#32;is&#32;used&#32;along&#32;with&#32;the&#32;database&#32;factory&#32;above&#32;to&#32;create&#32;a&#32;correct&#32;connection&#32;to&#32;the&#32;server..&#32;DatabaseServer&#32;&#61;&#32;serverConfigSection&#59;&#32;&#125;&#32;catch&#32;&#40;System.Exception&#32;ex&#41;&#32;&#123;&#32;throw&#32;&#40;new&#32;DASException&#40;&#38;quot&#59;System&#32;Exception&#38;quot&#59;,&#32;ex&#41;&#41;&#59;&#32;&#125;&#32;&#125;&#32;&#47;&#47;Database&#32;is&#32;initiating&#32;at&#32;here&#32;public&#32;SqlDatabase&#32;GetADatabase&#40;&#41;&#32;&#123;&#32;try&#32;&#123;&#32;&#47;&#47;getting&#32;error&#32;here&#32;Database&#32;dbs&#32;&#61;&#32;ServerDatabaseFactory.Create&#40;&#38;quot&#59;svkiran&#38;quot&#59;&#41;&#59;&#32;DatabaseServer&#32;&#61;&#32;dbs.GetType&#40;&#41;.FullName&#59;&#32;return&#32;&#40;PAG.Data.Sql.SqlDatabase&#41;ServerDatabaseFactory.Create&#40;DatabaseServer&#41;&#59;&#32;&#125;&#32;catch&#32;&#40;System.Exception&#32;ex&#41;&#32;&#123;&#32;throw&#32;&#40;new&#32;DASException&#40;&#38;quot&#59;System&#32;Exception&#38;quot&#59;,&#32;ex&#41;&#41;&#59;&#32;&#125;&#32;&#125;&#32;&#32;&#32;Can&#32;any&#32;one&#32;please&#32;let&#32;me&#32;know&#32;the&#32;solution&#32;how&#32;to&#32;resolve&#32;this.&#32;">
        
<p>hi</p>
<p>I do recently upgraded my entlib 1.0 application to&nbsp; entlib5.0 . after that am getting error as &quot;<em>The type Database cannot be constructed. You must configure the container to supply this value&quot;. please find the code snippet below:</em></p>
<p><em></em>&nbsp;</p>
<div style="color:black; background-color:white">
<pre>rotected DatabaseProviderFactory ServerDatabaseFactory;
   <span style="color:blue">protected</span> DASDalDatabase(<span style="color:blue">string</span> serverConfigSection, System.Security.Principal.WindowsIdentity windowsIdentity)
            {
                <span style="color:blue">try</span>
                {
                    <span style="color:blue">string</span> pagDBConfigFile;
                    <span style="color:blue">#region</span> Unused-Commented code
                    <span style="color:green">// v-pchett : Added code to impersonate the actual user to retreive the login id</span>

                    <span style="color:green">//if (windowsIdentity == null)</span>
                    <span style="color:green">//{</span>
                    <span style="color:green">//    WindowsPrincipal wp = (WindowsPrincipal)Thread.CurrentPrincipal;</span>
                    <span style="color:green">//    WindowsIdentity wi = (WindowsIdentity)wp.Identity;</span>
                    <span style="color:green">//    WindowsImpersonationContext wc = wi.Impersonate();</span>

                    <span style="color:green">//    // Get the current logged on user User</span>
                    <span style="color:green">//    this.usingIdentity = System.Security.Principal.WindowsIdentity.GetCurrent();</span>

                    <span style="color:green">//    // Undo the impersonation							</span>
                    <span style="color:green">//    wc.Undo();</span>
                    <span style="color:green">//}</span>
                    <span style="color:green">//else</span>
                    <span style="color:green">//{</span>
                    <span style="color:green">//    usingIdentity = windowsIdentity;</span>

                    <span style="color:green">//}</span>
                    <span style="color:blue">#endregion</span>


                    <span style="color:green">// We need to locate this file. These pag config files don't seem to be quite compatible with</span>
                    <span style="color:green">// V2 of the framework. Shortest path was to use a third file rather than figure out what was </span>
                    <span style="color:green">// wrong and port the PAG configuration application blocks. This will find the file (as long as it's</span>
                    <span style="color:green">// called pag.config. &quot;pag&quot; is located in app.cofig.</span>

                    <span style="color:blue">bool</span> found = <span style="color:blue">false</span>;
                    <span style="color:green">//					string[] keys = System.Configuration.ConfigurationSettings.AppSettings.AllKeys;</span>
                    <span style="color:blue">string</span>[] keys = System.Configuration.ConfigurationManager.AppSettings.AllKeys;
                    <span style="color:blue">foreach</span> (<span style="color:blue">string</span> s <span style="color:blue">in</span> keys)
                    {
                        <span style="color:blue">if</span> (s == <span style="color:#a31515">&quot;pathPag&quot;</span>)
                        {
                            found = <span style="color:blue">true</span>;
                            <span style="color:blue">break</span>;
                        }
                    }

                    <span style="color:blue">if</span> (found)
                    {
                        <span style="color:green">//	pagDBConfigFile = System.Configuration.ConfigurationSettings.AppSettings[&quot;pathPag&quot;];</span>
                        pagDBConfigFile = System.Configuration.ConfigurationManager.AppSettings[<span style="color:#a31515">&quot;pathPag&quot;</span>];
                    }
                    <span style="color:blue">else</span>
                    {
                        <span style="color:blue">if</span> (System.Web.HttpContext.Current != <span style="color:blue">null</span>)
                        {
                            pagDBConfigFile = System.Web.HttpContext.Current.Request.PhysicalApplicationPath;
                        }
                        <span style="color:blue">else</span>
                        {
                            <span style="color:green">// assume its as winform</span>
                            pagDBConfigFile = Path.GetDirectoryName(<span style="color:blue">this</span>.GetType().Module.FullyQualifiedName);
                        }
                    }

                    <span style="color:blue">if</span> (pagDBConfigFile.ToCharArray()[pagDBConfigFile.Length - 1] != '\\') pagDBConfigFile &#43;= &quot;\\&quot;;

                    <span style="color:green">//					pagDBConfigFile &#43;= System.Configuration.ConfigurationSettings.AppSettings[&quot;pag&quot;];</span>
                    pagDBConfigFile &#43;= System.Configuration.ConfigurationManager.AppSettings[<span style="color:#a31515">&quot;pag&quot;</span>];

                    <span style="color:blue">string</span> mapconfigfile = @pagDBConfigFile;
                    <span style="color:green">// This database factory helps us create a connection to a database that doesn't happen to be the default</span>
                    <span style="color:green">// database. This plus the string (next line) locate it and build the connection string.</span>
                    <span style="color:green">//kiran-19/12/2011</span>
                    <span style="color:green">//  ServerDatabaseFactory = new PAG.Data.DatabaseProviderFactory(new ConfigurationContext(pagDBConfigFile));</span>
                    
                    ServerDatabaseFactory = <span style="color:blue">new</span> DatabaseProviderFactory(<span style="color:blue">new</span> Microsoft.Practices.EnterpriseLibrary.Common.Configuration.FileConfigurationSource(mapconfigfile));
                    <span style="color:green">// This refers to a string in the pag.config file which identifies a section that describes the server connection.</span>
                    <span style="color:green">// It is used along with the database factory above to create a correct connection to the server..</span>
                    
                    DatabaseServer = serverConfigSection;
                  
                }
                <span style="color:blue">catch</span> (System.Exception ex)
                {
                    <span style="color:blue">throw</span> (<span style="color:blue">new</span> DASException(<span style="color:#a31515">&quot;System Exception&quot;</span>, ex));
                }
            }
<span style="color:green">//Database is initiating at here</span>

  <span style="color:blue">public</span> SqlDatabase GetADatabase()
            {
                <span style="color:blue">try</span>
                {
                    <span style="color:green">//getting error here</span>

                    Database dbs = ServerDatabaseFactory.Create(<span style="color:#a31515">&quot;svkiran&quot;</span>);
                    DatabaseServer = dbs.GetType().FullName;
                

                    <span style="color:blue">return</span> (PAG.Data.Sql.SqlDatabase)ServerDatabaseFactory.Create(DatabaseServer);
                }
                <span style="color:blue">catch</span> (System.Exception ex)
                {
                    <span style="color:blue">throw</span> (<span style="color:blue">new</span> DASException(<span style="color:#a31515">&quot;System Exception&quot;</span>, ex));
                }
            }
</pre>
</div>
<p>Can any one please let me know the solution how to resolve this.<em></em></p>

        
    </td>
    <td style="vertical-align: top; width: 134px;" class="Post ">
        
        <div id="Options_715389" class="Options" >
            
        </div>
        
    </td>
</tr>

        <tr><td colspan="3"><div class="PostSeparator"></div></td></tr>
        

<tr id="PostPanel" class="Post" d:forid="715483">
    <td id="PostDetailsCell_715483" style="vertical-align: top; border: solid #BBB 1px; border-bottom: none; border-left: none; border-top: none; width: 114px" class="Post">
        <div class="Details">
            <a name="post715483"></a>
            <div class="UserName" style="white-space: pre-wrap; word-wrap: break-word;"><a class="UserProfileLink" href="http://www.codeplex.com/site/users/view/randylevy">randylevy</a></div>
            <div class="UserRole"></div>
            <div style="white-space: normal" class="SubText"><span class="smartDate" title="12/21/2011 2:46:27 PM" LocalTimeTicks="1324507587">Dec 21, 2011 at 2:46 PM</span></div>
            
        </div>
    </td>
    <td id="PostContent_715483" style="width: 100%; vertical-align: top;" 
        class=" discussionPost discussionListContent WordWrapBreakWord Post " 
        data-markdown="I&#32;would&#32;recommend&#32;reading&#32;up&#32;on&#32;Enterprise&#32;Library&#32;5&#32;Data&#32;Access.&#38;nbsp&#59;&#32;See&#32;the&#32;Enterprise&#32;Library&#32;5.0&#32;Developers&#32;Guide&#32;Chapter&#32;2&#32;-&#32;Much&#32;ADO&#32;about&#32;Data&#32;Access&#32;since&#32;the&#32;approach&#32;is&#32;different&#32;than&#32;in&#32;1.1.&#32;It&#39;s&#32;not&#32;clear&#32;to&#32;me&#32;what&#32;this&#32;code&#32;is&#32;trying&#32;to&#32;do&#58;&#32;Database&#32;dbs&#32;&#61;&#32;ServerDatabaseFactory.Create&#40;&#34;svkiran&#34;&#41;&#59;DatabaseServer&#32;&#61;&#32;dbs.GetType&#40;&#41;.FullName&#59;return&#32;&#40;PAG.Data.Sql.SqlDatabase&#41;ServerDatabaseFactory.Create&#40;DatabaseServer&#41;&#59;&#32;&#38;nbsp&#59;&#32;The&#32;first&#32;line&#32;retrieves&#32;the&#32;Database&#32;defined&#32;in&#32;the&#32;configuration&#32;with&#32;a&#32;connectionString&#32;named&#32;&#34;svkiran&#34;.The&#32;second&#32;line&#32;retrieves&#32;the&#32;name&#32;of&#32;the&#32;type&#32;returned.&#38;nbsp&#59;&#32;This&#32;will&#32;&#40;probably&#41;&#32;be&#32;&#34;Microsoft.Practices.EnterpriseLibrary.Data.Sql.SqlDatabase&#34;.The&#32;third&#32;line&#32;tries&#32;to&#32;go&#32;to&#32;the&#32;configuration&#32;and&#32;retrieve&#32;a&#32;database&#32;based&#32;on&#32;the&#32;connection&#32;string&#32;named&#32;&#34;Microsoft.Practices.EnterpriseLibrary.Data.Sql.SqlDatabase&#34;.&#32;You&#32;just&#32;need&#32;to&#32;properly&#32;configure&#32;the&#32;database&#32;connection&#32;and&#32;return&#32;the&#32;Database&#32;instance&#32;returned&#32;from&#32;the&#32;factory.&#38;nbsp&#59;&#32;I.e.&#58;&#32;return&#32;ServerDatabaseFactory.Create&#40;&#34;svkiran&#34;&#41;&#59;&#32;&#38;nbsp&#59;&#32;--Randy&#32;LevyEnterprise&#32;Library&#32;support&#32;engineerentlib.support&#64;live.com">
        
<p>I would recommend reading up on Enterprise Library 5 Data Access.&nbsp; See the
<a href="http://msdn.microsoft.com/en-us/library/ff953187%28v=PandP.50%29.aspx" target="_blank" rel="nofollow">
Enterprise Library 5.0 Developers Guide Chapter 2 - Much ADO about Data Access</a> since the approach is different than in 1.1.</p>
<p>It's not clear to me what this code is trying to do:</p>
<p>Database dbs = ServerDatabaseFactory.Create(&quot;svkiran&quot;);<br>
DatabaseServer = dbs.GetType().FullName;<br>
<br>
return (PAG.Data.Sql.SqlDatabase)ServerDatabaseFactory.Create(DatabaseServer);</p>
<p>&nbsp;</p>
<p>The first line retrieves the Database defined in the configuration with a connectionString named &quot;svkiran&quot;.<br>
The second line retrieves the name of the type returned.&nbsp; This will (probably) be &quot;Microsoft.Practices.EnterpriseLibrary.Data.Sql.SqlDatabase&quot;.<br>
The third line tries to go to the configuration and retrieve a database based on the connection string named &quot;Microsoft.Practices.EnterpriseLibrary.Data.Sql.SqlDatabase&quot;.</p>
<p>You just need to properly configure the database connection and return the Database instance returned from the factory.&nbsp; I.e.:</p>
<p>return ServerDatabaseFactory.Create(&quot;svkiran&quot;);</p>
<p>&nbsp;</p>
<p>--<br>
Randy Levy<br>
Enterprise Library support engineer<br>
<a href="mailto:entlib.support@live.com" rel="nofollow">entlib.support@live.com</a></p>

        
    </td>
    <td style="vertical-align: top; width: 134px;" class="Post ">
        
        <div id="Options_715483" class="Options" >
            
        </div>
        
    </td>
</tr>

        <tr><td colspan="3"><div class="PostSeparator"></div></td></tr>
        

<tr id="PostPanel" class="Post" d:forid="720970">
    <td id="PostDetailsCell_720970" style="vertical-align: top; border: solid #BBB 1px; border-bottom: none; border-left: none; border-top: none; width: 114px" class="Post">
        <div class="Details">
            <a name="post720970"></a>
            <div class="UserName" style="white-space: pre-wrap; word-wrap: break-word;"><a class="UserProfileLink" href="http://www.codeplex.com/site/users/view/sebaherrera">sebaherrera</a></div>
            <div class="UserRole"></div>
            <div style="white-space: normal" class="SubText"><span class="smartDate" title="1/5/2012 6:37:43 PM" LocalTimeTicks="1325817463">Jan 5, 2012 at 6:37 PM</span></div>
            
        </div>
    </td>
    <td id="PostContent_720970" style="width: 100%; vertical-align: top;" 
        class=" discussionPost discussionListContent WordWrapBreakWord Post " 
        data-markdown="Hi&#32;Randy&#32;-&#32;All,&#32;I&#38;acute&#59;m&#32;receiving&#32;a&#32;similar&#32;message&#32;&#58;&#32;&#32;The&#32;type&#32;HttpContextBase&#32;cannot&#32;be&#32;constructed.&#32;You&#32;must&#32;configure&#32;the&#32;container&#32;to&#32;supply&#32;this&#32;value.&#32;&#38;nbsp&#59;&#32;Do&#32;you&#32;know&#32;what&#32;does&#32;this&#32;mean&#32;when&#32;unity&#32;says&#32;that&#32;a&#32;container&#32;must&#32;be&#32;configured&#63;...&#32;is&#32;any&#32;part&#32;of&#32;the&#32;container&#32;referred&#32;specifically&#63;&#32;&#38;nbsp&#59;&#32;really&#32;appreciated&#32;your&#32;support.&#32;brgds&#33;&#32;sebastian.&#32;">
        
<p>Hi Randy - All,</p>
<p>I&acute;m receiving a similar message :</p>
<p><span></p>
<h2><em>The type HttpContextBase cannot be constructed. You must configure the container to supply this value.</em></h2>
<p>&nbsp;</p>
<p><em>Do you know what does this mean when unity says that a container must be configured?... is any part of the container referred specifically?</em></p>
<p>&nbsp;</p>
<em>really appreciated your support. brgds! sebastian.</em> </span>
<p></p>

        
    </td>
    <td style="vertical-align: top; width: 134px;" class="Post ">
        
        <div id="Options_720970" class="Options" >
            
        </div>
        
    </td>
</tr>

        <tr><td colspan="3"><div class="PostSeparator"></div></td></tr>
        

<tr id="PostPanel" class="Post" d:forid="720972">
    <td id="PostDetailsCell_720972" style="vertical-align: top; border: solid #BBB 1px; border-bottom: none; border-left: none; border-top: none; width: 114px" class="Post">
        <div class="Details">
            <a name="post720972"></a>
            <div class="UserName" style="white-space: pre-wrap; word-wrap: break-word;"><a class="UserProfileLink" href="http://www.codeplex.com/site/users/view/randylevy">randylevy</a></div>
            <div class="UserRole"></div>
            <div style="white-space: normal" class="SubText"><span class="smartDate" title="1/5/2012 6:45:05 PM" LocalTimeTicks="1325817905">Jan 5, 2012 at 6:45 PM</span></div>
            
            <div style="white-space: normal" class="SubText" id="UpdatedDiv">Edited <span class="smartDate" title="1/5/2012 9:45:58 PM" LocalTimeTicks="1325828758">Jan 5, 2012 at 9:45 PM</span></div>
            
        </div>
    </td>
    <td id="PostContent_720972" style="width: 100%; vertical-align: top;" 
        class=" discussionPost discussionListContent WordWrapBreakWord Post " 
        data-markdown="It&#32;means&#32;that&#32;Unity&#32;doesn&#39;t&#32;know&#32;how&#32;to&#32;create&#32;HttpContextBase.&#38;nbsp&#59;&#32;I.e.&#32;it&#39;s&#32;not&#32;registered&#32;in&#32;the&#32;container.&#32;What&#32;are&#32;you&#32;trying&#32;to&#32;do&#32;that&#32;is&#32;causing&#32;this&#32;error&#63;&#38;nbsp&#59;&#32;Can&#32;you&#32;post&#32;code&#32;and&#32;configuration&#32;&#40;if&#32;applicable&#41;&#63;&#32;&#38;nbsp&#59;&#32;--&#32;Randy&#32;Levy&#32;Enterprise&#32;Library&#32;support&#32;engineer&#32;entlib.support&#64;live.com">
        
<p>It means that Unity doesn't know how to create HttpContextBase.&nbsp; I.e. it's not registered in the container.</p>
<p>What are you trying to do that is causing this error?&nbsp; Can you post code and configuration (if applicable)? &nbsp;</p>
<p>--<br>
Randy Levy<br>
Enterprise Library support engineer<br>
<a href="mailto:entlib.support@live.com" rel="nofollow">entlib.support@live.com</a></p>

        
    </td>
    <td style="vertical-align: top; width: 134px;" class="Post ">
        
        <div id="Options_720972" class="Options" >
            
        </div>
        
    </td>
</tr>

        <tr><td colspan="3"><div class="PostSeparator"></div></td></tr>
        

<tr id="PostPanel" class="Post" d:forid="720991">
    <td id="PostDetailsCell_720991" style="vertical-align: top; border: solid #BBB 1px; border-bottom: none; border-left: none; border-top: none; width: 114px" class="Post">
        <div class="Details">
            <a name="post720991"></a>
            <div class="UserName" style="white-space: pre-wrap; word-wrap: break-word;"><a class="UserProfileLink" href="http://www.codeplex.com/site/users/view/sebaherrera">sebaherrera</a></div>
            <div class="UserRole"></div>
            <div style="white-space: normal" class="SubText"><span class="smartDate" title="1/5/2012 7:33:34 PM" LocalTimeTicks="1325820814">Jan 5, 2012 at 7:33 PM</span></div>
            
        </div>
    </td>
    <td id="PostContent_720991" style="width: 100%; vertical-align: top;" 
        class=" discussionPost discussionListContent WordWrapBreakWord Post " 
        data-markdown="Hi&#32;Randy,&#32;thank&#32;you&#32;for&#32;your&#32;reply.&#32;Well,&#32;I&#38;acute&#59;m&#32;using&#32;HttpContextBase&#32;in&#32;order&#32;to&#32;retrieve&#32;information&#32;like&#32;cookies&#32;and&#32;more.&#32;I&#32;made&#32;a&#32;field&#58;&#32;private&#32;readonly&#32;HttpContextBase&#32;_ContextBase&#59;&#32;a&#32;constructor&#58;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#32;public&#32;Context&#40;HttpContextBase&#32;contextBase,,......&#41;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#32;&#123;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#32;this._ContextBase&#61;&#32;contextBase&#59;&#32;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#32;this........&#59;&#32;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#38;nbsp&#59;&#32;&#125;&#32;and&#32;use&#32;it&#32;to&#32;create&#32;an&#32;environment&#32;for&#32;the&#32;context&#32;of&#32;my&#32;app.&#32;Additionally&#32;I&#32;registered&#32;information&#32;eg&#58;&#32;container.registertype&#40;Iservice,&#32;service&#41;&#32;for&#32;each&#32;Interface&#32;and&#32;main&#32;file&#32;that&#32;I&#32;need&#32;to&#32;use&#32;in&#32;my&#32;app.&#32;When&#32;container.registertype&#32;failed&#32;to&#32;resolve&#32;the&#32;information&#32;appear&#32;the&#32;legend&#32;&#34;you&#32;must&#32;configure&#32;your&#32;container&#34;...&#32;I&#32;faced&#32;similar&#32;situation&#32;with&#32;other&#32;files&#32;-&#32;interfaces&#32;and&#32;services-&#32;and&#32;solve&#32;it&#32;when&#32;I&#32;declared&#32;it&#32;following&#32;that&#32;scheme,&#32;but&#32;based&#32;on&#32;the&#32;fact&#32;that&#32;httpcontextbase&#32;is&#32;part&#32;of&#32;system.web&#32;I&#32;was&#32;not&#32;able&#32;to&#32;reproduce&#32;that&#32;approach&#32;&#40;Interface,&#32;service&#41;.&#32;I&#38;acute&#59;m&#32;new&#32;in&#32;IOC,&#38;nbsp&#59;&#32;sorry&#32;if&#32;its&#32;not&#32;so&#32;clear...&#32;thank&#32;you&#32;so&#32;much..&#32;brgds&#33;">
        
<p>Hi Randy,</p>
<p>thank you for your reply. Well, I&acute;m using HttpContextBase in order to retrieve information like cookies and more. I made a field:</p>
<p>private readonly HttpContextBase _ContextBase;</p>
<p>a constructor:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
<p>public Context(HttpContextBase contextBase,,......)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this._ContextBase= contextBase;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this........;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
<p>and use it to create an environment for the context of my app. Additionally I registered information eg: container.registertype(Iservice, service) for each Interface and main file that I need to use in my app.</p>
<p>When container.registertype failed to resolve the information appear the legend &quot;you must configure your container&quot;... I faced similar situation with other files - interfaces and services- and solve it when I declared it following that scheme, but based
 on the fact that httpcontextbase is part of system.web I was not able to reproduce that approach (Interface, service). I&acute;m new in IOC,&nbsp; sorry if its not so clear... thank you so much.. brgds!</p>

        
    </td>
    <td style="vertical-align: top; width: 134px;" class="Post ">
        
        <div id="Options_720991" class="Options" >
            
        </div>
        
    </td>
</tr>

        <tr><td colspan="3"><div class="PostSeparator"></div></td></tr>
        

<tr id="PostPanel" class="Post" d:forid="721164">
    <td id="PostDetailsCell_721164" style="vertical-align: top; border: solid #BBB 1px; border-bottom: none; border-left: none; border-top: none; width: 114px" class="Post">
        <div class="Details">
            <a name="post721164"></a>
            <div class="UserName" style="white-space: pre-wrap; word-wrap: break-word;"><a class="UserProfileLink" href="http://www.codeplex.com/site/users/view/randylevy">randylevy</a></div>
            <div class="UserRole"></div>
            <div style="white-space: normal" class="SubText"><span class="smartDate" title="1/6/2012 12:08:05 AM" LocalTimeTicks="1325837285">Jan 6, 2012 at 12:08 AM</span></div>
            
            <div style="white-space: normal" class="SubText" id="UpdatedDiv">Edited <span class="smartDate" title="1/6/2012 12:09:36 AM" LocalTimeTicks="1325837376">Jan 6, 2012 at 12:09 AM</span></div>
            
        </div>
    </td>
    <td id="PostContent_721164" style="width: 100%; vertical-align: top;" 
        class=" discussionPost discussionListContent WordWrapBreakWord Post " 
        data-markdown="It&#32;sounds&#32;like&#32;you&#32;want&#32;to&#32;use&#32;a&#32;per-request&#32;object&#32;to&#32;manage&#32;request&#32;state.&#32;&#38;nbsp&#59;One&#32;approach&#32;that&#32;you&#32;can&#32;use&#32;is&#32;a&#32;HierarchicalLifeTimeManager&#32;along&#32;with&#32;ChildContainers.&#38;nbsp&#59;&#32;If&#32;you&#32;are&#32;using&#32;MVC&#32;you&#32;could&#32;take&#32;a&#32;look&#32;at&#32;&#32;Unity.MVC3&#59;&#32;they&#32;use&#32;the&#32;ChildContainer&#32;approach.&#32;The&#32;approach&#32;is&#32;to&#58;&#38;nbsp&#59;&#32;&#32;On&#32;application&#32;start&#58;&#32;create&#32;container&#32;and&#32;register&#32;any&#32;per-request&#32;objects&#32;with&#32;a&#32;HierarchicalLifetimeManager&#32;&#32;When&#32;a&#32;request&#32;needs&#32;to&#32;resolve&#32;an&#32;object,&#32;call&#32;CreateChildContainer&#40;&#41;&#32;and&#32;use&#32;that&#32;container&#32;&#32;When&#32;the&#32;request&#32;is&#32;complete&#32;Dispose&#32;the&#32;child&#32;container&#32;&#32;&#32;I&#32;would&#32;recommend&#32;looking&#32;at&#32;the&#32;&#32;Unity.MVC3&#32;source&#32;code.&#32;In&#32;this&#32;example&#32;I&#32;use&#32;the&#32;HttpContextWrapper&#32;to&#32;contain&#32;the&#32;HttpContext&#32;reference&#32;and&#32;register&#32;that&#32;as&#32;the&#32;implementation&#32;of&#32;the&#32;abstract&#32;class&#32;HttpContextBase.&#32;1&#41;&#32;&#32;&#32;void&#32;Application_Start&#40;object&#32;sender,&#32;EventArgs&#32;e&#41;&#32;&#123;&#32;IUnityContainer&#32;container&#32;&#61;&#32;new&#32;Microsoft.Practices.Unity.UnityContainer&#40;&#41;&#59;&#32;container.RegisterType&#38;lt&#59;HttpContextBase,&#32;HttpContextWrapper&#38;gt&#59;&#40;new&#32;HierarchicalLifetimeManager&#40;&#41;,&#32;new&#32;InjectionFactory&#40;c&#32;&#61;&#38;gt&#59;&#32;new&#32;HttpContextWrapper&#40;HttpContext.Current&#41;&#41;&#41;&#59;&#32;Application&#91;&#34;Container&#34;&#93;&#32;&#61;&#32;container&#59;&#32;&#47;&#47;&#32;Code&#32;that&#32;runs&#32;on&#32;application&#32;startup&#32;&#125;&#32;&#32;&#32;2&#41;&#32;&#32;&#32;public&#32;class&#32;MyClass&#32;&#123;&#32;Context&#32;context&#59;&#32;public&#32;MyClass&#40;Context&#32;context&#41;&#32;&#123;&#32;this.context&#32;&#61;&#32;context&#59;&#32;&#125;&#32;&#125;&#32;public&#32;class&#32;Context&#32;&#123;&#32;private&#32;HttpContextBase&#32;context&#59;&#32;public&#32;Context&#40;HttpContextBase&#32;context&#41;&#32;&#123;&#32;this.context&#32;&#61;&#32;context&#59;&#32;&#125;&#32;&#125;&#32;&#32;&#32;&#47;&#47;&#32;This&#32;would&#32;usually&#32;happen&#32;in&#32;a&#32;base&#32;page&#32;or&#32;some&#32;other&#32;part&#32;of&#32;the&#32;application&#32;pipeline&#32;&#47;&#47;&#32;and&#32;store&#32;the&#32;container&#32;for&#32;future&#32;use&#32;during&#32;this&#32;request.&#32;E.g.&#32;save&#32;in&#32;HttpContext&#32;Items&#32;IUnityContainer&#32;container&#32;&#61;&#32;&#40;Application&#91;&#34;Container&#34;&#93;&#32;as&#32;IUnityContainer&#41;.CreateChildContainer&#40;&#41;&#59;&#32;var&#32;myClass&#32;&#61;&#32;container.Resolve&#38;lt&#59;MyClass&#38;gt&#59;&#40;&#41;&#59;&#32;&#32;&#32;--&#32;Randy&#32;Levy&#32;Enterprise&#32;Library&#32;support&#32;engineer&#32;entlib.support&#64;live.com">
        
<p>It sounds like you want to use a per-request object to manage request state. &nbsp;One approach that you can use is a HierarchicalLifeTimeManager along with ChildContainers.&nbsp;</p>
<p>If you are using MVC you could take a look at <a href="http://unitymvc3.codeplex.com" target="_blank" rel="nofollow">
Unity.MVC3</a>; they use the ChildContainer approach.</p>
<p>The approach is to:&nbsp;</p>
<ol>
<li>On application start: create container and register any per-request objects with a HierarchicalLifetimeManager
</li><li>When a request needs to resolve an object, call CreateChildContainer() and use that container
</li><li>When the request is complete Dispose the child container </li></ol>
<p>I would recommend looking at the <a href="http://unitymvc3.codeplex.com/SourceControl/changeset/view/6723" target="_blank" rel="nofollow">
Unity.MVC3 source code</a>.</p>
<p>In this example I use the HttpContextWrapper to contain the HttpContext reference and register that as the implementation of the abstract class HttpContextBase.</p>
<p>1)</p>
<div style="color:black; background-color:white">
<pre>        <span style="color:blue">void</span> Application_Start(<span style="color:blue">object</span> sender, EventArgs e)
        {
            IUnityContainer container = <span style="color:blue">new</span> Microsoft.Practices.Unity.UnityContainer();
            container.RegisterType&lt;HttpContextBase, HttpContextWrapper&gt;(<span style="color:blue">new</span> HierarchicalLifetimeManager(),
                <span style="color:blue">new</span> InjectionFactory(c =&gt; <span style="color:blue">new</span> HttpContextWrapper(HttpContext.Current)));

            Application[<span style="color:#a31515">&quot;Container&quot;</span>] = container;

            <span style="color:green">// Code that runs on application startup</span>
        }
</pre>
</div>
<p>2)</p>
<div style="color:black; background-color:white">
<pre>    <span style="color:blue">public</span> <span style="color:blue">class</span> MyClass
    {
        Context context;

        <span style="color:blue">public</span> MyClass(Context context)
        {
            <span style="color:blue">this</span>.context = context;
        }
    }

    <span style="color:blue">public</span> <span style="color:blue">class</span> Context
    {
        <span style="color:blue">private</span> HttpContextBase context;

        <span style="color:blue">public</span> Context(HttpContextBase context)
        {
            <span style="color:blue">this</span>.context = context;
        }
    }</pre>
<pre>
<span style="color:green">   // This would usually happen in a base page or some other part of the application pipeline</span>
   <span style="color:green">// and store the container for future use during this request.  E.g. save in HttpContext Items</span>
   IUnityContainer container = (Application[<span style="color:#a31515">&quot;Container&quot;</span>] <span style="color:blue">as</span> IUnityContainer).CreateChildContainer();
   <span style="color:blue">var</span> myClass = container.Resolve&lt;MyClass&gt;();
</pre>
</div>
<p><span>--</span><br>
<span>Randy Levy</span><br>
<span>Enterprise Library support engineer</span><br>
<a href="mailto:entlib.support@live.com" rel="nofollow">entlib.support@live.com</a></p>

        
    </td>
    <td style="vertical-align: top; width: 134px;" class="Post ">
        
        <div id="Options_721164" class="Options" >
            
        </div>
        
    </td>
</tr>

        <tr><td colspan="3"><div class="PostSeparator"></div></td></tr>
        

<tr id="PostPanel" class="Post" d:forid="721180">
    <td id="PostDetailsCell_721180" style="vertical-align: top; border: solid #BBB 1px; border-bottom: none; border-left: none; border-top: none; width: 114px" class="Post">
        <div class="Details">
            <a name="post721180"></a>
            <div class="UserName" style="white-space: pre-wrap; word-wrap: break-word;"><a class="UserProfileLink" href="http://www.codeplex.com/site/users/view/sebaherrera">sebaherrera</a></div>
            <div class="UserRole"></div>
            <div style="white-space: normal" class="SubText"><span class="smartDate" title="1/6/2012 12:32:02 AM" LocalTimeTicks="1325838722">Jan 6, 2012 at 12:32 AM</span></div>
            
        </div>
    </td>
    <td id="PostContent_721180" style="width: 100%; vertical-align: top;" 
        class=" discussionPost discussionListContent WordWrapBreakWord Post " 
        data-markdown="woow&#33;&#32;well,&#32;what&#32;can&#32;I&#32;say...&#32;thank&#32;you&#32;so&#32;much&#32;randy&#33;&#33;.&#32;I&#32;will&#32;follow&#32;your&#32;guidelines...&#32;thank&#32;you&#32;so&#32;much&#33;brgds..&#32;sebastian">
        
<p>woow! well, what can I say... thank you so much randy!!. I will follow your guidelines... thank you so much!brgds.. sebastian</p>

        
    </td>
    <td style="vertical-align: top; width: 134px;" class="Post ">
        
        <div id="Options_721180" class="Options" >
            
        </div>
        
    </td>
</tr>

</table>
    </div>

    
        <div class="StandardMarginTop">
            <a id="SignInToAddCommentLink" href="https://www.codeplex.com/site/login?RedirectUrl=http%3a%2f%2funity.codeplex.com%2fdiscussions%2f283730">
                Sign in to post message or set email notifications
            </a>
        </div>
    


    <div id="PostEditorContainer">
        <a name="editor"></a>
        <div id="Editor" style="display: none;">
            

<div class="MarkdownEditor" data-options-id="01d231ec-d9a8-4b38-a73d-2b980b9013db">
    <script class="options" defer="defer" id="01d231ec-d9a8-4b38-a73d-2b980b9013db" type="application/json">{"maxLength":10000,"styleSheetLocation":""}</script>

    <div class="MarkdownEditorControls">
        <a href="#" tabindex="-1" class="control md_help" title="Markdown Syntax Guide"></a>
        <div class="control md_divider"></div>
        <a href="#" tabindex="-1" class="control md_header" title="Insert Header (CTRL + H)"></a>
        <a href="#" tabindex="-1" class="control md_code" title="Insert Code (CTRL + K)"></a>
        <a href="#" tabindex="-1" class="control md_quote" title="Insert Quote (CTRL + Q)"></a>
        <a href="#" tabindex="-1" class="control md_img" title="Insert Img (CTRL + G)"></a>
        <a href="#" tabindex="-1" class="control md_link" title="Insert Link (CTRL + L)"></a>
        <a href="#" tabindex="-1" class="control md_ulist" title="Unordered List (CTRL + U)"></a>
        <a href="#" tabindex="-1" class="control md_olist" title="Ordered List (CTRL + O)"></a>
        <a href="#" tabindex="-1" class="control md_italics" title="Italic Text (CTRL + I)"></a>
        <a href="#" tabindex="-1" class="control md_bold" title="Bold Text (CTRL + B)"></a>
    </div>

    

<div class="tab_control">
    <!-- Generate the basic HTML for the tabs. -->
    
        <div id="Compose"
              class="tab selected"
              data-custom-header-id=""
              data-tab-contents-id="compose_contents_290d0a0d-d9fd-4740-8ba5-6dcd5e526bb7">
            Compose
        </div>
    
        <div id="Preview"
              class="tab "
              data-custom-header-id=""
              data-tab-contents-id="preview_contents_9272335c-fe55-4115-a3e0-23b5e78448a9">
            Preview
        </div>
    
    <div class="clear"></div>
</div>


    <div id="compose_contents_290d0a0d-d9fd-4740-8ba5-6dcd5e526bb7" class="compose_tab_content">
        <textarea class=" MarkdownEditorDimensions" cols="20" id="MarkdownEditor" name="content" rows="2">
</textarea>
        <div class="ClearBoth"></div>

        <div class="markdownGuide" style="display: none">
            <table>
                <tr>
                    <td class="markdownGuideColumn">
                        <h1>Text Formatting</h1>
                        <div># Header 1</div>
                        <div>## Header 2</div>
                        <br />
                        <div>*italics* (or _italics_)</div>
                        <div>**bold** (or __bold__)</div>
                    </td>
                    <td class="markdownGuideColumn">
                        <h1>Lists</h1>
                        <div>* Unordered List</div>
                        <div>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp * SubItem</div>
                        <br />
                        <div>1. Ordered List</div>
                        <div>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp 1. SubItem</div>
                    </td>
                    <td class="markdownGuideColumn">
                        <h1>Quotes</h1>
                        <div>> Lorem ipsum</div>
                        <div>dolor sitamet </div>
                        <div>non. Lectus at</div>
                        <div>nam nunc...</div>
                    </td>
                    <td class="markdownGuideColumn">
                        <h1>Code</h1>
                        <div>`Inline Code`</div>
                        <br />
                        <div>``` C#</div>
                        <div>if (foo==bar)</div>
                        <div>&nbsp&nbsp&nbsp&nbsp&nbsp&nbspbar++</div>
                        <div>```</div>
                    </td>
                    <td class="markdownGuideColumn">
                        <h1>References</h1>
                        <div>[Link Text](URL)</div>
                        <br />
                        <div>![Image](URL)</div>
                        <br />
                        <a class="Reference" target="_blank" href="http://codeplex.codeplex.com/wikipage?title=Markdown&referringTitle=Documentation">Markdown Reference</a>
                    </td>
                </tr>
            </table>
        </div>
    </div>
    <div id="preview_contents_9272335c-fe55-4115-a3e0-23b5e78448a9" class="preview_tab_content markDownOutput">
        
            <div></div>
        
    </div>
    <div class="clear"></div>
</div>

            
            <div class="row" id="recaptcha_row">
                
<script type="text/javascript">
    $(document).ready(function () {
        $('#recaptcha_reload').attr('src', '../assets/recaptcha_refresh.png');
        $('#recaptcha_switch_audio').attr('src', '../assets/recaptcha_audio.png');
        $('#recaptcha_switch_img').attr('src', '../assets/recaptcha_text.png');
        $('#recaptcha_whatsthis').attr('src', '../assets/recaptcha_help.png');
        $('#recaptcha_area tr:first').attr('height', '35');
    });
</script>

                <div class="clear"></div>
                <span id="ReCaptchaError"></span>
            </div>
            <div style="padding-top: 6px;">
                <input type="button" id="SaveButton" value="Save" class="ok" />
                <input type="button" id="CancelButton" value="Cancel" class="cancel" />
                <div class="clear"></div>
            </div>
        </div>
    </div>
</div>

<div id="DeletePostPanel" class="modal" style="display:none">
    <div class="row">
        <h2>Delete Post <a href="javascript:return false;" class="close">X</a></h2>
    </div>
    <div class="modal_info">
        <p>Are you sure you want to delete this post? You will not be able to recover it later.</p>
        <p class="modal_buttons">
            <input type="button" id="ClosePostCancel" value="Cancel" class="cancel" />
            <input type="button" id="ClosePostOk" value="Delete" class="ok" />
        </p>
        <div class="ClearBoth"></div>
    </div>
</div>
        
            <!-- Email notification / Subscription details -->
            
    </div>
</div>
    
<div id="DeleteThreadPanel" class="modal" style="display:none">
    <div class="row">
        <h2>Delete Thread <a href="javascript:return false;" class="close">X</a></h2>
    </div>
    <div class="modal_info">
        <p>Are you sure you want to delete this thread? You will not be able to recover it later.</p>
        <p class="modal_buttons">
            <input type="button" id="CloseThreadCancel" value="Cancel" class="cancel" />
            <input type="button" id="CloseThreadOk" value="Delete" class="ok" />
        </p>
        <div class="ClearBoth"></div>
    </div>
</div>

<script type="text/javascript" language="javascript">
    $(function () {

        $('#recaptcha_response_field')
            .bind('keypress', function (event) { return $submitKeyPressElement(this, event); });


        if ($('#DeleteThreadLink')) {
            $('#DeleteThreadLink').click(function () {
                OpenDialog('#DeleteThreadPanel', true, '41em');
            });
        }
        
        $('#DeleteThreadPanel #CloseThreadOk').click(function () {
            var url = 'http://unity.codeplex.com/discussions/283730';
            $.ajax({
                url: url,
                type: 'DELETE',
                success: function (x) {
                    location.href = x.RedirectUrl;
                }
            });
        });
    });

    workItemMention = new codeplex.ui.WorkItemMention();
    workItemMention.addLinks(".discussionPost");
</script>


        
        
                
                <div class="clear"></div>
                
                <div id="footer">
                    <div class="row">
                        <hr />
                        <ul>
                            <li>Â© 2006-2017 Microsoft</li>
                            <li><a href="http://www.codeplex.com/site/help">Get Help</a></li>
                            <li><a href="/site/legal/privacy">Privacy Statement</a></li>
                            <li><a href="http://www.codeplex.com/site/legal/terms">Terms of Use</a></li>
                            <li><a href="http://www.codeplex.com/site/legal/conduct">Code of Conduct</a></li>
                            <li><a href="http://developermedia.com/" target="_blank">Advertise With Us</a></li>
                            <li>Version 2017.10.3.21062</li>
                        </ul>
                    </div>
                </div>
            </div>
        </form>
    </body>

</html>