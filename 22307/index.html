

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" class="" prefix="og: http://ogp.me/ns# profile: http://ogp.me/ns/profile#">
    
    
    
    

    
    <head>
        <meta id="CompatabilityMode" http-equiv="X-UA-Compatible" content="IE=edge" />
	    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link href="../assets/StyleSheet.css" id="MasterCss" rel="stylesheet" type="text/css" />
        <link rel="SHORTCUT ICON" href="../assets/favicon.ico" />
        <title>patterns &#38; practices - Unity - Use Cases Not Covered by Current Xml Configuration Schema</title>
        
       
                    <script src="../assets/mscc-0.3.6.min.js"></script>
        
                    <link rel="stylesheet" type="text/css" href="../assets/mscc-0.3.6.min.css" />
        
            <script type="text/javascript">
                var msccHadCookieBannerAtPageStart = true;
            </script>
        

        <!--
        Third party scripts and code linked to or referenced from this website are licensed to you by the parties that own such code,
        not by Microsoft.  See ASP.NET Ajax CDN Terms of Use â€“ http://www.asp.net/ajaxlibrary/CDN.ashx.
        -->
        <script src="https://ajax.aspnetcdn.com/ajax/jquery/jquery-1.4.4.min.js" type="text/javascript"></script>
        
        <script type="text/javascript">
            if (typeof jQuery === 'undefined') {
                document.write(unescape("%3Cscript src='https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js' type='text/javascript'%3E%3C/script%3E"));
            }
        </script>

        <script src="https://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.6/jquery-ui.min.js" type="text/javascript"></script>
        
        <script type="text/javascript">
            if (typeof jQuery.ui === 'undefined') {
                document.write(unescape("%3Cscript src='https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.6/jquery-ui.min.js' type='text/javascript'%3E%3C/script%3E"));
            }
        </script>

        
    <style type="text/css">.SideBar, .SideBarPadding{display:none;}.MainContent{width:auto;}.SiteContentTable{width:100%;}</style>
    <style id="ProjectStyles" type="text/css">
        .SiteHeader, .SiteHeaderLeft {
            height:45px !important;
            overflow:hidden;
        }
        .SiteContent 
        {
            padding: 0 0 1em 0;
            margin-top:0;
            min-height:225px;
            border-right: 1px solid lightgrey;
            border-left: 1px solid lightgrey;
            border-bottom: 1px solid lightgrey;
        }
        .IE table.MinWidthContent
        {
	        table-layout: auto !important;	
        }
    </style>
    
    
    <meta name="ROBOTS" content="NOINDEX, NOFOLLOW">

    
    
    <meta id="WTProjectName" name="WT.pi" content="unity"/>
    

    <link rel="EditURI" type="application/rsd+xml" title="RSD" href='http://unity.codeplex.com/rsd' />
    <link rel="wlwmanifest" type="application/wlwmanifest+xml" title="WLWManifest" href='/wlwmanifest.xml' />
    
    
        <link rel="alternate" type="application/rss+xml" title="patterns&#32;&#38;&#32;practices&#32;-&#32;Unity" url="http://unity.codeplex.com/project/feeds/rss"/>
    
        
        <link rel="alternate" type="application/rss+xml" title="patterns&#32;&#38;&#32;practices&#32;-&#32;Unity&#32;-&#32;Discussions" url="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fforum%2funity"/>
        
        <link rel="alternate" type="application/rss+xml" title="patterns&#32;&#38;&#32;practices&#32;-&#32;Unity&#32;-&#32;Issues" url="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fworkitem%2funity"/>
        
        <link rel="alternate" type="application/rss+xml" title="patterns&#32;&#38;&#32;practices&#32;-&#32;Unity&#32;-&#32;Downloads" url="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2frelease%2funity"/>
        <link rel="alternate" type="application/rss+xml" title="patterns&#32;&#38;&#32;practices&#32;-&#32;Unity&#32;-&#32;Reviews" url="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2freview%2funity"/>
        
    
        <link rel="alternate" type="application/rss+xml" title="patterns&#32;&#38;&#32;practices&#32;-&#32;Unity&#32;-&#32;Source&#32;code" url="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fsourcecontrol%2funity"/>
        <link rel="alternate" type="application/rss+xml" title="patterns&#32;&#38;&#32;practices&#32;-&#32;Unity&#32;-&#32;Wiki" url="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fwiki%2funity"/>
    
        
    
        <meta content="summary" name="twitter:card" /><meta content="@CodePlex" name="twitter:site" /><meta content="http://unity.codeplex.com/discussions/22307?ProjectName=unity" name="twitter:url" /><meta content="patterns &amp;#38; practices - Unity" name="twitter:title" /><meta content="The Unity Application Block &amp;#40;Unity&amp;#41; is officially under new ownership.&amp;#13;&amp;#10;https&amp;#58;&amp;#47;&amp;#47;github.com&amp;#47;unitycontainer&amp;#47;unity" name="twitter:description" /><meta content="http://www.codeplex.com/Images/codeplex.png" name="twitter:image" /><meta content="CodePlex" property="og:site_name" /><meta content="http://unity.codeplex.com/discussions/22307?ProjectName=unity" property="og:url" /><meta content="object" property="og:type" /><meta content="patterns &amp;#38; practices - Unity" property="og:title" /><meta content="The Unity Application Block &amp;#40;Unity&amp;#41; is officially under new ownership.&amp;#13;&amp;#10;https&amp;#58;&amp;#47;&amp;#47;github.com&amp;#47;unitycontainer&amp;#47;unity" property="og:description" /><meta content="http://www.codeplex.com/Images/codeplex.png" property="og:image" />
        

    </head>
    
    <body>
         
            
        <script src="../assets/ScriptLoader.js" type="text/javascript"></script>
        <form id="aspnetForm" autocomplete="off" method="POST" enctype="multipart/form-data">
            <input name="__RequestVerificationToken" type="hidden" value="wxhvn-sHa4_jOotflWYkoYuUgyDq3qTVK0NPnByHX--PEEuQnOzyJ-18lGRXJW8abXD72Fw5El6Qb-biShdna_IQ0x7lxZEUNKUpJKGeFuMQuuKx_ZRPUXtqPCdJzu2wzHyZ0w2" /><input name="__RequestVerificationToken2" type="hidden" value="__RequestVerificationToken26b04b0cc-16bc-4566-96f3-dca0b0dcd7f5" />
            
            <div id="UpdateProgressPanel" class="loading_animation" style="display:none;">
                <div class="row">
                    <h2 class="anim_h2">
                        <span id="UpdateProgressText">Updating...</span>
                        <span id="animatedLoadingIconContainer">
                            <img id="animatedLoadingIcon" src="../assets/loading_animation.gif" class="anim_img"/>
                        </span>
                    </h2>
                </div>
            </div>
            
            <div style="display:none;">
                
                <img id="BlankImage" style="width:0;height:0;" src="../assets/blank.png" onload="self.logoImageLoaded=true;"/>

                <script language="javascript" type="text/javascript">
                    var date = new Date();
                    var timezoneOffset = date.getTimezoneOffset() / 60 * -1;
                    var timezoneOffsetCookie = getCookie("TimezoneOffset");
                    var firstTimeSetTimezoneCookie = false;

                    if (timezoneOffsetCookie == null || timezoneOffsetCookie != timezoneOffset) {
                        firstTimeSetTimezoneCookie = true;
                        document.cookie = "TimezoneOffset=" + timezoneOffset + '; domain=.codeplex.com;expires=Wed, 10 Oct 2018 05:29:26 UTC';
                    }
                </script>
            </div>
            
            
            <div id="banner">
                <div id="message"><strong>This is an archived copy of the original CodePlex Unity Discussion Forum</strong><br />Unity is now on <a href="https://github.com/unitycontainer/">GitHub</a>
                    
                </div>
            </div>
            

            <div id="header">
                <div id="header_wrap" class="row">
                    <p id="logo"><a href="http://www.codeplex.com">Code<span class="semi">Plex</span></a><span id="tagline">Project Hosting for Open Source Software</span></p>
                    

<ul id="nav">

    <li><a href="/site/register/new" id="registerLink" class="ZoomFix">Register</a></li>
    <li ><a class="SignInLink" href="https://www.codeplex.com/site/login?RedirectUrl=http%3a%2f%2funity.codeplex.com%2fdiscussions%2f22307" id="signInLink">Sign In</a></li>
  
    <li class="last"><a class="rss_site_icon" href="http://www.codeplex.com/site/feeds/rss" type="application/rss+xml" rel="Alternate" title="CodePlex Site Activity"></a></li>
</ul>
                    <input id="searchsite" name="searchsite" maxlength="500" type="text" value="" /><span id="search_mag"><a id="submitSearch" name="submitSearch" class="magnify" title="Search" href="#"></a></span>
                    <script>
	$(document).ready(function() {
    var searchButton = $('#submitSearch'),
        searchBar = $('#searchsite');

    // Register our own handler for the search event while we wait for the SearchBox script to load.
    searchButton.bind('click.backupSearchBox', doProjectSearch);
    searchBar.bind('keypress.backupSearchBox', function(e) { if ($keyCode(e) === 13) { doProjectSearch(); return false; } });

    function cleanupSearchEvents() {
        // If the SearchBox was loaded, unregister our handlers.
        if (epx_loaded) {
            searchButton.unbind('.backupSearchBox');
            searchBar.unbind('.backupSearchBox');
        }
    }

    $loadScript('http://i4.services.social.microsoft.com/search/Widgets/SearchBox.jss?appid=1000&scopeid=1&boxId=searchsite&btnId=submitSearch&watermark=Search%20all%20projects&overrideWatermark=true&searchLocation=%2fsite%2fsearch&allowEmptySearch=true&focusOnInit=False&minimumTermLength=3', cleanupSearchEvents);
})
function doProjectSearch() {
    
    var url = '/site/search';

    //If search term is not same as watermark
    if($('#searchsite').val() != 'Search all projects')    
    {        
        url = url + '?query=' + encodeURIComponent($('#searchsite').val());
    }

    
    var callback = '';
    if (callback.length > 0 && eval('typeof ' + callback) != 'undefined')
        url += eval(callback + '()');

    window.location.href = url;
    return false;
}
</script>
                </div>
            </div>
            
            <div id="wrap">
                
    <div id="sub_heading" class="row">
        
        <div id="ProjectHeader">
            <div id="project_title_row" class="row">
                <div id="project_logo">
                    
<a id="AffiliateLink" href="http://msdn.microsoft.com/practices">
    <img id="AffiliateImage" src="../assets/pnp_logo.png" title="patterns&#32;&#38;&#32;practices" />
</a>

    
    <h1 class="text_only"><a href="http://unity.codeplex.com/" id="ProjectTitle1"><div>patterns &#38; practices - Unity</div></a></h1>

                </div>
            </div>
        </div>
        
        <div id="ProjectDetailsDiv">
            
        </div>
		<div class="clear"></div>
        

<ul id="page_box_links">
	<li id="homeTabCell" style="width: 63px;"><a id="homeTab" href="http://unity.codeplex.com/" class="box_home">home</a><div></div></li>
    
	<li id="sourceTabCell" style="width:113px;"><a id="sourceTab" href="http://unity.codeplex.com/SourceControl/latest" class="box_source">source code</a><div></div></li>
    
	<li id="releasesTabCell" style="width:105px;"><a id="releasesTab" href="http://unity.codeplex.com/releases" class="box_downloads">downloads</a><div></div></li>
    
    <li id="documentationTabCell" style="width:143px;"><a id="documentationTab" href="http://unity.codeplex.com/documentation" class="box_documentation">documentation</a><div></div></li>
    
	<li id="discussionTabCell" style="width:112px;"><a id="discussionTab" href="../index.html" class="discussions_active">discussions</a><div></div></li>
    
	<li id="workItemsTabCell" style="width:70px;"><a id="workItemsTab" href="http://unity.codeplex.com/workitem/list/basic" class="box_issue">issues</a><div></div></li>
    
	<li id="peopleTabCell" style="width:70px;"><a id="peopleTab" href="http://unity.codeplex.com/team/view" class="box_people">people</a><div></div></li>
	<li id="licenseTabCell" style="width:70px;"><a id="licenseTab" href="http://unity.codeplex.com/license" class="box_license">license</a><div></div></li>
    
    <span class="stretch"></span>
</ul>

<script type="text/javascript">
    $(document).ready(function () {
        $('#page_box_links').applyLastClassToList();
    });
</script>
		    <div class="clear"></div>
            
     <td>
       

<div>
    
    <div id="actionBar" class="action_bar">
        <ul id="actionBar_ul" class="actionBar_sublinks subtab_right" style="vertical-align: middle;">

            

                <li id="li_actionbar_creatediscussion" data-action-id="actionbar_creatediscussion" data-action-type="Navigate" class="actionBar_sublinks" data-options-id="dfe1395e-5c50-4c78-b858-a4a853b67422">
                
                    <script class="options" defer="defer" id="dfe1395e-5c50-4c78-b858-a4a853b67422" type="application/json">{"navigate-url":"http://unity.codeplex.com/discussions/create"}</script> 
                    
                    <div class="actionBar_custom_content"></div>

                    <a href="#" id="actionbar_creatediscussion" title="Start a New Thread" class="action_bar_item_link">
                        <img id="img_actionbar_creatediscussion" class="action_bar_item_image" src="../assets/actionbar_newitem.png" style="vertical-align: middle" />
                        New Thread
                    </a>

                </li>

            

                <li id="li_actionbar_subscribe" data-action-id="actionbar_subscribe" data-action-type="PopUp" class="actionBar_sublinks" data-options-id="cfb79a6f-8495-4ef8-bd94-594b823ecf38">
                
                    <script class="options" defer="defer" id="cfb79a6f-8495-4ef8-bd94-594b823ecf38" type="application/json">{}</script> 
                    
                    <div class="actionBar_custom_content">

<div id="rssHoverDiv" class="HoverPanel LeftHoverWidth" style="display: none">
        <ul id="3_FeedsPanel" class="RssFeedsPanel">
            <li>
                <a id="ProjectRssLink" href="http://unity.codeplex.com/project/feeds/rss" class="ArrowSmall NoUnderline">All Project Updates</a>
            </li>
            
            <li>
                <a id="DiscussionRssLink" href="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fforum%2funity" class="ArrowSmall NoUnderline">Discussions</a>
            </li>
            
            <li>
                <a id="IssueTrackerRssLink" href="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fworkitem%2funity" class="ArrowSmall NoUnderline">Issue Tracker</a>
            </li>
            
            <li>
                <a id="ReleasesRssLink" href="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2frelease%2funity" class="ArrowSmall NoUnderline">Downloads</a>
            </li>
            <li>
                <a id="ReviewsRssLink" href="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2freview%2funity" class="ArrowSmall NoUnderline">Reviews</a>
            </li>
            
            <li>
                <a id="SourceControlRssLink" href="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fsourcecontrol%2funity" class="ArrowSmall NoUnderline">Source Code</a>
            </li>
            <li>
                <a id="WikiRssLink" href="http://unity.codeplex.com/project/feeds/rss?ProjectRSSFeed=codeplex%3a%2f%2fwiki%2funity" class="ArrowSmall NoUnderline">Wiki &amp; Documentation</a>
            </li>
        </ul>
</div></div>

                    <a href="#" id="actionbar_subscribe" title="Subscribe to project updates in RSS feeds." class="action_bar_item_link">
                        <img id="img_actionbar_subscribe" class="action_bar_item_image" src="../assets/actionbar_subscribe.png" style="vertical-align: middle" />
                        Subscribe
                    </a>

                </li>

            
        </ul>
    </div>
</div>
     </td>

        

    </div>
    
    
<div class="Threads">
    <div class="ViewThread">
        
        
        
            <h1 class="page_title WordWrapBreakWord">
                Use Cases Not Covered by Current Xml Configuration Schema
            </h1>

            <!-- Private Discussion header -->
            

            <!-- Posts List Header: Topics and Wiki Link -->
            <table class="PostsListHeader">
                <tr>
                    <td>
                     
                    </td>
                    <td>
                        <div class="WikiLink">
                            <span title="Paste this into a wiki page to link to this discussion">
                                Wiki Link: [discussion:22307]
                            </span>
                        </div>
                    </td>
                </tr>
            </table>

            <!-- The list of posts -->
            

<div id="discussionsPostList" data-options-id="6c8bed6b-08db-486f-a336-ee02d1913383">
    <script class="options" defer="defer" id="6c8bed6b-08db-486f-a336-ee02d1913383" type="application/json">{"threadUrl":"http://unity.codeplex.com/discussions/22307","showEditor":false,"checkImageUrl":"../assets/check_answer.png"}</script>

    <div class="Posts" style="margin-top: 10px;">
    

<table cellpadding="0" cellspacing="0" style="width: 100%; margin-bottom: 0px; table-layout:fixed">
    

<tr id="PostPanel" class="Post" d:forid="74348">
    <td id="PostDetailsCell_74348" style="vertical-align: top; border: solid #BBB 1px; border-bottom: none; border-left: none; border-top: none; width: 114px" class="Post">
        <div class="Details">
            <a name="post74348"></a>
            <div class="UserName" style="white-space: pre-wrap; word-wrap: break-word;"><a class="UserProfileLink" href="http://www.codeplex.com/site/users/view/jimmyzimms">jimmyzimms</a></div>
            <div class="UserRole"></div>
            <div style="white-space: normal" class="SubText"><span class="smartDate" title="2/16/2008 7:10:20 PM" LocalTimeTicks="1203217820">Feb 16, 2008 at 7:10 PM</span></div>
            
            <div style="white-space: normal" class="SubText" id="UpdatedDiv">Edited <span class="smartDate" title="2/16/2008 7:17:33 PM" LocalTimeTicks="1203218253">Feb 16, 2008 at 7:17 PM</span></div>
            
        </div>
    </td>
    <td id="PostContent_74348" style="width: 100%; vertical-align: top;" 
        class=" discussionPost discussionListContent WordWrapBreakWord Post " 
        data-markdown="&#32;I&#32;think&#32;that&#32;we&#32;should&#32;see&#32;about&#32;supporting&#32;an&#32;additional&#32;level&#32;of&#32;expressiveness&#32;to&#32;the&#32;Unity&#32;configuration&#32;that&#32;allows&#32;us&#32;to&#32;pick&#32;out&#32;the&#32;constructor&#32;we&#32;want&#32;to&#32;use&#32;for&#32;our&#32;types&#32;in&#32;the&#32;container.Currently&#32;we&#32;have&#32;support&#32;for&#32;this&#58;&#38;lt&#59;unity&#38;gt&#59;&#32;&#38;lt&#59;containers&#32;Default&#61;&#34;containerOne&#34;&#38;gt&#59;&#32;&#38;lt&#59;container&#32;name&#61;&#34;containerOne&#34;&#38;gt&#59;&#32;&#38;lt&#59;types&#38;gt&#59;&#32;&#38;lt&#59;add&#32;name&#61;&#34;MyType1&#34;&#32;type&#61;&#34;Custom.MyBaseClass&#34;&#32;mapTo&#61;&#34;Custom.MyConcreteClass&#34;&#32;&#47;&#38;gt&#59;Which&#32;i&#32;think&#32;is&#32;just&#32;great.&#32;By&#32;default&#32;Unity&#32;is&#32;built&#32;around&#32;the&#32;use&#32;case&#32;for&#32;types&#32;that&#32;have&#32;a&#32;single&#32;constructor.&#32;If&#32;multiple&#32;are&#32;available,&#32;unity&#32;is&#32;going&#32;to&#32;take&#32;the&#32;first&#32;ConstructorInfo&#32;that&#32;comes&#32;out&#32;of&#32;Type.GetConstructors&#40;&#41;&#32;array.&#32;To&#32;allow&#32;us&#32;to&#32;deterministically&#32;use&#32;a&#32;specific&#32;constructor&#32;we&#32;can&#32;decorate&#32;the&#32;constructor&#32;in&#32;question&#32;with&#32;an&#32;attribute.&#32;Which&#32;is&#32;also&#32;fine&#32;and&#32;dandy&#32;for&#32;many&#32;use&#32;cases.&#32;However&#32;it&#32;lacks&#32;some&#32;of&#32;the&#32;flexibility&#32;that&#32;I&#32;think&#32;many&#32;of&#32;us&#32;would&#32;like&#32;to&#32;see.&#32;There&#39;s&#32;three&#32;specific&#32;use&#32;cases&#32;where&#32;I&#32;can&#32;think&#32;this&#32;is&#32;really&#32;needed&#58;1.&#32;3rd&#32;party&#32;code&#32;or&#32;existing&#32;libraries&#32;with&#32;classes&#32;that&#32;have&#32;many&#32;constructors&#32;and&#32;doesn&#39;t&#32;know&#32;anything&#32;about&#32;Unity.&#32;To&#32;accomplish&#32;this&#32;use&#32;case&#32;today&#32;we&#39;d&#32;probably&#32;resort&#32;to&#32;a&#32;factory&#32;object&#32;with&#32;a&#32;default&#32;or&#32;single&#32;parameterized&#32;constructor&#32;that&#32;had&#32;a&#32;method&#32;to&#32;build&#32;up&#32;the&#32;other&#32;class.&#32;Get&#39;s&#32;the&#32;job&#32;done&#32;easily&#32;and&#32;franky&#32;does&#32;the&#32;trick&#32;without&#32;too&#32;much&#32;effort&#32;but&#32;I&#32;really&#32;hate&#32;to&#32;have&#32;two&#32;ways&#32;to&#32;build&#32;up&#32;objects&#32;instead&#32;of&#32;Unity&#32;being&#32;a&#32;one&#32;stop&#32;shop&#32;&#40;or&#32;bettern&#32;put,&#32;I&#32;hate&#32;to&#32;resort&#32;to&#32;two&#32;stage&#32;construction&#32;if&#32;I&#32;don&#39;t&#32;need&#32;to&#41;.&#32;It&#39;s&#32;can&#32;also&#32;be&#32;inpractical&#32;or&#32;impossible&#32;to&#32;modify&#32;the&#32;code&#32;to&#32;put&#32;that&#32;attribute&#32;on&#32;the&#32;constructor&#32;we&#32;want&#32;&#40;for&#32;instance&#32;we&#32;don&#39;t&#32;have&#32;it&#47;own&#32;the&#32;code&#32;in&#32;question&#41;.2.&#32;I&#32;don&#39;t&#32;always&#32;know&#32;what&#32;constructor&#32;I&#32;want&#32;at&#32;compile&#32;time.&#32;Many&#32;times&#32;it&#32;is&#32;specific&#32;to&#32;the&#32;deployment&#32;and&#32;therefore&#32;not&#32;determined&#32;until&#32;configuration&#32;time&#32;of&#32;an&#32;application.&#32;This&#32;is&#32;a&#32;use&#32;case&#32;we&#39;ve&#32;run&#32;into&#32;very&#32;specifically&#32;with&#32;the&#32;Microsoft.Uddi.UddiConnection&#32;class.&#32;There&#39;s&#32;4&#32;constructors&#32;available&#32;and&#32;sometimes&#32;I&#32;need&#32;to&#32;pick&#32;one&#32;or&#32;the&#32;other&#32;depending&#32;on&#32;the&#32;deployment&#32;scenario.&#32;Specifically&#32;I&#32;may&#32;need&#32;to&#32;use&#32;user&#32;name&#32;and&#32;password&#32;authentication&#32;in&#32;one&#32;deployment&#32;and&#32;in&#32;another&#32;I&#32;can&#32;use&#32;Windows&#32;auth.&#32;I&#32;don&#39;t&#32;technically&#32;own&#32;the&#32;code&#32;to&#32;slap&#32;the&#32;attribute&#32;on&#32;it&#32;so&#32;how&#32;do&#32;we&#32;handle&#32;that&#32;situation&#32;without&#32;resorting&#32;to&#32;Unity&#32;providing&#32;access&#32;to&#32;a&#32;UddiFactory&#32;class&#32;that&#32;has&#32;calls&#32;a&#32;specific&#32;constructor&#32;for&#32;me&#32;and&#32;swap&#32;out&#32;configurations&#63;3.&#32;Many&#32;times&#32;we&#32;want&#32;to&#32;enable&#32;adhoc&#32;decorations&#32;on&#32;types&#32;that&#32;we&#32;build&#32;up.&#32;I&#32;tend&#32;to&#32;see&#32;this&#32;needed&#32;in&#32;applications,&#32;generally&#32;server&#32;side,&#32;that&#32;utilize&#32;a&#32;Command&#32;Orientated&#32;Interface&#32;&#40;a&#32;pattern&#32;I&#32;find&#32;lends&#32;itself&#32;naturally&#32;to&#32;implementing&#32;services&#41;.&#32;Now&#32;I&#32;know&#32;we&#32;can&#32;write&#32;an&#32;extension&#32;that&#32;incorporates&#32;this&#32;using&#32;Policy&#32;Injection&#32;Block&#32;but&#32;sometimes&#32;that&#32;really&#32;a&#32;huge&#32;overkill&#32;for&#32;what&#32;we&#32;need.&#32;Let&#32;me&#32;use&#32;Martin&#32;Fowler&#39;s&#32;example&#32;on&#32;Decorate&#32;Commands&#32;http&#58;&#47;&#47;www.martinfowler.com&#47;bliki&#47;DecoratedCommand.html&#32;and&#32;postulate&#32;that&#32;the&#32;CommandDecorator&#32;class&#32;in&#32;his&#32;example&#32;has&#32;a&#32;protected&#32;constructor&#32;that&#32;accepts&#32;an&#32;instance&#32;of&#32;Command&#32;not&#32;any&#32;specific&#32;type&#32;of&#32;command&#32;&#40;in&#32;order&#32;to&#32;promote&#32;reuse&#41;.&#32;In&#32;addition,&#32;the&#32;CommandDecorator&#32;class&#32;sub&#32;classes&#32;Command&#32;thereby&#32;exposing&#32;the&#32;same&#32;interface.&#32;The&#32;concrete&#32;implentation&#32;of&#32;a&#32;some&#32;CommandDecorator&#32;does&#32;whatever&#32;it&#32;needs&#32;to&#32;do&#32;&#40;say&#32;create&#32;an&#32;ambient&#32;transaction&#41;&#32;and&#32;then&#32;calls&#32;the&#32;inner&#32;command&#39;s&#32;execute&#32;method.&#32;That&#32;inner&#32;command&#32;may&#32;or&#32;may&#32;not&#32;be&#32;another&#32;decorator.&#32;Because&#32;all&#32;the&#32;types&#32;involved&#32;here&#32;expose&#32;a&#32;single&#32;constructor&#32;that&#32;accepts&#32;a&#32;single&#32;parameter&#32;typed&#32;as&#32;Command,&#32;how&#32;does&#32;Unity&#32;know&#32;what&#32;type&#32;of&#32;command&#32;to&#32;build&#32;up&#63;&#32;If&#32;I&#32;could&#32;select&#32;the&#32;constructor&#32;and&#32;actually&#32;state&#32;the&#32;concrete&#32;type&#32;i&#32;wanted&#32;at&#32;configuration&#32;time&#32;then&#32;we&#39;re&#32;in&#32;business.&#32;Wouldn&#39;t&#32;Unity&#32;by&#32;default&#32;end&#32;up&#32;in&#32;a&#32;infinite&#32;recursion&#32;situation&#32;&#40;or&#32;does&#32;it&#32;recoginze&#32;this&#32;situation&#32;and&#32;jsut&#32;give&#32;up&#63;&#41;&#32;trying&#32;to&#32;follow&#32;the&#32;type&#32;mapping&#32;on&#32;CommandDecorator&#32;class&#32;to&#32;TransactionDecoratorCommand&#32;class&#32;that&#32;has&#32;a&#32;dependency&#32;on&#32;CommandDecorator&#32;that&#32;type&#32;maps&#32;to&#32;TransactionDecoratorCommand&#32;and&#32;so&#32;forth&#32;ad&#32;infinitum.&#32;How&#32;do&#32;we&#32;express&#32;that&#32;situation&#32;in&#32;configuration&#32;schema&#32;that&#32;Unity&#32;uses&#63;&#32;I&#32;know&#32;how&#32;to&#32;accompish&#32;this&#32;in&#32;code&#32;with&#32;Unity&#32;but&#32;not&#32;how&#32;your&#32;config&#32;can.So&#32;I&#32;question&#32;if&#32;this&#32;is&#32;a&#32;way&#32;to&#32;approach&#32;this&#32;configuration&#32;issue&#32;to&#32;support&#32;the&#32;above&#32;outlined&#32;use&#32;casesUse&#32;case&#32;&#35;1&#47;2Here&#39;s&#32;a&#32;place&#32;where&#32;I&#32;am&#32;stating&#32;I&#32;want&#32;to&#32;use&#32;the&#32;specific&#32;constructor&#32;that&#32;accepts&#32;a&#32;single&#32;string&#32;vs&#32;the&#32;other&#32;one&#32;that&#32;uses&#32;the&#32;same&#32;string&#32;and&#32;an&#32;Enum&#38;lt&#59;unity&#38;gt&#59;&#32;&#38;lt&#59;containers&#32;Default&#61;&#34;containerOne&#34;&#38;gt&#59;&#32;&#38;lt&#59;container&#32;name&#61;&#34;containerOne&#34;&#38;gt&#59;&#32;&#38;lt&#59;types&#38;gt&#59;&#32;&#38;lt&#59;add&#32;name&#61;&#34;MyType1&#34;&#32;type&#61;&#34;TypeWithManyConstructors&#34;&#38;gt&#59;&#32;&#38;lt&#59;&#33;--&#32;you&#32;would&#32;only&#32;use&#32;one&#32;of&#32;these&#32;constructor&#32;elements.&#32;they&#39;re&#32;included&#32;for&#32;suscinctness--&#38;gt&#59;&#32;&#38;lt&#59;constructor&#38;gt&#59;&#32;&#38;lt&#59;&#33;--&#32;Find&#32;Constructor&#32;with&#32;a&#32;single&#32;parameter&#32;of&#32;string--&#38;gt&#59;&#32;&#38;lt&#59;param&#32;type&#61;&#34;System.String&#34;&#38;gt&#59;&#32;&#38;lt&#59;ValueParameter&#38;gt&#59;My&#32;Value&#32;but&#32;one&#32;I&#32;don&#39;t&#32;to&#32;use&#32;as&#32;an&#32;instance.&#38;lt&#59;&#47;ValueParameter&#38;gt&#59;&#32;&#38;lt&#59;&#47;param&#38;gt&#59;&#32;&#38;lt&#59;&#47;constructor&#38;gt&#59;&#32;&#38;lt&#59;&#33;--&#32;variation&#32;2&#32;--&#38;gt&#59;&#32;&#38;lt&#59;constructor&#38;gt&#59;&#32;&#38;lt&#59;&#33;--&#32;Find&#32;Constructor&#32;with&#32;a&#32;parameter&#32;of&#32;string--&#38;gt&#59;&#32;&#38;lt&#59;param&#32;type&#61;&#34;System.String&#34;&#38;gt&#59;&#32;&#38;lt&#59;LookupParameter&#32;Name&#61;&#34;my&#32;instance&#32;name&#34;&#38;gt&#59;&#38;lt&#59;&#33;--My&#32;Value&#32;but&#32;one&#32;that&#32;IS&#32;defined&#32;as&#32;an&#32;instance&#32;because&#32;I&#32;use&#32;it&#32;in&#32;several&#32;types&#32;and&#32;I&#32;don&#39;t&#32;want&#32;to&#32;retype&#32;the&#32;smae&#32;value&#32;over&#32;and&#32;over--&#38;gt&#59;&#38;lt&#59;&#47;LookupParameter&#38;gt&#59;&#32;&#38;lt&#59;&#47;param&#38;gt&#59;&#32;&#38;lt&#59;&#47;constructor&#38;gt&#59;&#32;&#38;lt&#59;&#47;add&#38;gt&#59;&#32;&#38;lt&#59;&#47;types&#38;gt&#59;&#32;&#38;lt&#59;&#47;container&#38;gt&#59;&#32;&#38;lt&#59;&#47;containers&#38;gt&#59;&#38;lt&#59;&#47;unity&#38;gt&#59;Use&#32;case&#32;&#35;3&#38;lt&#59;unity&#38;gt&#59;&#32;&#38;lt&#59;containers&#32;Default&#61;&#34;containerOne&#34;&#38;gt&#59;&#32;&#38;lt&#59;container&#32;name&#61;&#34;containerOne&#34;&#38;gt&#59;&#32;&#38;lt&#59;types&#38;gt&#59;&#32;&#38;lt&#59;add&#32;name&#61;&#34;Our&#32;Command&#34;&#32;type&#61;&#34;InterestingCommand&#34;&#47;&#38;gt&#59;&#32;&#38;lt&#59;add&#32;name&#61;&#34;Transaction&#32;Decorator&#34;&#32;type&#61;&#34;TransactionDecoratorCommand&#34;&#38;gt&#59;&#32;&#38;lt&#59;constructor&#38;gt&#59;&#32;&#38;lt&#59;&#33;--&#32;find&#32;constructor&#32;that&#32;accepts&#32;Command&#32;as&#32;parameter&#32;--&#38;gt&#59;&#32;&#38;lt&#59;param&#32;type&#61;&#34;Command&#34;&#38;gt&#59;&#32;&#38;lt&#59;&#33;--&#32;satisfy&#32;the&#32;parameter&#32;by&#32;finding&#32;the&#32;element&#32;matching&#32;add&#64;name&#32;&#61;&#32;type&#64;name&#32;--&#38;gt&#59;&#32;&#38;lt&#59;DependencyParameter&#32;name&#61;&#34;Our&#32;Command&#34;&#47;&#38;gt&#59;&#32;&#38;lt&#59;&#47;param&#38;gt&#59;&#32;&#38;lt&#59;constructor&#38;gt&#59;&#32;&#38;lt&#59;&#47;add&#38;gt&#59;&#32;&#38;lt&#59;add&#32;name&#61;&#34;Security&#32;Decorator&#34;&#32;type&#61;&#34;Command&#34;&#32;mapTo&#61;&#34;SecurityDecoratorCommand&#34;&#38;gt&#59;&#32;&#38;lt&#59;constructor&#38;gt&#59;&#32;&#38;lt&#59;&#33;--&#32;find&#32;constructor&#32;that&#32;accepts&#32;Command&#32;as&#32;parameter&#32;--&#38;gt&#59;&#32;&#38;lt&#59;param&#32;type&#61;&#34;Command&#34;&#38;gt&#59;&#32;&#38;lt&#59;&#33;--&#32;this&#32;time&#32;we&#39;ll&#32;satisfy&#32;the&#32;parameter&#32;by&#32;finding&#32;explicitly&#32;declaring&#32;the&#32;type&#32;--&#38;gt&#59;&#32;&#38;lt&#59;DependencyParameter&#32;type&#61;&#34;TransactionDecoratorCommand&#34;&#47;&#38;gt&#59;&#32;&#38;lt&#59;&#47;param&#38;gt&#59;&#32;&#38;lt&#59;&#47;constructor&#38;gt&#59;&#32;&#38;lt&#59;&#47;add&#38;gt&#59;&#32;&#38;lt&#59;&#47;types&#38;gt&#59;&#32;&#38;lt&#59;&#47;container&#38;gt&#59;&#32;&#38;lt&#59;containers&#38;gt&#59;&#38;lt&#59;&#47;unity&#38;gt&#59;This&#32;syntax&#32;is&#32;not&#32;disimilar&#32;to&#32;an&#32;approach&#32;we&#39;ve&#32;taken&#32;in&#32;a&#32;container&#32;we&#32;built&#32;when&#32;EntLib&#32;3.0&#32;first&#32;came&#32;out&#32;to&#32;automatically&#32;wire&#32;up&#32;components&#32;with&#32;dependency&#32;chains.&#32;Worse&#32;case&#32;my&#32;team&#32;and&#32;I&#32;are&#32;thinking&#32;we&#39;ll&#32;provide&#32;an&#32;alternative&#32;configuration&#32;syntax&#32;based&#32;on&#32;our&#32;current&#32;DI&#32;container&#32;&#40;has&#32;a&#32;very&#32;unity&#32;like&#32;interface&#32;over&#32;Object&#32;Builder&#32;as&#32;well&#32;so&#32;it&#39;s&#32;gonna&#32;be&#32;a&#32;quick&#32;port&#41;&#32;to&#32;enable&#32;this.&#32;Not&#32;disimilar&#32;to&#32;the&#32;whole&#32;nano&#47;pico&#32;container&#32;arrangement.&#32;We&#39;ve&#32;just&#32;got&#32;to&#32;get&#32;permission&#32;from&#32;our&#32;IP&#32;owner&#32;to&#32;release&#32;the&#32;code&#32;under&#32;the&#32;appropriate&#32;license.Community&#32;thoughts&#47;Cheers&#47;Flames&#47;Jimmy&#32;gets&#32;ejected&#32;out&#32;of&#32;another&#32;airlock&#47;Am&#32;I&#32;smoking&#32;Crack&#63;-JZ">
        I think that we should see about supporting an additional level of expressiveness to the Unity configuration that allows us to pick out the constructor we want to use for our types in the container.<br>
<br>
Currently we have support for this:<br>
<br>
&lt;unity&gt;<br>
&lt;containers Default=&quot;containerOne&quot;&gt;<br>
&lt;container name=&quot;containerOne&quot;&gt;<br>
&lt;types&gt;<br>
&lt;add name=&quot;MyType1&quot; type=&quot;Custom.MyBaseClass&quot;<br>
mapTo=&quot;Custom.MyConcreteClass&quot; /&gt;<br>
<br>
Which i think is just great. By default Unity is built around the use case for types that have a single constructor. If multiple are available, unity is going to take the first ConstructorInfo that comes out of Type.GetConstructors() array. To allow us to deterministically
 use a specific constructor we can decorate the constructor in question with an attribute. Which is also fine and dandy for many use cases. However it lacks some of the flexibility that I think many of us would like to see. There's three specific use cases
 where I can think this is really needed:<br>
<br>
1. 3rd party code or existing libraries with classes that have many constructors and doesn't know anything about Unity. To accomplish this use case today we'd probably resort to a factory object with a default or single parameterized constructor that had a
 method to build up the other class. Get's the job done easily and franky does the trick without too much effort but I really hate to have two ways to build up objects instead of Unity being a one stop shop (or bettern put, I hate to resort to two stage construction
 if I don't need to). It's can also be inpractical or impossible to modify the code to put that attribute on the constructor we want (for instance we don't have it/own the code in question).<br>
<br>
2. I don't always know what constructor I want at compile time. Many times it is specific to the deployment and therefore not determined until configuration time of an application. This is a use case we've run into very specifically with the Microsoft.Uddi.UddiConnection
 class. There's 4 constructors available and sometimes I need to pick one or the other depending on the deployment scenario. Specifically I may need to use user name and password authentication in one deployment and in another I can use Windows auth. I don't
 technically own the code to slap the attribute on it so how do we handle that situation without resorting to Unity providing access to a UddiFactory class that has calls a specific constructor for me and swap out configurations?<br>
<br>
3. Many times we want to enable adhoc decorations on types that we build up. I tend to see this needed in applications, generally server side, that utilize a Command Orientated Interface (a pattern I find lends itself naturally to implementing services). Now
 I know we can write an extension that incorporates this using Policy Injection Block but sometimes that really a huge overkill for what we need. Let me use Martin Fowler's example on Decorate Commands
<a href="http://www.martinfowler.com/bliki/DecoratedCommand.html" rel="nofollow">http://www.martinfowler.com/bliki/DecoratedCommand.html<span style="font-family:Consolas,Courier New,Courier,Monospace"></span></a> and postulate that the CommandDecorator class in his example
 has a protected constructor that accepts an instance of Command not any specific type of command (in order to promote reuse). In addition, the CommandDecorator class sub classes Command thereby exposing the same interface. The concrete implentation of a some
 CommandDecorator does whatever it needs to do (say create an ambient transaction) and then calls the inner command's execute method. That inner command may or may not be another decorator. Because all the types involved here expose a single constructor that
 accepts a single parameter typed as Command, how does Unity know what type of command to build up? If I could select the constructor and actually state the concrete type i wanted at configuration time then we're in business. Wouldn't Unity by default end up
 in a infinite recursion situation (or does it recoginze this situation and jsut give up?) trying to follow the type mapping on CommandDecorator class to TransactionDecoratorCommand class that has a dependency on CommandDecorator that type maps to TransactionDecoratorCommand
 and so forth ad infinitum. How do we express that situation in configuration schema that Unity uses? I know how to accompish this in code with Unity but not how your config can.<br>
<br>
So I question if this is a way to approach this configuration issue to support the above outlined use cases<br>
<br>
Use case #1/2<br>
Here's a place where I am stating I want to use the specific constructor that accepts a single string vs the other one that uses the same string and an Enum<br>
&lt;unity&gt;<br>
&lt;containers Default=&quot;containerOne&quot;&gt;<br>
&lt;container name=&quot;containerOne&quot;&gt;<br>
&lt;types&gt;<br>
&lt;add name=&quot;MyType1&quot; type=&quot;TypeWithManyConstructors&quot;&gt;<br>
&lt;!-- you would only use one of these constructor elements. they're included for suscinctness--&gt;<br>
&lt;constructor&gt;<br>
&lt;!-- Find Constructor with a single parameter of string--&gt;<br>
&lt;param type=&quot;System.String&quot;&gt;<br>
&lt;ValueParameter&gt;My Value but one I don't to use as an instance.&lt;/ValueParameter&gt;<br>
&lt;/param&gt;<br>
&lt;/constructor&gt;<br>
<br>
&lt;!-- variation 2 --&gt;<br>
&lt;constructor&gt;<br>
&lt;!-- Find Constructor with a parameter of string--&gt;<br>
&lt;param type=&quot;System.String&quot;&gt;<br>
&lt;LookupParameter Name=&quot;my instance name&quot;&gt;&lt;!--My Value but one that IS defined as an instance because I use it in several types and I don't want to retype the smae value over and over--&gt;&lt;/LookupParameter&gt;<br>
&lt;/param&gt;<br>
&lt;/constructor&gt;<br>
&lt;/add&gt;<br>
&lt;/types&gt;<br>
&lt;/container&gt;<br>
&lt;/containers&gt;<br>
&lt;/unity&gt;<br>
<br>
Use case #3<br>
&lt;unity&gt;<br>
&lt;containers Default=&quot;containerOne&quot;&gt;<br>
&lt;container name=&quot;containerOne&quot;&gt;<br>
&lt;types&gt;<br>
&lt;add name=&quot;Our Command&quot; type=&quot;InterestingCommand&quot;/&gt;<br>
&lt;add name=&quot;Transaction Decorator&quot; type=&quot;TransactionDecoratorCommand&quot;&gt;<br>
&lt;constructor&gt;<br>
&lt;!-- find constructor that accepts Command as parameter --&gt;<br>
&lt;param type=&quot;Command&quot;&gt;<br>
&lt;!-- satisfy the parameter by finding the element matching add<a href="http://www.codeplex.com/unity/Wiki/View.aspx?title=%40name" rel="nofollow">@name</a> = type<a href="http://www.codeplex.com/unity/Wiki/View.aspx?title=%40name" rel="nofollow">@name</a> --&gt;<br>
&lt;DependencyParameter name=&quot;Our Command&quot;/&gt;<br>
&lt;/param&gt;<br>
&lt;constructor&gt;<br>
&lt;/add&gt;<br>
&lt;add name=&quot;Security Decorator&quot; type=&quot;Command&quot; mapTo=&quot;SecurityDecoratorCommand&quot;&gt;<br>
&lt;constructor&gt;<br>
&lt;!-- find constructor that accepts Command as parameter --&gt;<br>
&lt;param type=&quot;Command&quot;&gt;<br>
&lt;!-- this time we'll satisfy the parameter by finding explicitly declaring the type --&gt;<br>
&lt;DependencyParameter type=&quot;TransactionDecoratorCommand&quot;/&gt;<br>
&lt;/param&gt;<br>
&lt;/constructor&gt;<br>
&lt;/add&gt;<br>
&lt;/types&gt;<br>
&lt;/container&gt;<br>
&lt;containers&gt;<br>
&lt;/unity&gt;<br>
<br>
This syntax is not disimilar to an approach we've taken in a container we built when EntLib 3.0 first came out to automatically wire up components with dependency chains. Worse case my team and I are thinking we'll provide an alternative configuration syntax
 based on our current DI container (has a very unity like interface over Object Builder as well so it's gonna be a quick port) to enable this. Not disimilar to the whole nano/pico container arrangement. We've just got to get permission from our IP owner to
 release the code under the appropriate license.<br>
<br>
Community thoughts/Cheers/Flames/Jimmy gets ejected out of another airlock/Am I smoking Crack?<br>
<br>
-JZ<br>

        
    </td>
    <td style="vertical-align: top; width: 134px;" class="Post ">
        
        <div id="Options_74348" class="Options" >
            
        </div>
        
    </td>
</tr>

        <tr><td colspan="3"><div class="PostSeparator"></div></td></tr>
        

<tr id="PostPanel" class="Post" d:forid="74372">
    <td id="PostDetailsCell_74372" style="vertical-align: top; border: solid #BBB 1px; border-bottom: none; border-left: none; border-top: none; width: 114px" class="Post">
        <div class="Details">
            <a name="post74372"></a>
            <div class="UserName" style="white-space: pre-wrap; word-wrap: break-word;"><a class="UserProfileLink" href="http://www.codeplex.com/site/users/view/francois_tanguay">francois_tanguay</a></div>
            <div class="UserRole"></div>
            <div style="white-space: normal" class="SubText"><span class="smartDate" title="2/16/2008 11:15:54 PM" LocalTimeTicks="1203232554">Feb 16, 2008 at 11:15 PM</span></div>
            
        </div>
    </td>
    <td id="PostContent_74372" style="width: 100%; vertical-align: top;" 
        class=" discussionPost discussionListContent WordWrapBreakWord Post " 
        data-markdown="&#32;First,&#32;just&#32;to&#32;clarify&#32;something&#32;regarding&#32;the&#32;ctor&#32;selection&#58;&#32;When&#32;no&#32;InjectionConstructorAttribute&#32;is&#32;specified,&#32;it&#32;doesn&#39;t&#32;take&#32;the&#32;1st&#32;ctor,&#32;it&#32;takes&#32;the&#32;one&#32;with&#32;the&#32;most&#32;arguments&#32;&#40;at&#32;least&#32;as&#32;I&#32;can&#32;see&#32;in&#32;the&#32;current&#32;code&#32;base&#41;.Second,&#32;I&#32;totally&#32;agree&#32;for&#32;better&#32;config&#32;support.&#32;But&#32;there&#32;are&#32;changes&#32;to&#32;be&#32;made&#32;to&#32;the&#32;container&#32;in&#32;order&#32;to&#32;support&#32;such&#32;config.&#32;AFAIK,&#32;there&#32;are&#32;no&#32;ways&#32;to&#32;provide&#32;values&#32;that&#32;aren&#39;t&#32;registered&#32;as&#32;dependencies&#32;nor&#32;instances&#32;in&#32;the&#32;container.So&#32;if&#32;I&#32;have&#32;a&#32;class&#32;with&#32;the&#32;following&#32;ctor&#58;&#32;public&#32;class&#32;Foo&#32;&#123;&#32;public&#32;Foo&#40;string&#32;name,&#32;int&#32;index&#41;&#32;&#123;...&#125;&#32;&#125;&#32;I&#32;need&#32;to&#32;register&#32;2&#32;instances&#32;in&#32;the&#32;container&#32;which&#32;make&#32;no&#32;sense&#32;since&#32;registering&#32;instances&#32;should&#32;be&#32;for&#32;shared&#32;services&#32;not&#32;for&#32;parameters&#32;local&#32;to&#32;a&#32;type&#32;ctor.Just&#32;imagine&#32;I&#32;need&#32;to&#32;build&#32;a&#32;second&#32;type&#32;through&#32;the&#32;container&#58;&#32;public&#32;class&#32;Person&#32;&#123;&#32;public&#32;Person&#40;string&#32;firstName,&#32;string&#32;lastName&#41;&#32;&#123;...&#125;&#32;&#125;&#32;How&#32;are&#32;we&#32;supposed&#32;to&#32;build&#32;such&#32;types&#63;">
        First, just to clarify something regarding the ctor selection: When no InjectionConstructorAttribute is specified, it doesn't take the 1st ctor, it takes the one with the most arguments (at least as I can see in the current code base).<br>
<br>
Second, I totally agree for better config support. But there are changes to be made to the container in order to support such config. AFAIK, there are no ways to provide values that aren't registered as dependencies nor instances in the container.<br>
<br>
So if I have a class with the following ctor:<br>
<br>
<pre style="background-color:#ECECEC; border:dashed .1em #3E62A6; font-family:Consolas,Courier New,Courier,Monospace; font-size:1em; margin-top:0; padding:.5em; height:auto; overflow:auto; overflow-x:auto; overflow-y:auto">
public class Foo
{
  public Foo(string name, int index) {...}
}
</pre>
<br>
I need to register 2 instances in the container which make no sense since registering instances should be for shared services not for parameters local to a type ctor.<br>
<br>
Just imagine I need to build a second type through the container:<br>
<br>
<pre style="background-color:#ECECEC; border:dashed .1em #3E62A6; font-family:Consolas,Courier New,Courier,Monospace; font-size:1em; margin-top:0; padding:.5em; height:auto; overflow:auto; overflow-x:auto; overflow-y:auto">
public class Person
{
  public Person(string firstName, string lastName) {...}
}
</pre>
<br>
How are we supposed to build such types?<br>

        
    </td>
    <td style="vertical-align: top; width: 134px;" class="Post ">
        
        <div id="Options_74372" class="Options" >
            
        </div>
        
    </td>
</tr>

        <tr><td colspan="3"><div class="PostSeparator"></div></td></tr>
        

<tr id="PostPanel" class="Post" d:forid="74435">
    <td id="PostDetailsCell_74435" style="vertical-align: top; border: solid #BBB 1px; border-bottom: none; border-left: none; border-top: none; width: 114px" class="Post">
        <div class="Details">
            <a name="post74435"></a>
            <div class="UserName" style="white-space: pre-wrap; word-wrap: break-word;"><a class="UserProfileLink" href="http://www.codeplex.com/site/users/view/gmelnik">gmelnik</a></div>
            <div class="UserRole"></div>
            <div style="white-space: normal" class="SubText"><span class="smartDate" title="2/17/2008 2:25:42 PM" LocalTimeTicks="1203287142">Feb 17, 2008 at 2:25 PM</span></div>
            
        </div>
    </td>
    <td id="PostContent_74435" style="width: 100%; vertical-align: top;" 
        class=" discussionPost discussionListContent WordWrapBreakWord Post " 
        data-markdown="&#32;Yes,&#32;Francois&#32;is&#32;correct&#32;-&#32;the&#32;container&#32;uses&#32;the&#32;greediest&#32;constructor,&#32;unless&#32;it&#32;finds&#32;the&#32;explicitely&#32;decorated&#32;one.Re&#58;&#32;config&#32;scheme&#32;improvement&#32;-&#32;sure,&#32;this&#32;is&#32;something&#32;we&#39;ll&#32;consider&#32;and&#32;likely&#32;do.&#32;Thanks&#32;for&#32;the&#32;good&#32;feedback&#33;">
        Yes, Francois is correct - the container uses the greediest constructor, unless it finds the explicitely decorated one.<br>
Re: config scheme improvement - sure, this is something we'll consider and likely do. Thanks for the good feedback!<br>

        
    </td>
    <td style="vertical-align: top; width: 134px;" class="Post ">
        
        <div id="Options_74435" class="Options" >
            
        </div>
        
    </td>
</tr>

        <tr><td colspan="3"><div class="PostSeparator"></div></td></tr>
        

<tr id="PostPanel" class="Post" d:forid="74444">
    <td id="PostDetailsCell_74444" style="vertical-align: top; border: solid #BBB 1px; border-bottom: none; border-left: none; border-top: none; width: 114px" class="Post">
        <div class="Details">
            <a name="post74444"></a>
            <div class="UserName" style="white-space: pre-wrap; word-wrap: break-word;"><a class="UserProfileLink" href="http://www.codeplex.com/site/users/view/jimmyzimms">jimmyzimms</a></div>
            <div class="UserRole"></div>
            <div style="white-space: normal" class="SubText"><span class="smartDate" title="2/17/2008 3:28:41 PM" LocalTimeTicks="1203290921">Feb 17, 2008 at 3:28 PM</span></div>
            
        </div>
    </td>
    <td id="PostContent_74444" style="width: 100%; vertical-align: top;" 
        class=" discussionPost discussionListContent WordWrapBreakWord Post " 
        data-markdown="gmelnik&#32;wrote&#58;the&#32;container&#32;uses&#32;the&#32;greediest&#32;constructorthanks&#32;for&#32;the&#32;heads&#32;up.&#32;&#58;&#41;&#32;I&#39;m&#32;glad&#32;the&#32;larger&#32;of&#32;the&#32;cocnstructors&#32;is&#32;taken&#32;by&#32;default.Since&#32;that&#39;s&#32;the&#32;case&#32;you&#39;ll&#32;want&#32;to&#32;update&#32;the&#32;documentation&#32;in&#32;the&#32;&#34;Annotating&#32;Objects&#32;for&#32;Constructor&#32;Injection&#34;&#32;articleThere&#32;it&#32;states&#58;How&#32;Unity&#32;Resolves&#32;Target&#32;Constructors&#32;and&#32;ParametersWhen&#32;a&#32;target&#32;class&#32;contains&#32;more&#32;than&#32;one&#32;constructor,&#32;Unity&#32;will&#32;use&#32;the&#32;one&#32;you&#32;decorate&#32;with&#32;the&#32;InjectionConstructor&#32;attribute.&#32;If&#32;there&#32;is&#32;more&#32;than&#32;one&#32;constructor,&#32;and&#32;none&#32;carries&#32;the&#32;InjectionConstructor&#32;attribute,&#32;Unity&#32;will&#32;use&#32;the&#32;first&#32;one&#32;returned&#32;through&#32;reflection&#32;over&#32;the&#32;class&#32;members.&#32;Reflection&#32;occurs&#32;in&#32;an&#32;effectively&#32;random&#32;order,&#32;and&#32;so&#32;the&#32;selected&#32;constructor&#32;may&#32;not&#32;be&#32;the&#32;first&#32;within&#32;the&#32;class&#32;declaration.&#58;&#41;">
        <br>
<div style="border:dotted .1em #aaa; border-left:none; border-right:none; font-style:italic; margin:1em 0em 2.5em 3em; padding:.2em">
<br>
gmelnik wrote:<br>
the container uses the greediest constructor<br>
</div>
<br>
thanks for the heads up. :) I'm glad the larger of the cocnstructors is taken by default.<br>
<br>
Since that's the case you'll want to update the documentation in the &quot;Annotating Objects for Constructor Injection&quot; article<br>
There it states:<br>
<br>
How Unity Resolves Target Constructors and Parameters<br>
When a target class contains more than one constructor, Unity will use the one you decorate with the InjectionConstructor attribute. If there is more than one constructor, and none carries the InjectionConstructor attribute, Unity will use the first one returned
 through reflection over the class members. Reflection occurs in an effectively random order, and so the selected constructor may not be the first within the class declaration.<br>
<br>
<br>
:)<br>

        
    </td>
    <td style="vertical-align: top; width: 134px;" class="Post ">
        
        <div id="Options_74444" class="Options" >
            
        </div>
        
    </td>
</tr>

        <tr><td colspan="3"><div class="PostSeparator"></div></td></tr>
        

<tr id="PostPanel" class="Post" d:forid="74446">
    <td id="PostDetailsCell_74446" style="vertical-align: top; border: solid #BBB 1px; border-bottom: none; border-left: none; border-top: none; width: 114px" class="Post">
        <div class="Details">
            <a name="post74446"></a>
            <div class="UserName" style="white-space: pre-wrap; word-wrap: break-word;"><a class="UserProfileLink" href="http://www.codeplex.com/site/users/view/francois_tanguay">francois_tanguay</a></div>
            <div class="UserRole"></div>
            <div style="white-space: normal" class="SubText"><span class="smartDate" title="2/17/2008 3:30:08 PM" LocalTimeTicks="1203291008">Feb 17, 2008 at 3:30 PM</span></div>
            
        </div>
    </td>
    <td id="PostContent_74446" style="width: 100%; vertical-align: top;" 
        class=" discussionPost discussionListContent WordWrapBreakWord Post " 
        data-markdown="&#32;I&#32;had&#32;already&#32;created&#32;a&#32;WI&#32;on&#32;this&#58;&#32;http&#58;&#47;&#47;www.codeplex.com&#47;unity&#47;WorkItem&#47;View.aspx&#63;WorkItemId&#61;1355">
        I had already created a WI on this: <a href="http://www.codeplex.com/unity/WorkItem/View.aspx?WorkItemId=1355" rel="nofollow">
http://www.codeplex.com/unity/WorkItem/View.aspx?WorkItemId=1355<span style="font-family:Consolas,Courier New,Courier,Monospace"></span></a><br>

        
    </td>
    <td style="vertical-align: top; width: 134px;" class="Post ">
        
        <div id="Options_74446" class="Options" >
            
        </div>
        
    </td>
</tr>

</table>
    </div>

    
        <div class="StandardMarginTop">
            <a id="SignInToAddCommentLink" href="https://www.codeplex.com/site/login?RedirectUrl=http%3a%2f%2funity.codeplex.com%2fdiscussions%2f22307">
                Sign in to post message or set email notifications
            </a>
        </div>
    


    <div id="PostEditorContainer">
        <a name="editor"></a>
        <div id="Editor" style="display: none;">
            

<div class="MarkdownEditor" data-options-id="d2c326ab-8818-46f9-83b1-f9c2b43f734a">
    <script class="options" defer="defer" id="d2c326ab-8818-46f9-83b1-f9c2b43f734a" type="application/json">{"maxLength":10000,"styleSheetLocation":""}</script>

    <div class="MarkdownEditorControls">
        <a href="#" tabindex="-1" class="control md_help" title="Markdown Syntax Guide"></a>
        <div class="control md_divider"></div>
        <a href="#" tabindex="-1" class="control md_header" title="Insert Header (CTRL + H)"></a>
        <a href="#" tabindex="-1" class="control md_code" title="Insert Code (CTRL + K)"></a>
        <a href="#" tabindex="-1" class="control md_quote" title="Insert Quote (CTRL + Q)"></a>
        <a href="#" tabindex="-1" class="control md_img" title="Insert Img (CTRL + G)"></a>
        <a href="#" tabindex="-1" class="control md_link" title="Insert Link (CTRL + L)"></a>
        <a href="#" tabindex="-1" class="control md_ulist" title="Unordered List (CTRL + U)"></a>
        <a href="#" tabindex="-1" class="control md_olist" title="Ordered List (CTRL + O)"></a>
        <a href="#" tabindex="-1" class="control md_italics" title="Italic Text (CTRL + I)"></a>
        <a href="#" tabindex="-1" class="control md_bold" title="Bold Text (CTRL + B)"></a>
    </div>

    

<div class="tab_control">
    <!-- Generate the basic HTML for the tabs. -->
    
        <div id="Compose"
              class="tab selected"
              data-custom-header-id=""
              data-tab-contents-id="compose_contents_51b1f17d-a404-4b1a-9ce5-98b37d991b2c">
            Compose
        </div>
    
        <div id="Preview"
              class="tab "
              data-custom-header-id=""
              data-tab-contents-id="preview_contents_5fe35836-12d0-4bc7-bef3-bd8108e1dece">
            Preview
        </div>
    
    <div class="clear"></div>
</div>


    <div id="compose_contents_51b1f17d-a404-4b1a-9ce5-98b37d991b2c" class="compose_tab_content">
        <textarea class=" MarkdownEditorDimensions" cols="20" id="MarkdownEditor" name="content" rows="2">
</textarea>
        <div class="ClearBoth"></div>

        <div class="markdownGuide" style="display: none">
            <table>
                <tr>
                    <td class="markdownGuideColumn">
                        <h1>Text Formatting</h1>
                        <div># Header 1</div>
                        <div>## Header 2</div>
                        <br />
                        <div>*italics* (or _italics_)</div>
                        <div>**bold** (or __bold__)</div>
                    </td>
                    <td class="markdownGuideColumn">
                        <h1>Lists</h1>
                        <div>* Unordered List</div>
                        <div>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp * SubItem</div>
                        <br />
                        <div>1. Ordered List</div>
                        <div>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp 1. SubItem</div>
                    </td>
                    <td class="markdownGuideColumn">
                        <h1>Quotes</h1>
                        <div>> Lorem ipsum</div>
                        <div>dolor sitamet </div>
                        <div>non. Lectus at</div>
                        <div>nam nunc...</div>
                    </td>
                    <td class="markdownGuideColumn">
                        <h1>Code</h1>
                        <div>`Inline Code`</div>
                        <br />
                        <div>``` C#</div>
                        <div>if (foo==bar)</div>
                        <div>&nbsp&nbsp&nbsp&nbsp&nbsp&nbspbar++</div>
                        <div>```</div>
                    </td>
                    <td class="markdownGuideColumn">
                        <h1>References</h1>
                        <div>[Link Text](URL)</div>
                        <br />
                        <div>![Image](URL)</div>
                        <br />
                        <a class="Reference" target="_blank" href="http://codeplex.codeplex.com/wikipage?title=Markdown&referringTitle=Documentation">Markdown Reference</a>
                    </td>
                </tr>
            </table>
        </div>
    </div>
    <div id="preview_contents_5fe35836-12d0-4bc7-bef3-bd8108e1dece" class="preview_tab_content markDownOutput">
        
            <div></div>
        
    </div>
    <div class="clear"></div>
</div>

            
            <div class="row" id="recaptcha_row">
                
<script type="text/javascript">
    $(document).ready(function () {
        $('#recaptcha_reload').attr('src', '../assets/recaptcha_refresh.png');
        $('#recaptcha_switch_audio').attr('src', '../assets/recaptcha_audio.png');
        $('#recaptcha_switch_img').attr('src', '../assets/recaptcha_text.png');
        $('#recaptcha_whatsthis').attr('src', '../assets/recaptcha_help.png');
        $('#recaptcha_area tr:first').attr('height', '35');
    });
</script>

                <div class="clear"></div>
                <span id="ReCaptchaError"></span>
            </div>
            <div style="padding-top: 6px;">
                <input type="button" id="SaveButton" value="Save" class="ok" />
                <input type="button" id="CancelButton" value="Cancel" class="cancel" />
                <div class="clear"></div>
            </div>
        </div>
    </div>
</div>

<div id="DeletePostPanel" class="modal" style="display:none">
    <div class="row">
        <h2>Delete Post <a href="javascript:return false;" class="close">X</a></h2>
    </div>
    <div class="modal_info">
        <p>Are you sure you want to delete this post? You will not be able to recover it later.</p>
        <p class="modal_buttons">
            <input type="button" id="ClosePostCancel" value="Cancel" class="cancel" />
            <input type="button" id="ClosePostOk" value="Delete" class="ok" />
        </p>
        <div class="ClearBoth"></div>
    </div>
</div>
        
            <!-- Email notification / Subscription details -->
            
    </div>
</div>
    
<div id="DeleteThreadPanel" class="modal" style="display:none">
    <div class="row">
        <h2>Delete Thread <a href="javascript:return false;" class="close">X</a></h2>
    </div>
    <div class="modal_info">
        <p>Are you sure you want to delete this thread? You will not be able to recover it later.</p>
        <p class="modal_buttons">
            <input type="button" id="CloseThreadCancel" value="Cancel" class="cancel" />
            <input type="button" id="CloseThreadOk" value="Delete" class="ok" />
        </p>
        <div class="ClearBoth"></div>
    </div>
</div>

<script type="text/javascript" language="javascript">
    $(function () {

        $('#recaptcha_response_field')
            .bind('keypress', function (event) { return $submitKeyPressElement(this, event); });


        if ($('#DeleteThreadLink')) {
            $('#DeleteThreadLink').click(function () {
                OpenDialog('#DeleteThreadPanel', true, '41em');
            });
        }
        
        $('#DeleteThreadPanel #CloseThreadOk').click(function () {
            var url = 'http://unity.codeplex.com/discussions/22307';
            $.ajax({
                url: url,
                type: 'DELETE',
                success: function (x) {
                    location.href = x.RedirectUrl;
                }
            });
        });
    });

    workItemMention = new codeplex.ui.WorkItemMention();
    workItemMention.addLinks(".discussionPost");
</script>


        
        
                
                <div class="clear"></div>
                
                <div id="footer">
                    <div class="row">
                        <hr />
                        <ul>
                            <li>Â© 2006-2017 Microsoft</li>
                            <li><a href="http://www.codeplex.com/site/help">Get Help</a></li>
                            <li><a href="/site/legal/privacy">Privacy Statement</a></li>
                            <li><a href="http://www.codeplex.com/site/legal/terms">Terms of Use</a></li>
                            <li><a href="http://www.codeplex.com/site/legal/conduct">Code of Conduct</a></li>
                            <li><a href="http://developermedia.com/" target="_blank">Advertise With Us</a></li>
                            <li>Version 2017.10.3.21062</li>
                        </ul>
                    </div>
                </div>
            </div>
        </form>
    </body>

</html>